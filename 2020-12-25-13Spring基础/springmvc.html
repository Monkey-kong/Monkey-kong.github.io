<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>第 5-9 章 Web 中的 Spring | 悟空</title>
  <meta name="keywords" content=" sia ">
  <meta name="description" content="第 5-9 章 Web 中的 Spring | 悟空">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta property="og:type" content="website">
<meta property="og:title" content="悟空">
<meta property="og:url" content="http://yoursite.com/404.html">
<meta property="og:site_name" content="悟空">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2019-11-16T00:43:02.436Z">
<meta property="article:modified_time" content="2019-11-08T14:02:36.972Z">
<meta property="article:author" content="悟空">
<meta name="twitter:card" content="summary">


<link rel="icon" href="/img/avatar.jpg">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/darcula.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>



<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.1.0" ></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aplayer/1.10.1/APlayer.min.css"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/aplayer/1.10.1/APlayer.min.js"></script>
<script src="https://unpkg.com/meting@1.2/dist/Meting.min.js"></script>
<meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="悟空" type="application/atom+xml">
</head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="">
  <input class="theme_blog_path" value="">
  <input id="theme_shortcut" value="true" />
  <input id="theme_highlight_on" value="true" />
  <input id="theme_code_copy" value="true" />
</div>



<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/" class="avatar_target">
    <img class="avatar" src="/img/avatar.jpg" />
</a>
<div class="author">
    <span>悟空</span>
</div>

<div class="icon">
    
        
        <a title="rss" href="/atom.xml" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-rss"></use>
                </svg>
            
        </a>
        
    
        
        <a title="github" href="https://github.com/Monkey-kong" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-github"></use>
                </svg>
            
        </a>
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
        <a title="zhihu" href="https://www.zhihu.com/people/wukong-16" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-zhihu"></use>
                </svg>
            
        </a>
        
    
        
    
        
    
        
    
        
        <a title="email" href="mailto:lixianfu1@outlook.com" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-email"></use>
                </svg>
            
        </a>
        
    
        
        <a title="qq" href="http://wpa.qq.com/msgrd?v=3&uin=1109075867&site=qq&menu=yes" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-qq"></use>
                </svg>
            
        </a>
        
    
        
    
        
    
</div>




<ul>
    <li><div class="all active" data-rel="全部文章">全部文章<small>(129)</small></div></li>
    
        
            
            <li><div data-rel="Java基础">Java基础<small>(18)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="JVM">JVM<small>(11)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="多线程">多线程<small>(7)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="OS">OS<small>(5)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="IO">IO<small>(9)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="高并发">高并发<small>(9)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="MySQL">MySQL<small>(14)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="分布式">分布式<small>(23)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="设计模式">设计模式<small>(4)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="算法">算法<small>(6)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="前端">前端<small>(7)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="其他">其他<small>(9)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="kafka">kafka<small>(2)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="Spring基础">Spring基础<small>(5)</small></div>
                
            </li>
            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
    
    
    
    
    </div>
    <div><a class="about  hasFriend  site_url"  href="/about">关于</a><a style="width: 50%"  class="friends">友链</a></div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="129">
<input type="hidden" id="yelog_site_word_count" value="372k">
<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        友情链接
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="http://yelog.org/">叶落阁</a></li>
            
            <li><a target="_blank" href="https://www.chenuon.cn/">程忧点滴</a></li>
            
            <li><a target="_blank" href="https://blog.jamespan.me/">小鶸の道场</a></li>
            
            <li><a target="_blank" href="http://www.ruanyifeng.com/home.html">阮一峰</a></li>
            
            <li><a target="_blank" href="https://www.haomwei.com/">屠城</a></li>
            
            <li><a target="_blank" href="https://hasaik.com/">hasaik</a></li>
            
            <li><a target="_blank" href="https://www.imalan.cn/">三无计划</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="搜索 快捷键 i"></i>
            <div class="right-title">全部文章</div>
            <i class="iconfont icon-file-tree" data-title="切换到大纲视图 快捷键 w"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="返回"></i>
            <input id="local-search-input" />
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="大小写敏感"></i>
            <i class="iconfont icon-tag" data-title="标签"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">大纲</div>
            <i class="iconfont icon-list" data-title="切换到文章列表"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search" />
    <div class="tag-wrapper">
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>博客</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>多线程</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>分布式会话</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>架构</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>内网穿透</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>其他</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>算法</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>随笔</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>网络</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>远程连接</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Blog</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Eureka</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>flex</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>frp</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>https</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>IO</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Java讲义</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>JVM</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>kafka</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Linux</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>LVS</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>MySQL</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Nginx</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>NIO</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Observer</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>OS</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Proxy</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Redis</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>RSC</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>sia</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Singleton</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Spring Cloud</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>TypeScript</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>uni-app</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>vue</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>webpack</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ZooKeeper</a>
            </li>
        
    </div>

</div>

    
    <nav id="title-list-nav">
        
        <a  class="全部文章 分布式 "
           href="/2021-01-18-08%E5%88%86%E5%B8%83%E5%BC%8F/%E9%AB%98%E5%B9%B6%E5%8F%91%E6%9E%B6%E6%9E%84(6)-%E8%B5%84%E6%BA%90%E9%9A%94%E7%A6%BB.html"
           data-tag="架构"
           data-author="" >
            <span class="post-title" title="高并发架构(六)">高并发架构(六)</span>
            <span class="post-date" title="2021-01-18 20:43:12">2021/01/18</span>
        </a>
        
        <a  class="全部文章 分布式 "
           href="/2021-01-18-08%E5%88%86%E5%B8%83%E5%BC%8F/%E9%AB%98%E5%B9%B6%E5%8F%91%E6%9E%B6%E6%9E%84(7)-%E9%99%90%E6%B5%81.html"
           data-tag="架构"
           data-author="" >
            <span class="post-title" title="高并发架构(七)">高并发架构(七)</span>
            <span class="post-date" title="2021-01-18 20:43:12">2021/01/18</span>
        </a>
        
        <a  class="全部文章 分布式 "
           href="/2021-01-18-08%E5%88%86%E5%B8%83%E5%BC%8F/%E9%AB%98%E5%B9%B6%E5%8F%91%E6%9E%B6%E6%9E%84(8)-%E6%89%A9%E5%AE%B9.html"
           data-tag="架构"
           data-author="" >
            <span class="post-title" title="高并发架构(8) 扩容">高并发架构(8) 扩容</span>
            <span class="post-date" title="2021-01-18 20:43:12">2021/01/18</span>
        </a>
        
        <a  class="全部文章 分布式 "
           href="/2021-01-18-08%E5%88%86%E5%B8%83%E5%BC%8F/%E9%AB%98%E5%B9%B6%E5%8F%91%E6%9E%B6%E6%9E%84(9)-%E9%99%8D%E7%BA%A7.html"
           data-tag="架构"
           data-author="" >
            <span class="post-title" title="高并发架构(9) 降级">高并发架构(9) 降级</span>
            <span class="post-date" title="2021-01-18 20:43:12">2021/01/18</span>
        </a>
        
        <a  class="全部文章 分布式 "
           href="/2021-01-17-08%E5%88%86%E5%B8%83%E5%BC%8F/%E9%AB%98%E5%B9%B6%E5%8F%91%E6%9E%B6%E6%9E%84(4)-%E7%BC%93%E5%AD%98.html"
           data-tag="架构"
           data-author="" >
            <span class="post-title" title="高并发架构(四)">高并发架构(四)</span>
            <span class="post-date" title="2021-01-17 20:43:12">2021/01/17</span>
        </a>
        
        <a  class="全部文章 分布式 "
           href="/2021-01-17-08%E5%88%86%E5%B8%83%E5%BC%8F/%E9%AB%98%E5%B9%B6%E5%8F%91%E6%9E%B6%E6%9E%84(5)-CAP%E7%90%86%E8%AE%BA.html"
           data-tag="架构"
           data-author="" >
            <span class="post-title" title="高并发架构(五)">高并发架构(五)</span>
            <span class="post-date" title="2021-01-17 20:43:12">2021/01/17</span>
        </a>
        
        <a  class="全部文章 分布式 "
           href="/2021-01-16-08%E5%88%86%E5%B8%83%E5%BC%8F/%E9%AB%98%E5%B9%B6%E5%8F%91%E6%9E%B6%E6%9E%84(3)-dns%E5%92%8Cnginx%E9%80%9A%E8%BF%87lua%E8%AE%BF%E9%97%AEredis.html"
           data-tag="架构"
           data-author="" >
            <span class="post-title" title="高并发架构(三)">高并发架构(三)</span>
            <span class="post-date" title="2021-01-16 20:43:12">2021/01/16</span>
        </a>
        
        <a  class="全部文章 分布式 "
           href="/2021-01-08-08%E5%88%86%E5%B8%83%E5%BC%8F/%E9%AB%98%E5%B9%B6%E5%8F%91%E6%9E%B6%E6%9E%84(2)-redis%E6%89%A7%E8%A1%8Clua%E5%92%8Cnginx%E6%89%A7%E8%A1%8Clua.html"
           data-tag="架构"
           data-author="" >
            <span class="post-title" title="高并发架构(二)">高并发架构(二)</span>
            <span class="post-date" title="2021-01-08 20:43:12">2021/01/08</span>
        </a>
        
        <a  class="全部文章 分布式 "
           href="/2021-01-07-08%E5%88%86%E5%B8%83%E5%BC%8F/%E9%AB%98%E5%B9%B6%E5%8F%91%E6%9E%B6%E6%9E%84(1)-%E9%AB%98%E5%B9%B6%E5%8F%91%E6%9E%B6%E6%9E%84%E5%92%8Clua%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80.html"
           data-tag="架构"
           data-author="" >
            <span class="post-title" title="高并发架构(一)">高并发架构(一)</span>
            <span class="post-date" title="2021-01-07 20:43:12">2021/01/07</span>
        </a>
        
        <a  class="全部文章 Spring基础 "
           href="/2020-12-25-13Spring%E5%9F%BA%E7%A1%80/springmvc.html"
           data-tag="sia"
           data-author="" >
            <span class="post-title" title="第 5-9 章 Web 中的 Spring">第 5-9 章 Web 中的 Spring</span>
            <span class="post-date" title="2020-12-25 22:13:12">2020/12/25</span>
        </a>
        
        <a  class="全部文章 Spring基础 "
           href="/2020-12-24-13Spring%E5%9F%BA%E7%A1%80/20191026sia4.html"
           data-tag="sia"
           data-author="" >
            <span class="post-title" title="第 4 章 面向切面的 Spring">第 4 章 面向切面的 Spring</span>
            <span class="post-date" title="2020-12-24 22:13:12">2020/12/24</span>
        </a>
        
        <a  class="全部文章 Spring基础 "
           href="/2020-12-23-13Spring%E5%9F%BA%E7%A1%80/20191025sia3.html"
           data-tag="sia"
           data-author="" >
            <span class="post-title" title="第 3 章 高级装配">第 3 章 高级装配</span>
            <span class="post-date" title="2020-12-23 22:13:12">2020/12/23</span>
        </a>
        
        <a  class="全部文章 其他 "
           href="/2020-12-22-12%E5%85%B6%E4%BB%96/Linux%E5%A4%87%E5%BF%98.html"
           data-tag="Linux"
           data-author="" >
            <span class="post-title" title="Linux 常用命令备忘">Linux 常用命令备忘</span>
            <span class="post-date" title="2020-12-22 22:13:12">2020/12/22</span>
        </a>
        
        <a  class="全部文章 其他 "
           href="/2020-12-22-12%E5%85%B6%E4%BB%96/%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5.html"
           data-tag="frp,内网穿透,远程连接"
           data-author="" >
            <span class="post-title" title="使用 frp 实现远程连接和内网穿透">使用 frp 实现远程连接和内网穿透</span>
            <span class="post-date" title="2020-12-22 22:13:12">2020/12/22</span>
        </a>
        
        <a  class="全部文章 Spring基础 "
           href="/2020-12-22-13Spring%E5%9F%BA%E7%A1%80/20191022sia2.html"
           data-tag="sia"
           data-author="" >
            <span class="post-title" title="第 2 章 装配 Bean">第 2 章 装配 Bean</span>
            <span class="post-date" title="2020-12-22 22:13:12">2020/12/22</span>
        </a>
        
        <a  class="全部文章 其他 "
           href="/2020-12-22-12%E5%85%B6%E4%BB%96/%E5%8D%9A%E5%AE%A2-%E9%9F%B3%E4%B9%90%E7%BB%84%E4%BB%B6%E9%9B%86%E6%88%90.html"
           data-tag="博客"
           data-author="" >
            <span class="post-title" title="Hexo 博客集成 hexo-tag-aplayer">Hexo 博客集成 hexo-tag-aplayer</span>
            <span class="post-date" title="2020-12-22 22:13:12">2020/12/22</span>
        </a>
        
        <a  class="全部文章 其他 "
           href="/2020-12-22-README.html"
           data-tag="其他"
           data-author="" >
            <span class="post-title" title="博客汇总">博客汇总</span>
            <span class="post-date" title="2020-12-22 22:13:12">2020/12/22</span>
        </a>
        
        <a  class="全部文章 其他 "
           href="/2020-12-22-12%E5%85%B6%E4%BB%96/%E5%86%85%E5%AE%B9%E5%88%9B%E4%B8%9A.html"
           data-tag="随笔"
           data-author="" >
            <span class="post-title" title="内容创业">内容创业</span>
            <span class="post-date" title="2020-12-22 22:13:12">2020/12/22</span>
        </a>
        
        <a  class="全部文章 Spring基础 "
           href="/2020-12-21-13Spring%E5%9F%BA%E7%A1%80/20191019sia1.html"
           data-tag="sia"
           data-author="" >
            <span class="post-title" title="第 1 章 构建 Spring 之旅">第 1 章 构建 Spring 之旅</span>
            <span class="post-date" title="2020-12-21 22:13:12">2020/12/21</span>
        </a>
        
        <a  class="全部文章 Java基础 "
           href="/2020-12-21-01%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89/%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89C21-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html"
           data-tag="Java讲义"
           data-author="" >
            <span class="post-title" title="第 21 章 函数式编程">第 21 章 函数式编程</span>
            <span class="post-date" title="2020-12-21 22:13:12">2020/12/21</span>
        </a>
        
        <a  class="全部文章 前端 "
           href="/2020-11-30-11%E5%89%8D%E7%AB%AF/TypeScript.html"
           data-tag="TypeScript"
           data-author="" >
            <span class="post-title" title="TypeScript 学习(一)">TypeScript 学习(一)</span>
            <span class="post-date" title="2020-11-30 22:13:12">2020/11/30</span>
        </a>
        
        <a  class="全部文章 前端 "
           href="/2020-11-15-11%E5%89%8D%E7%AB%AF/Flex%E5%B8%83%E5%B1%80%E5%AE%9E%E6%88%98.html"
           data-tag="flex"
           data-author="" >
            <span class="post-title" title="Flex 布局实战">Flex 布局实战</span>
            <span class="post-date" title="2020-11-15 22:13:12">2020/11/15</span>
        </a>
        
        <a  class="全部文章 算法 "
           href="/2020-11-08-10%E7%AE%97%E6%B3%95/%E5%9F%BA%E7%A1%806-%E9%93%BE%E8%A1%A8%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html"
           data-tag="算法"
           data-author="" >
            <span class="post-title" title="算法基础（六）">算法基础（六）</span>
            <span class="post-date" title="2020-11-08 23:13:12">2020/11/08</span>
        </a>
        
        <a  class="全部文章 算法 "
           href="/2020-11-08-10%E7%AE%97%E6%B3%95/%E5%9F%BA%E7%A1%805-%E5%89%8D%E7%BC%80%E6%A0%91_%E6%A1%B6%E6%8E%92%E5%BA%8F_%E6%8E%92%E5%BA%8F%E6%80%BB%E7%BB%93.html"
           data-tag="算法"
           data-author="" >
            <span class="post-title" title="算法基础（五）">算法基础（五）</span>
            <span class="post-date" title="2020-11-08 22:13:12">2020/11/08</span>
        </a>
        
        <a  class="全部文章 算法 "
           href="/2020-11-02-10%E7%AE%97%E6%B3%95/%E5%9F%BA%E7%A1%803-%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F%E5%92%8C%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F.html"
           data-tag="算法"
           data-author="" >
            <span class="post-title" title="算法基础（三）">算法基础（三）</span>
            <span class="post-date" title="2020-11-02 22:13:12">2020/11/02</span>
        </a>
        
        <a  class="全部文章 算法 "
           href="/2020-11-02-10%E7%AE%97%E6%B3%95/%E5%9F%BA%E7%A1%804-%E6%AF%94%E8%BE%83%E5%99%A8_%E5%A0%86%E6%8E%92%E5%BA%8F.html"
           data-tag="算法"
           data-author="" >
            <span class="post-title" title="算法基础（四）">算法基础（四）</span>
            <span class="post-date" title="2020-11-02 22:13:12">2020/11/02</span>
        </a>
        
        <a  class="全部文章 算法 "
           href="/2020-10-30-10%E7%AE%97%E6%B3%95/%E5%9F%BA%E7%A1%802.html"
           data-tag="算法"
           data-author="" >
            <span class="post-title" title="算法基础（二）">算法基础（二）</span>
            <span class="post-date" title="2020-10-30 22:13:12">2020/10/30</span>
        </a>
        
        <a  class="全部文章 算法 "
           href="/2020-10-28-10%E7%AE%97%E6%B3%95/%E5%9F%BA%E7%A1%801-%E5%A4%8D%E6%9D%82%E5%BA%A6_%E5%AF%B9%E6%95%B0%E5%99%A8_%E4%BA%8C%E5%88%86%E6%B3%95_%E5%BC%82%E6%88%96%E8%BF%90%E7%AE%97.html"
           data-tag="算法"
           data-author="" >
            <span class="post-title" title="算法基础（一）">算法基础（一）</span>
            <span class="post-date" title="2020-10-28 22:13:12">2020/10/28</span>
        </a>
        
        <a  class="全部文章 分布式 "
           href="/2020-10-12-08%E5%88%86%E5%B8%83%E5%BC%8F/SpringCloud(8)-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E5%AE%9E%E8%B7%B5.html"
           data-tag="Spring Cloud"
           data-author="" >
            <span class="post-title" title="Spring Cloud学习(八)">Spring Cloud学习(八)</span>
            <span class="post-date" title="2020-10-12 23:43:12">2020/10/12</span>
        </a>
        
        <a  class="全部文章 分布式 "
           href="/2020-10-11-08%E5%88%86%E5%B8%83%E5%BC%8F/SpringCloud(8)-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1.html"
           data-tag="Spring Cloud"
           data-author="" >
            <span class="post-title" title="Spring Cloud学习(八)">Spring Cloud学习(八)</span>
            <span class="post-date" title="2020-10-11 23:43:12">2020/10/11</span>
        </a>
        
        <a  class="全部文章 分布式 "
           href="/2020-10-10-08%E5%88%86%E5%B8%83%E5%BC%8F/SpringCloud(7)-%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81.html"
           data-tag="Spring Cloud"
           data-author="" >
            <span class="post-title" title="Spring Cloud学习(七)">Spring Cloud学习(七)</span>
            <span class="post-date" title="2020-10-10 23:43:12">2020/10/10</span>
        </a>
        
        <a  class="全部文章 分布式 "
           href="/2020-10-04-08%E5%88%86%E5%B8%83%E5%BC%8F/SpringCloud(6)-config.html"
           data-tag="Spring Cloud"
           data-author="" >
            <span class="post-title" title="Spring Cloud学习(六)">Spring Cloud学习(六)</span>
            <span class="post-date" title="2020-10-04 23:43:12">2020/10/04</span>
        </a>
        
        <a  class="全部文章 分布式 "
           href="/2020-10-04-08%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86(1).html"
           data-tag="分布式会话"
           data-author="" >
            <span class="post-title" title="分布式会话管理(一)">分布式会话管理(一)</span>
            <span class="post-date" title="2020-10-04 20:43:12">2020/10/04</span>
        </a>
        
        <a  class="全部文章 分布式 "
           href="/2020-10-04-08%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86(3).html"
           data-tag="分布式会话"
           data-author="" >
            <span class="post-title" title="分布式会话管理(三)">分布式会话管理(三)</span>
            <span class="post-date" title="2020-10-04 20:43:12">2020/10/04</span>
        </a>
        
        <a  class="全部文章 分布式 "
           href="/2020-10-04-08%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86(4).html"
           data-tag="分布式会话"
           data-author="" >
            <span class="post-title" title="分布式会话管理(四)">分布式会话管理(四)</span>
            <span class="post-date" title="2020-10-04 20:43:12">2020/10/04</span>
        </a>
        
        <a  class="全部文章 分布式 "
           href="/2020-10-04-08%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86(2).html"
           data-tag="分布式会话"
           data-author="" >
            <span class="post-title" title="分布式会话管理(二)">分布式会话管理(二)</span>
            <span class="post-date" title="2020-10-04 20:43:12">2020/10/04</span>
        </a>
        
        <a  class="全部文章 分布式 "
           href="/2020-10-03-08%E5%88%86%E5%B8%83%E5%BC%8F/SpringCloud(5)-zuul.html"
           data-tag="Spring Cloud"
           data-author="" >
            <span class="post-title" title="Spring Cloud学习(五)">Spring Cloud学习(五)</span>
            <span class="post-date" title="2020-10-03 23:43:12">2020/10/03</span>
        </a>
        
        <a  class="全部文章 分布式 "
           href="/2020-10-03-08%E5%88%86%E5%B8%83%E5%BC%8F/SpringCloud(4)-Hystrix.html"
           data-tag="Spring Cloud"
           data-author="" >
            <span class="post-title" title="Spring Cloud学习(四)">Spring Cloud学习(四)</span>
            <span class="post-date" title="2020-10-03 23:33:12">2020/10/03</span>
        </a>
        
        <a  class="全部文章 分布式 "
           href="/2020-10-02-08%E5%88%86%E5%B8%83%E5%BC%8F/SpringCloud(3)-Feign.html"
           data-tag="Spring Cloud"
           data-author="" >
            <span class="post-title" title="SpringCloud学习(三)">SpringCloud学习(三)</span>
            <span class="post-date" title="2020-10-02 23:33:12">2020/10/02</span>
        </a>
        
        <a  class="全部文章 分布式 "
           href="/2020-10-02-08%E5%88%86%E5%B8%83%E5%BC%8F/SpringCloud(2).html"
           data-tag="Spring Cloud"
           data-author="" >
            <span class="post-title" title="Spring Cloud学习(二)">Spring Cloud学习(二)</span>
            <span class="post-date" title="2020-10-02 23:13:12">2020/10/02</span>
        </a>
        
        <a  class="全部文章 分布式 "
           href="/2020-10-01-08%E5%88%86%E5%B8%83%E5%BC%8F/SpringCloud(1).html"
           data-tag="Spring Cloud"
           data-author="" >
            <span class="post-title" title="Spring Cloud学习(一)">Spring Cloud学习(一)</span>
            <span class="post-date" title="2020-10-01 22:13:12">2020/10/01</span>
        </a>
        
        <a  class="全部文章 OS "
           href="/2020-09-20-04%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E7%AC%AC%E4%BA%94%E8%AF%BE.html"
           data-tag="OS"
           data-author="" >
            <span class="post-title" title="操作系统学习（五）">操作系统学习（五）</span>
            <span class="post-date" title="2020-09-20 22:13:12">2020/09/20</span>
        </a>
        
        <a  class="全部文章 OS "
           href="/2020-09-19-04%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E7%AC%AC%E5%9B%9B%E8%AF%BE.html"
           data-tag="OS"
           data-author="" >
            <span class="post-title" title="操作系统学习（四）">操作系统学习（四）</span>
            <span class="post-date" title="2020-09-19 22:13:12">2020/09/19</span>
        </a>
        
        <a  class="全部文章 OS "
           href="/2020-09-18-04%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E7%AC%AC%E4%B8%89%E8%AF%BE.html"
           data-tag="OS"
           data-author="" >
            <span class="post-title" title="操作系统学习（三）">操作系统学习（三）</span>
            <span class="post-date" title="2020-09-18 22:13:12">2020/09/18</span>
        </a>
        
        <a  class="全部文章 OS "
           href="/2020-09-16-04%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E7%AC%AC%E4%BA%8C%E8%AF%BE.html"
           data-tag="OS"
           data-author="" >
            <span class="post-title" title="操作系统学习（二）">操作系统学习（二）</span>
            <span class="post-date" title="2020-09-16 22:13:12">2020/09/16</span>
        </a>
        
        <a  class="全部文章 OS "
           href="/2020-09-15-04%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E7%AC%AC%E4%B8%80%E8%AF%BE.html"
           data-tag="OS"
           data-author="" >
            <span class="post-title" title="操作系统学习（一）">操作系统学习（一）</span>
            <span class="post-date" title="2020-09-15 22:13:12">2020/09/15</span>
        </a>
        
        <a  class="全部文章 MySQL "
           href="/2020-09-10-07MySQL/mysql_14_%E7%BB%8F%E5%85%B8%E9%9D%A2%E8%AF%95%E9%A2%98.html"
           data-tag="MySQL"
           data-author="" >
            <span class="post-title" title="MySql 调优(十四) 经典面试题目">MySql 调优(十四) 经典面试题目</span>
            <span class="post-date" title="2020-09-10 23:13:12">2020/09/10</span>
        </a>
        
        <a  class="全部文章 MySQL "
           href="/2020-08-29-07MySQL/mysql_13_JavaSPI%E6%9C%BA%E5%88%B6.html"
           data-tag="MySQL"
           data-author="" >
            <span class="post-title" title="MySql 调优(十三) Java SPI 机制详解">MySql 调优(十三) Java SPI 机制详解</span>
            <span class="post-date" title="2020-08-29 23:13:12">2020/08/29</span>
        </a>
        
        <a  class="全部文章 MySQL "
           href="/2020-08-29-07MySQL/mysql_12_%E7%BB%8F%E5%85%B8%E7%AC%94%E8%AF%95%E9%A2%98.html"
           data-tag="MySQL"
           data-author="" >
            <span class="post-title" title="MySql 调优(十二) 经典笔试题">MySql 调优(十二) 经典笔试题</span>
            <span class="post-date" title="2020-08-29 22:13:12">2020/08/29</span>
        </a>
        
        <a  class="全部文章 MySQL "
           href="/2020-08-29-07MySQL/mysql_11_%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB.html"
           data-tag="MySQL"
           data-author="" >
            <span class="post-title" title="MySql 调优(十一) 读写分离">MySql 调优(十一) 读写分离</span>
            <span class="post-date" title="2020-08-29 21:13:12">2020/08/29</span>
        </a>
        
        <a  class="全部文章 MySQL "
           href="/2020-08-29-07MySQL/mysql_10_%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6.html"
           data-tag="MySQL"
           data-author="" >
            <span class="post-title" title="MySql 调优(十)">MySql 调优(十)</span>
            <span class="post-date" title="2020-08-29 20:13:12">2020/08/29</span>
        </a>
        
        <a  class="全部文章 MySQL "
           href="/2020-08-27-07MySQL/mysql_9_%E4%BA%8B%E5%8A%A1.html"
           data-tag="MySQL"
           data-author="" >
            <span class="post-title" title="MySql 调优(九)">MySql 调优(九)</span>
            <span class="post-date" title="2020-08-27 22:13:12">2020/08/27</span>
        </a>
        
        <a  class="全部文章 MySQL "
           href="/2020-08-26-07MySQL/mysql_8_%E9%94%81%E6%9C%BA%E5%88%B6.html"
           data-tag="MySQL"
           data-author="" >
            <span class="post-title" title="MySql 调优(八)">MySql 调优(八)</span>
            <span class="post-date" title="2020-08-26 22:13:12">2020/08/26</span>
        </a>
        
        <a  class="全部文章 MySQL "
           href="/2020-08-16-07MySQL/mysql_7_%E7%B3%BB%E7%BB%9F%E5%8F%82%E6%95%B0%E5%92%8C%E6%97%A5%E5%BF%97%E7%B3%BB%E7%BB%9F.html"
           data-tag="MySQL"
           data-author="" >
            <span class="post-title" title="MySql 调优(七)">MySql 调优(七)</span>
            <span class="post-date" title="2020-08-16 22:13:12">2020/08/16</span>
        </a>
        
        <a  class="全部文章 MySQL "
           href="/2020-08-14-07MySQL/mysql_6_%E5%88%86%E5%8C%BA.html"
           data-tag="MySQL"
           data-author="" >
            <span class="post-title" title="MySql 调优(六)">MySql 调优(六)</span>
            <span class="post-date" title="2020-08-14 22:13:12">2020/08/14</span>
        </a>
        
        <a  class="全部文章 MySQL "
           href="/2020-08-13-07MySQL/mysql_5_%E6%9F%A5%E8%AF%A2%E4%BC%98%E5%8C%96.html"
           data-tag="MySQL"
           data-author="" >
            <span class="post-title" title="MySql 调优(五)">MySql 调优(五)</span>
            <span class="post-date" title="2020-08-13 22:13:12">2020/08/13</span>
        </a>
        
        <a  class="全部文章 MySQL "
           href="/2020-08-10-07MySQL/mysql_3_%E7%B4%A2%E5%BC%95%E5%8C%B9%E9%85%8D%E5%92%8C%E7%B4%A2%E5%BC%95%E4%BC%98%E5%8C%96%E7%9B%91%E6%8E%A7.html"
           data-tag="MySQL"
           data-author="" >
            <span class="post-title" title="MySql 调优(三)">MySql 调优(三)</span>
            <span class="post-date" title="2020-08-10 22:13:12">2020/08/10</span>
        </a>
        
        <a  class="全部文章 MySQL "
           href="/2020-08-09-07MySQL/mysql_2_%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92%E5%92%8C%E5%85%B3%E9%94%AE%E5%90%8D%E8%AF%8D.html"
           data-tag="MySQL"
           data-author="" >
            <span class="post-title" title="MySql 调优(二)">MySql 调优(二)</span>
            <span class="post-date" title="2020-08-09 22:13:12">2020/08/09</span>
        </a>
        
        <a  class="全部文章 MySQL "
           href="/2020-08-05-07MySQL/mysql_1_%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7%E5%92%8C%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%BC%98%E5%8C%96.html"
           data-tag="MySQL"
           data-author="" >
            <span class="post-title" title="MySql 调优(一)">MySql 调优(一)</span>
            <span class="post-date" title="2020-08-05 22:13:12">2020/08/05</span>
        </a>
        
        <a  class="全部文章 MySQL "
           href="/2020-08-04-07MySQL/mysql_0_%E5%AE%89%E8%A3%85%E4%B8%8E%E5%8D%B8%E8%BD%BD.html"
           data-tag="MySQL"
           data-author="" >
            <span class="post-title" title="MySql 安装">MySql 安装</span>
            <span class="post-date" title="2020-08-04 22:13:12">2020/08/04</span>
        </a>
        
        <a  class="全部文章 JVM "
           href="/2020-07-24-02JVM/jvm%E5%AD%A6%E4%B9%A011_jvm%E5%B8%B8%E8%A7%81%E5%8F%82%E6%95%B0%E6%80%BB%E7%BB%93.html"
           data-tag="JVM"
           data-author="" >
            <span class="post-title" title="JVM 学习（十一）">JVM 学习（十一）</span>
            <span class="post-date" title="2020-07-24 22:13:12">2020/07/24</span>
        </a>
        
        <a  class="全部文章 JVM "
           href="/2020-07-24-02JVM/jvm%E5%AD%A6%E4%B9%A012_%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98.html"
           data-tag="JVM"
           data-author="" >
            <span class="post-title" title="JVM 学习（十二）">JVM 学习（十二）</span>
            <span class="post-date" title="2020-07-24 22:13:12">2020/07/24</span>
        </a>
        
        <a  class="全部文章 JVM "
           href="/2020-07-23-02JVM/jvm%E5%AD%A6%E4%B9%A0%2010_%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E7%AE%97%E6%B3%95.html"
           data-tag="JVM"
           data-author="" >
            <span class="post-title" title="JVM 学习（十）">JVM 学习（十）</span>
            <span class="post-date" title="2020-07-23 22:13:12">2020/07/23</span>
        </a>
        
        <a  class="全部文章 JVM "
           href="/2020-07-20-02JVM/jvm%E5%AD%A6%E4%B9%A07_xx.html"
           data-tag="JVM"
           data-author="" >
            <span class="post-title" title="JVM 学习（七）">JVM 学习（七）</span>
            <span class="post-date" title="2020-07-20 22:13:12">2020/07/20</span>
        </a>
        
        <a  class="全部文章 JVM "
           href="/2020-07-20-02JVM/jvm%E5%AD%A6%E4%B9%A08_%E8%B0%83%E4%BC%982.html"
           data-tag="JVM"
           data-author="" >
            <span class="post-title" title="JVM 学习（八）">JVM 学习（八）</span>
            <span class="post-date" title="2020-07-20 22:13:12">2020/07/20</span>
        </a>
        
        <a  class="全部文章 JVM "
           href="/2020-07-20-02JVM/jvm%E5%AD%A6%E4%B9%A09_%E8%B0%83%E4%BC%983.html"
           data-tag="JVM"
           data-author="" >
            <span class="post-title" title="JVM 学习（九）">JVM 学习（九）</span>
            <span class="post-date" title="2020-07-20 22:13:12">2020/07/20</span>
        </a>
        
        <a  class="全部文章 JVM "
           href="/2020-07-19-02JVM/jvm%E5%AD%A6%E4%B9%A06_GC.html"
           data-tag="JVM"
           data-author="" >
            <span class="post-title" title="JVM 学习（六）">JVM 学习（六）</span>
            <span class="post-date" title="2020-07-19 22:13:12">2020/07/19</span>
        </a>
        
        <a  class="全部文章 JVM "
           href="/2020-07-19-02JVM/jvm%E5%AD%A6%E4%B9%A05_%E8%BF%90%E8%A1%8C%E6%97%B6%E6%95%B0%E6%8D%AE%E5%8C%BA.html"
           data-tag="JVM"
           data-author="" >
            <span class="post-title" title="JVM 学习（五）">JVM 学习（五）</span>
            <span class="post-date" title="2020-07-19 22:13:12">2020/07/19</span>
        </a>
        
        <a  class="全部文章 JVM "
           href="/2020-07-16-02JVM/jvm%E5%AD%A6%E4%B9%A03_4_java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B.html"
           data-tag="JVM"
           data-author="" >
            <span class="post-title" title="JVM 学习（三、四）">JVM 学习（三、四）</span>
            <span class="post-date" title="2020-07-16 22:13:12">2020/07/16</span>
        </a>
        
        <a  class="全部文章 kafka "
           href="/2020-07-08-06%E9%AB%98%E5%B9%B6%E5%8F%91/kafka%E5%AD%A6%E4%B9%A02.html"
           data-tag="kafka"
           data-author="" >
            <span class="post-title" title="Kafka学习(二)">Kafka学习(二)</span>
            <span class="post-date" title="2020-07-08 22:13:12">2020/07/08</span>
        </a>
        
        <a  class="全部文章 kafka "
           href="/2020-07-08-06%E9%AB%98%E5%B9%B6%E5%8F%91/kafka%E5%AD%A6%E4%B9%A01.html"
           data-tag="kafka"
           data-author="" >
            <span class="post-title" title="Kafka学习(一)">Kafka学习(一)</span>
            <span class="post-date" title="2020-07-08 22:13:12">2020/07/08</span>
        </a>
        
        <a  class="全部文章 JVM "
           href="/2020-06-29-02JVM/jvm%E5%AD%A6%E4%B9%A02_class%E5%8A%A0%E8%BD%BD.html"
           data-tag="JVM"
           data-author="" >
            <span class="post-title" title="JVM 学习（二）">JVM 学习（二）</span>
            <span class="post-date" title="2020-06-29 22:13:12">2020/06/29</span>
        </a>
        
        <a  class="全部文章 JVM "
           href="/2020-06-28-02JVM/jvm%E5%AD%A6%E4%B9%A01_jvm%E5%9F%BA%E7%A1%80_jsf.html"
           data-tag="JVM"
           data-author="" >
            <span class="post-title" title="JVM 学习（一）">JVM 学习（一）</span>
            <span class="post-date" title="2020-06-28 22:13:12">2020/06/28</span>
        </a>
        
        <a  class="全部文章 设计模式 "
           href="/2020-06-27-09%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E4%BB%8E%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F%E5%88%B0%20AOP.html"
           data-tag="Proxy"
           data-author="" >
            <span class="post-title" title="设计模式之 - 从代理模式到 Spring AOP">设计模式之 - 从代理模式到 Spring AOP</span>
            <span class="post-date" title="2020-06-27 22:13:12">2020/06/27</span>
        </a>
        
        <a  class="全部文章 IO "
           href="/2020-06-21-05IO/IO%E5%AD%A6%E4%B9%A07.html"
           data-tag="IO"
           data-author="" >
            <span class="post-title" title="IO学习（七）">IO学习（七）</span>
            <span class="post-date" title="2020-06-21 22:13:12">2020/06/21</span>
        </a>
        
        <a  class="全部文章 IO "
           href="/2020-06-21-05IO/IO%E5%AD%A6%E4%B9%A08.html"
           data-tag="IO"
           data-author="" >
            <span class="post-title" title="IO学习（八）">IO学习（八）</span>
            <span class="post-date" title="2020-06-21 22:13:12">2020/06/21</span>
        </a>
        
        <a  class="全部文章 IO "
           href="/2020-06-16-05IO/IO%E5%AD%A6%E4%B9%A05.html"
           data-tag="IO"
           data-author="" >
            <span class="post-title" title="IO学习（五）">IO学习（五）</span>
            <span class="post-date" title="2020-06-16 22:13:12">2020/06/16</span>
        </a>
        
        <a  class="全部文章 IO "
           href="/2020-06-16-05IO/IO%E5%AD%A6%E4%B9%A06.html"
           data-tag="IO"
           data-author="" >
            <span class="post-title" title="IO学习（六）">IO学习（六）</span>
            <span class="post-date" title="2020-06-16 22:13:12">2020/06/16</span>
        </a>
        
        <a  class="全部文章 IO "
           href="/2020-06-14-05IO/IO%E5%AD%A6%E4%B9%A03.html"
           data-tag="IO"
           data-author="" >
            <span class="post-title" title="IO学习（三）">IO学习（三）</span>
            <span class="post-date" title="2020-06-14 22:13:12">2020/06/14</span>
        </a>
        
        <a  class="全部文章 其他 "
           href="/2020-06-12-08%E5%88%86%E5%B8%83%E5%BC%8F/Https%E4%B9%8B%E5%AE%9E%E6%88%98.html"
           data-tag="https"
           data-author="" >
            <span class="post-title" title="Https 实战">Https 实战</span>
            <span class="post-date" title="2020-06-12 22:13:12">2020/06/12</span>
        </a>
        
        <a  class="全部文章 IO "
           href="/2020-06-10-05IO/IO%E5%AD%A6%E4%B9%A02.html"
           data-tag="IO"
           data-author="" >
            <span class="post-title" title="IO学习（二）">IO学习（二）</span>
            <span class="post-date" title="2020-06-10 22:13:12">2020/06/10</span>
        </a>
        
        <a  class="全部文章 IO "
           href="/2020-06-08-05IO/IO%E5%AD%A6%E4%B9%A01.html"
           data-tag="IO"
           data-author="" >
            <span class="post-title" title="IO学习（一）">IO学习（一）</span>
            <span class="post-date" title="2020-06-08 22:13:12">2020/06/08</span>
        </a>
        
        <a  class="全部文章 其他 "
           href="/2020-06-06-08%E5%88%86%E5%B8%83%E5%BC%8F/Https%E4%B9%8BSSLTLS%20%E5%8D%8F%E8%AE%AE.html"
           data-tag="https"
           data-author="" >
            <span class="post-title" title="Https 之 SSL/TLS 协议">Https 之 SSL/TLS 协议</span>
            <span class="post-date" title="2020-06-06 22:13:12">2020/06/06</span>
        </a>
        
        <a  class="全部文章 IO "
           href="/2020-06-06-05IO/IO%E5%AD%A6%E4%B9%A04.html"
           data-tag="IO"
           data-author="" >
            <span class="post-title" title="IO学习（四）">IO学习（四）</span>
            <span class="post-date" title="2020-06-06 22:13:12">2020/06/06</span>
        </a>
        
        <a  class="全部文章 前端 "
           href="/2020-05-25-11%E5%89%8D%E7%AB%AF/Flex%E5%B8%83%E5%B1%80.html"
           data-tag="flex"
           data-author="" >
            <span class="post-title" title="Flex 布局">Flex 布局</span>
            <span class="post-date" title="2020-05-25 22:13:12">2020/05/25</span>
        </a>
        
        <a  class="全部文章 前端 "
           href="/2020-05-25-11%E5%89%8D%E7%AB%AF/vue-todo.html"
           data-tag="vue,webpack"
           data-author="" >
            <span class="post-title" title="vue 入门项目">vue 入门项目</span>
            <span class="post-date" title="2020-05-25 22:13:12">2020/05/25</span>
        </a>
        
        <a  class="全部文章 前端 "
           href="/2020-04-10-11%E5%89%8D%E7%AB%AF/uniapp.html"
           data-tag="uni-app"
           data-author="" >
            <span class="post-title" title="uni-app">uni-app</span>
            <span class="post-date" title="2020-04-10 22:13:13">2020/04/10</span>
        </a>
        
        <a  class="全部文章 前端 "
           href="/2020-04-10-11%E5%89%8D%E7%AB%AF/vue%E5%AD%A6%E4%B9%A0(2).html"
           data-tag="vue"
           data-author="" >
            <span class="post-title" title="vue 学习(二)">vue 学习(二)</span>
            <span class="post-date" title="2020-04-10 22:13:12">2020/04/10</span>
        </a>
        
        <a  class="全部文章 前端 "
           href="/2020-04-10-11%E5%89%8D%E7%AB%AF/vue%E5%AD%A6%E4%B9%A0(1).html"
           data-tag="vue"
           data-author="" >
            <span class="post-title" title="vue 学习(一)">vue 学习(一)</span>
            <span class="post-date" title="2020-04-10 22:13:12">2020/04/10</span>
        </a>
        
        <a  class="全部文章 多线程 "
           href="/2020-04-07-03%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E9%AB%98%E5%B9%B6%E5%8F%91/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E9%AB%98%E5%B9%B6%E5%8F%91%E5%AD%A6%E4%B9%A0(7).html"
           data-tag="多线程"
           data-author="" >
            <span class="post-title" title="多线程高并发学习(七)">多线程高并发学习(七)</span>
            <span class="post-date" title="2020-04-07 22:13:12">2020/04/07</span>
        </a>
        
        <a  class="全部文章 多线程 "
           href="/2020-04-06-03%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E9%AB%98%E5%B9%B6%E5%8F%91/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E9%AB%98%E5%B9%B6%E5%8F%91%E5%AD%A6%E4%B9%A0(6).html"
           data-tag="多线程"
           data-author="" >
            <span class="post-title" title="多线程高并发学习(六)">多线程高并发学习(六)</span>
            <span class="post-date" title="2020-04-06 22:13:12">2020/04/06</span>
        </a>
        
        <a  class="全部文章 多线程 "
           href="/2020-04-05-03%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E9%AB%98%E5%B9%B6%E5%8F%91/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E9%AB%98%E5%B9%B6%E5%8F%91%E5%AD%A6%E4%B9%A0(5).html"
           data-tag="多线程"
           data-author="" >
            <span class="post-title" title="多线程高并发学习(五)">多线程高并发学习(五)</span>
            <span class="post-date" title="2020-04-05 22:13:12">2020/04/05</span>
        </a>
        
        <a  class="全部文章 多线程 "
           href="/2020-04-04-03%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E9%AB%98%E5%B9%B6%E5%8F%91/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E9%AB%98%E5%B9%B6%E5%8F%91%E5%AD%A6%E4%B9%A0(4).html"
           data-tag="多线程"
           data-author="" >
            <span class="post-title" title="多线程高并发学习(四)">多线程高并发学习(四)</span>
            <span class="post-date" title="2020-04-04 22:13:12">2020/04/04</span>
        </a>
        
        <a  class="全部文章 多线程 "
           href="/2020-04-03-03%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E9%AB%98%E5%B9%B6%E5%8F%91/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E9%AB%98%E5%B9%B6%E5%8F%91%E5%AD%A6%E4%B9%A0(3).html"
           data-tag="多线程"
           data-author="" >
            <span class="post-title" title="多线程高并发学习(三)">多线程高并发学习(三)</span>
            <span class="post-date" title="2020-04-03 22:13:12">2020/04/03</span>
        </a>
        
        <a  class="全部文章 多线程 "
           href="/2020-04-02-03%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E9%AB%98%E5%B9%B6%E5%8F%91/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E9%AB%98%E5%B9%B6%E5%8F%91%E5%AD%A6%E4%B9%A0(2).html"
           data-tag="多线程"
           data-author="" >
            <span class="post-title" title="多线程高并发学习(二)">多线程高并发学习(二)</span>
            <span class="post-date" title="2020-04-02 22:13:12">2020/04/02</span>
        </a>
        
        <a  class="全部文章 多线程 "
           href="/2020-04-01-03%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E9%AB%98%E5%B9%B6%E5%8F%91/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E9%AB%98%E5%B9%B6%E5%8F%91%E5%AD%A6%E4%B9%A0(1).html"
           data-tag="多线程"
           data-author="" >
            <span class="post-title" title="多线程高并发学习(一)">多线程高并发学习(一)</span>
            <span class="post-date" title="2020-04-01 22:13:12">2020/04/01</span>
        </a>
        
        <a  class="全部文章 设计模式 "
           href="/2020-03-20-09%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-Observer.html"
           data-tag="Observer"
           data-author="" >
            <span class="post-title" title="设计模式之 - Observer">设计模式之 - Observer</span>
            <span class="post-date" title="2020-03-20 22:13:12">2020/03/20</span>
        </a>
        
        <a  class="全部文章 设计模式 "
           href="/2020-03-20-09%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-ResponsibilityChain.html"
           data-tag="RSC"
           data-author="" >
            <span class="post-title" title="设计模式之 - Responsibility Chain">设计模式之 - Responsibility Chain</span>
            <span class="post-date" title="2020-03-20 22:13:12">2020/03/20</span>
        </a>
        
        <a  class="全部文章 设计模式 "
           href="/2020-03-20-09%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-singleton.html"
           data-tag="Singleton"
           data-author="" >
            <span class="post-title" title="设计模式之 - Singleton">设计模式之 - Singleton</span>
            <span class="post-date" title="2020-03-20 22:13:12">2020/03/20</span>
        </a>
        
        <a  class="全部文章 高并发 "
           href="/2020-03-05-06%E9%AB%98%E5%B9%B6%E5%8F%91/zookeeper%E5%AD%A6%E4%B9%A0(%E4%B8%89).html"
           data-tag="ZooKeeper"
           data-author="" >
            <span class="post-title" title="ZooKeeper学习(三)">ZooKeeper学习(三)</span>
            <span class="post-date" title="2020-03-05 22:13:12">2020/03/05</span>
        </a>
        
        <a  class="全部文章 高并发 "
           href="/2020-03-02-06%E9%AB%98%E5%B9%B6%E5%8F%91/zookeeper%E5%AD%A6%E4%B9%A0(%E4%B8%80).html"
           data-tag="ZooKeeper"
           data-author="" >
            <span class="post-title" title="ZooKeeper学习(一)">ZooKeeper学习(一)</span>
            <span class="post-date" title="2020-03-02 22:13:12">2020/03/02</span>
        </a>
        
        <a  class="全部文章 高并发 "
           href="/2020-03-02-06%E9%AB%98%E5%B9%B6%E5%8F%91/zookeeper%E5%AD%A6%E4%B9%A0(%E4%BA%8C).html"
           data-tag="ZooKeeper"
           data-author="" >
            <span class="post-title" title="ZooKeeper学习(二)">ZooKeeper学习(二)</span>
            <span class="post-date" title="2020-03-02 22:13:12">2020/03/02</span>
        </a>
        
        <a  class="全部文章 分布式 "
           href="/2020-03-02-08%E5%88%86%E5%B8%83%E5%BC%8F/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%AE%9E%E6%88%98C3_%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86.html"
           data-tag="Eureka"
           data-author="" >
            <span class="post-title" title="第三章 服务治理">第三章 服务治理</span>
            <span class="post-date" title="2020-03-02 22:13:12">2020/03/02</span>
        </a>
        
        <a  class="全部文章 高并发 "
           href="/2020-03-01-06%E9%AB%98%E5%B9%B6%E5%8F%91/Redis%20%E5%AD%A6%E4%B9%A0(%E4%BA%94)-%E9%9D%A2%E8%AF%95%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html"
           data-tag="Redis"
           data-author="" >
            <span class="post-title" title="Redis 学习(五)-面试常见问题">Redis 学习(五)-面试常见问题</span>
            <span class="post-date" title="2020-03-01 22:13:12">2020/03/01</span>
        </a>
        
        <a  class="全部文章 其他 "
           href="/2020-02-28-06%E9%AB%98%E5%B9%B6%E5%8F%91/Linux%20%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85%E7%AE%80%E8%A6%81%E6%AD%A5%E9%AA%A4.html"
           data-tag="Linux"
           data-author="" >
            <span class="post-title" title="Linux 系统安装简要步骤">Linux 系统安装简要步骤</span>
            <span class="post-date" title="2020-02-28 22:13:12">2020/02/28</span>
        </a>
        
        <a  class="全部文章 其他 "
           href="/2020-02-28-06%E9%AB%98%E5%B9%B6%E5%8F%91/Typecho+Tengine%E5%BB%BA%E7%AB%99.html"
           data-tag="Nginx,Blog"
           data-author="" >
            <span class="post-title" title="Typecho+Tengine 搭建个人主页">Typecho+Tengine 搭建个人主页</span>
            <span class="post-date" title="2020-02-28 22:13:12">2020/02/28</span>
        </a>
        
        <a  class="全部文章 高并发 "
           href="/2020-02-28-06%E9%AB%98%E5%B9%B6%E5%8F%91/%E9%AB%98%E5%B9%B6%E5%8F%91%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1.html"
           data-tag="LVS,网络"
           data-author="" >
            <span class="post-title" title="高并发负载均衡">高并发负载均衡</span>
            <span class="post-date" title="2020-02-28 22:13:12">2020/02/28</span>
        </a>
        
        <a  class="全部文章 IO "
           href="/2020-02-22-05IO/IO%E5%AD%A6%E4%B9%A09.html"
           data-tag="NIO"
           data-author="" >
            <span class="post-title" title="NIO 原理">NIO 原理</span>
            <span class="post-date" title="2020-02-22 22:13:12">2020/02/22</span>
        </a>
        
        <a  class="全部文章 高并发 "
           href="/2020-02-21-06%E9%AB%98%E5%B9%B6%E5%8F%91/Redis%20%E5%AD%A6%E4%B9%A0(%E5%9B%9B)-%E9%9B%86%E7%BE%A4.html"
           data-tag="Redis"
           data-author="" >
            <span class="post-title" title="Redis 学习(四)-主从复制、高可用、集群">Redis 学习(四)-主从复制、高可用、集群</span>
            <span class="post-date" title="2020-02-21 22:13:12">2020/02/21</span>
        </a>
        
        <a  class="全部文章 高并发 "
           href="/2020-02-20-06%E9%AB%98%E5%B9%B6%E5%8F%91/Redis%20%E5%AD%A6%E4%B9%A0(%E4%B8%89)-%E6%8C%81%E4%B9%85%E5%8C%96.html"
           data-tag="Redis"
           data-author="" >
            <span class="post-title" title="Redis 学习(三)-持久化">Redis 学习(三)-持久化</span>
            <span class="post-date" title="2020-02-20 22:13:12">2020/02/20</span>
        </a>
        
        <a  class="全部文章 高并发 "
           href="/2020-02-19-06%E9%AB%98%E5%B9%B6%E5%8F%91/Redis%20%E5%AD%A6%E4%B9%A0(%E4%BA%8C)-%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD.html"
           data-tag="Redis"
           data-author="" >
            <span class="post-title" title="Redis 学习(二)-管道、发布/订阅、事务、modules、过期">Redis 学习(二)-管道、发布/订阅、事务、modules、过期</span>
            <span class="post-date" title="2020-02-19 22:13:12">2020/02/19</span>
        </a>
        
        <a  class="全部文章 高并发 "
           href="/2020-02-18-06%E9%AB%98%E5%B9%B6%E5%8F%91/Redis%20%E5%AD%A6%E4%B9%A0(%E4%B8%80)-%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4.html"
           data-tag="Redis"
           data-author="" >
            <span class="post-title" title="Redis 学习(一)-概述、安装、类型、指令">Redis 学习(一)-概述、安装、类型、指令</span>
            <span class="post-date" title="2020-02-18 22:13:12">2020/02/18</span>
        </a>
        
        <a  class="全部文章 Java基础 "
           href="/2020-01-18-01%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89/%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89C18.html"
           data-tag="Java讲义"
           data-author="" >
            <span class="post-title" title="第 18 章 类加载机制与反射">第 18 章 类加载机制与反射</span>
            <span class="post-date" title="2020-01-18 22:13:12">2020/01/18</span>
        </a>
        
        <a  class="全部文章 Java基础 "
           href="/2020-01-17-01%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89/%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89C17.html"
           data-tag="Java讲义"
           data-author="" >
            <span class="post-title" title="第 17 章 网络编程">第 17 章 网络编程</span>
            <span class="post-date" title="2020-01-17 23:13:12">2020/01/17</span>
        </a>
        
        <a  class="全部文章 Java基础 "
           href="/2020-01-16-01%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89/%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89C16.html"
           data-tag="Java讲义"
           data-author="" >
            <span class="post-title" title="第 16 章 多线程">第 16 章 多线程</span>
            <span class="post-date" title="2020-01-16 22:13:12">2020/01/16</span>
        </a>
        
        <a  class="全部文章 Java基础 "
           href="/2020-01-15-01%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89/%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89C15.html"
           data-tag="Java讲义"
           data-author="" >
            <span class="post-title" title="第 15 章 输入、输出">第 15 章 输入、输出</span>
            <span class="post-date" title="2020-01-15 22:13:12">2020/01/15</span>
        </a>
        
        <a  class="全部文章 Java基础 "
           href="/2020-01-14-01%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89/%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89C14.html"
           data-tag="Java讲义"
           data-author="" >
            <span class="post-title" title="第 14 章 注解">第 14 章 注解</span>
            <span class="post-date" title="2020-01-14 22:13:12">2020/01/14</span>
        </a>
        
        <a  class="全部文章 Java基础 "
           href="/2020-01-13-01%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89/%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89C13.html"
           data-tag="Java讲义"
           data-author="" >
            <span class="post-title" title="第 13 章 MySQL 数据库与 JDBC 编程">第 13 章 MySQL 数据库与 JDBC 编程</span>
            <span class="post-date" title="2020-01-13 22:13:12">2020/01/13</span>
        </a>
        
        <a  class="全部文章 Java基础 "
           href="/2020-01-10-01%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89/%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89C10.html"
           data-tag="Java讲义"
           data-author="" >
            <span class="post-title" title="第 10 章 异常处理">第 10 章 异常处理</span>
            <span class="post-date" title="2020-01-10 22:13:12">2020/01/10</span>
        </a>
        
        <a  class="全部文章 Java基础 "
           href="/2020-01-09-01%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89/%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89C9.html"
           data-tag="Java讲义"
           data-author="" >
            <span class="post-title" title="第 9 章 泛型">第 9 章 泛型</span>
            <span class="post-date" title="2020-01-09 22:13:12">2020/01/09</span>
        </a>
        
        <a  class="全部文章 Java基础 "
           href="/2020-01-08-01%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89/%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89C8.html"
           data-tag="Java讲义"
           data-author="" >
            <span class="post-title" title="第 8 章 Java 集合">第 8 章 Java 集合</span>
            <span class="post-date" title="2020-01-08 22:13:12">2020/01/08</span>
        </a>
        
        <a  class="全部文章 Java基础 "
           href="/2020-01-07-01%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89/%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89C7.html"
           data-tag="Java讲义"
           data-author="" >
            <span class="post-title" title="第 7 章 Java 基础类库">第 7 章 Java 基础类库</span>
            <span class="post-date" title="2020-01-07 22:13:12">2020/01/07</span>
        </a>
        
        <a  class="全部文章 Java基础 "
           href="/2020-01-06-01%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89/%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89C6.html"
           data-tag="Java讲义"
           data-author="" >
            <span class="post-title" title="第 6 章 面向对象（下）">第 6 章 面向对象（下）</span>
            <span class="post-date" title="2020-01-06 22:13:12">2020/01/06</span>
        </a>
        
        <a  class="全部文章 Java基础 "
           href="/2020-01-05-01%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89/%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89C5.html"
           data-tag="Java讲义"
           data-author="" >
            <span class="post-title" title="第 5 章 面向对象（上）">第 5 章 面向对象（上）</span>
            <span class="post-date" title="2020-01-05 22:13:12">2020/01/05</span>
        </a>
        
        <a  class="全部文章 Java基础 "
           href="/2020-01-04-01%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89/%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89C4.html"
           data-tag="Java讲义"
           data-author="" >
            <span class="post-title" title="第 4 章 流程控制与数组">第 4 章 流程控制与数组</span>
            <span class="post-date" title="2020-01-04 22:13:12">2020/01/04</span>
        </a>
        
        <a  class="全部文章 Java基础 "
           href="/2020-01-03-01%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89/%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89C3.html"
           data-tag="Java讲义"
           data-author="" >
            <span class="post-title" title="第 3 章 数据类型和运算符">第 3 章 数据类型和运算符</span>
            <span class="post-date" title="2020-01-03 22:13:12">2020/01/03</span>
        </a>
        
        <a  class="全部文章 Java基础 "
           href="/2020-01-02-01%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89/%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89C2.html"
           data-tag="Java讲义"
           data-author="" >
            <span class="post-title" title="第 2 章 理解面向对象">第 2 章 理解面向对象</span>
            <span class="post-date" title="2020-01-02 22:13:12">2020/01/02</span>
        </a>
        
        <a  class="全部文章 Java基础 "
           href="/2020-01-01-01%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89/%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89C1.html"
           data-tag="Java讲义"
           data-author="" >
            <span class="post-title" title="第 1 章 Java 语言概述与开发环境">第 1 章 Java 语言概述与开发环境</span>
            <span class="post-date" title="2020-01-01 22:13:12">2020/01/01</span>
        </a>
        
        <a  class="全部文章 Java基础 "
           href="/2020-01-01-01%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89/%E8%A1%A5%E5%85%851-HashMap.html"
           data-tag="Java讲义"
           data-author="" >
            <span class="post-title" title="HashMap 源码">HashMap 源码</span>
            <span class="post-date" title="2020-01-01 22:13:12">2020/01/01</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>
    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="切换全屏 快捷键 s">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-13Spring基础/springmvc" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">第 5-9 章 Web 中的 Spring</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            <i class="iconfont icon-category"></i>
            
            
            <a  data-rel="Spring基础">Spring基础</a>
            
        </span>
        
        
        <span class="tag">
            <i class="iconfont icon-tag"></i>
            
            <a class="color4">sia</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
            发布时间 : <time class="date" title='最后更新: 2021-01-02 12:52:51'>2020-12-25 22:13</time>
        
    </div>
    <div class="article-meta">
        
        <span>字数:8.4k</span>
        
        
        <span id="busuanzi_container_page_pv">
            阅读 :<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
        <span class="top-comment" title="跳转至评论区">
            <a href="#comments">
                评论:<span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </a>
        </span>
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E6%9E%84%E5%BB%BA-Spring-Web-%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F"><span class="toc-text">1、构建 Spring Web 应用程序</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E6%9E%84%E5%BB%BA-Spring-MVC-%E9%A1%B9%E7%9B%AE"><span class="toc-text">1.1 构建 Spring MVC 项目</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="toc-text">创建项目</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96"><span class="toc-text">引入依赖</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#mvc-demo-%E9%85%8D%E7%BD%AE%E5%92%8C%E7%BC%96%E5%86%99"><span class="toc-text">mvc demo 配置和编写</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E5%90%AF%E5%8A%A8%E9%A1%B9%E7%9B%AE"><span class="toc-text">1.2 启动项目</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-tomcat"><span class="toc-text">配置 tomcat</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8-tomcat"><span class="toc-text">启动 tomcat</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3"><span class="toc-text">1.3 乱码问题解决</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81Spring-MVC-%E5%AD%A6%E4%B9%A0"><span class="toc-text">2、Spring MVC 学习</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-Spring-MVC-%E5%9F%BA%E6%9C%AC%E7%BB%84%E6%88%90"><span class="toc-text">2.1 Spring MVC 基本组成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E6%B5%8B%E8%AF%95-Controller-%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-text">2.2 测试 Controller 的方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E8%A7%86%E5%9B%BE%E6%98%AF%E5%90%A6%E6%AD%A3%E7%A1%AE"><span class="toc-text">测试视图是否正确</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95-model"><span class="toc-text">测试 model</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E4%BC%A0%E9%80%92%E6%A8%A1%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%88%B0%E8%A7%86%E5%9B%BE"><span class="toc-text">2.3 传递模型数据到视图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-%E6%8E%A5%E5%8F%97%E8%AF%B7%E6%B1%82%E7%9A%84%E8%BE%93%E5%85%A5"><span class="toc-text">2.4 接受请求的输入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-%E5%A4%84%E7%90%86%E8%A1%A8%E5%8D%95"><span class="toc-text">2.5 处理表单</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E5%86%8C%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0"><span class="toc-text">注册功能实现</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E6%B8%B2%E6%9F%93-Web-%E8%A7%86%E5%9B%BE"><span class="toc-text">3、渲染 Web 视图</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E7%90%86%E8%A7%A3%E8%A7%86%E5%9B%BE%E8%A7%A3%E6%9E%90%E5%99%A8"><span class="toc-text">3.1 理解视图解析器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E5%88%9B%E5%BB%BA-JSP-%E8%A7%86%E5%9B%BE"><span class="toc-text">3.2 创建 JSP 视图</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E9%80%82%E7%94%A8%E4%BA%8E-JSP-%E7%9A%84%E8%A7%86%E5%9B%BE%E8%A7%A3%E6%9E%90%E5%99%A8"><span class="toc-text">配置适用于 JSP 的视图解析器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-Spring-%E7%9A%84-JSP-%E5%BA%93-%E8%A1%A8%E5%8D%95%E5%BA%93"><span class="toc-text">使用 Spring 的 JSP 库-表单库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-Spring-%E7%9A%84-JSP-%E5%BA%93-%E5%B7%A5%E5%85%B7%E5%BA%93"><span class="toc-text">使用 Spring 的 JSP 库-工具库</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E5%88%9B%E5%BB%BA-Apache-Tiles-%E8%A7%86%E5%9B%BE"><span class="toc-text">3.3 创建 Apache Tiles 视图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-%E4%BD%BF%E7%94%A8-Thymeleaf"><span class="toc-text">3.4 使用 Thymeleaf</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-Thymeleaf-%E8%A7%86%E5%9B%BE%E8%A7%A3%E6%9E%90%E5%99%A8"><span class="toc-text">配置 Thymeleaf 视图解析器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%96%E5%86%99%E6%A8%A1%E6%9D%BF"><span class="toc-text">编写模板</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E8%87%AA%E5%AE%9A%E7%9A%84%E7%94%A8%E6%88%B7%E6%9C%8D%E5%8A%A1"><span class="toc-text">配置自定的用户服务</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-%E6%8B%A6%E6%88%AA%E8%AF%B7%E6%B1%82"><span class="toc-text">9.3 拦截请求</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-SPEL-%E8%BF%9B%E8%A1%8C%E5%AE%89%E5%85%A8%E4%BF%9D%E6%8A%A4"><span class="toc-text">使用 SPEL 进行安全保护</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%BA%E5%88%B6%E9%80%9A%E9%81%93%E7%9A%84%E5%AE%89%E5%85%A8%E6%80%A7"><span class="toc-text">强制通道的安全性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%98%B2%E6%AD%A2%E8%B7%A8%E7%AB%99%E8%AF%B7%E6%B1%82%E4%BC%AA%E9%80%A0"><span class="toc-text">防止跨站请求伪造</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-4-%E8%AE%A4%E8%AF%81%E7%94%A8%E6%88%B7"><span class="toc-text">9.4 认证用户</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E7%99%BB%E5%BD%95%E9%A1%B5"><span class="toc-text">添加自定义的登录页</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%AF%E7%94%A8-HTTP-Basic-%E8%AE%A4%E8%AF%81"><span class="toc-text">启用 HTTP Basic 认证</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%AF%E7%94%A8-Remember-me-%E5%8A%9F%E8%83%BD"><span class="toc-text">启用 Remember-me 功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%80%E5%87%BA"><span class="toc-text">退出</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-5-%E4%BF%9D%E6%8A%A4%E8%A7%86%E5%9B%BE"><span class="toc-text">9.5 保护视图</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-Spring-Security-%E7%9A%84-JSP-%E6%A0%87%E7%AD%BE%E5%BA%93"><span class="toc-text">使用 Spring Security 的 JSP 标签库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-Thymeleaf-%E7%9A%84-Spring-Security-%E6%96%B9%E8%A8%80"><span class="toc-text">使用 Thymeleaf 的 Spring Security 方言</span></a></li></ol></li></ol></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-3 i,
    .toc-level-3 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>书中的代码是用 Grandle 构建，怎么跑起来是个问题。记录一下采坑过程。</p>
<a id="more"></a>

<h2 id="1、构建-Spring-Web-应用程序"><a href="#1、构建-Spring-Web-应用程序" class="headerlink" title="1、构建 Spring Web 应用程序"></a>1、构建 Spring Web 应用程序</h2><h3 id="1-1-构建-Spring-MVC-项目"><a href="#1-1-构建-Spring-MVC-项目" class="headerlink" title="1.1 构建 Spring MVC 项目"></a>1.1 构建 Spring MVC 项目</h3><h4 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h4><p><img src="../../images/sia/c5/%E6%96%B0%E5%BB%BAgradle%E9%A1%B9%E7%9B%AE.png"></p>
<h4 id="引入依赖"><a href="#引入依赖" class="headerlink" title="引入依赖"></a>引入依赖</h4><p><strong>build.gradle</strong></p>
<pre><code class="json">apply plugin: &#39;eclipse&#39;
apply plugin: &#39;war&#39;
apply plugin: &#39;eclipse-wtp&#39;

// 依赖
dependencies &#123;
    compile &quot;org.springframework:spring-webmvc:$springVersion&quot;
    compile &quot;org.springframework:spring-jdbc:$springVersion&quot;
    compile &quot;com.h2database:h2:$h2Version&quot;
    compile &quot;org.hibernate:hibernate-validator:$hibernateValidatorVersion&quot;
    compile &quot;org.apache.commons:commons-lang3:$commonsLangVersion&quot;

    compile &quot;javax.servlet:jstl:$jstlVersion&quot;

// jdk 版本高于8时可能需要
//    compile &quot;javax.xml.bind:jaxb-api:2.3.0&quot;
//    compile &quot;com.sun.xml.bind:jaxb-impl:2.3.0&quot;
//    compile &quot;com.sun.xml.bind:jaxb-core:2.3.0&quot;
//    compile &quot;javax.activation:activation:1.1.1&quot;
    providedCompile &quot;javax.servlet:javax.servlet-api:$servletApiVersion&quot;
    providedCompile &quot;javax.servlet.jsp:jsp-api:$jspApiVersion&quot;
    providedCompile &quot;javax.el:javax.el-api:$jspElVersion&quot;

    testCompile &quot;junit:junit-dep:$junitVersion&quot;
    testCompile &quot;org.springframework:spring-test:$springVersion&quot;
    testCompile &quot;org.mockito:mockito-core:$mockitoVersion&quot;
    testCompile &quot;org.hamcrest:hamcrest-library:$hamcrestVersion&quot;
&#125;

// 仓库地址
repositories &#123;
    maven &#123; url &#39;http://maven.aliyun.com/nexus/content/groups/public/&#39; &#125;
&#125;

war &#123;
    baseName = &#39;spittr&#39;
&#125;</code></pre>
<p><strong>gradle.properties</strong></p>
<pre><code class="properties">activeMQVersion=5.7.0
aspectJVersion=1.7.2
commonsLangVersion = 3.1
ehcacheVersion=2.7.4
ehcacheJCacheVersion=1.4.0-beta1
h2Version=1.4.182
hamcrestVersion = 1.3
hibernateVersion=4.1.6.Final
hibernateEntityManagerVersion=4.0.1.Final
hibernateValidatorVersion = 5.0.1.Final
jspApiVersion = 2.1
jspElVersion = 2.2.4
jstlVersion = 1.2
junitVersion=4.11
log4jVersion=1.2.14
mockitoVersion=1.9.5
servletApiVersion = 3.1.0
slf4jVersion = 1.7.5
springAMQPVersion=1.0.0.RELEASE
springDataJpaVersion=1.3.2.RELEASE
springSecurityVersion = 3.2.0.RELEASE
springVersion=4.0.7.RELEASE
springWebflowVersion=2.4.1.RELEASE
systemRulesVersion=1.5.0
thymeleafVersion = 2.1.3.RELEASE
tilesVersion = 3.0.1</code></pre>
<h4 id="mvc-demo-配置和编写"><a href="#mvc-demo-配置和编写" class="headerlink" title="mvc demo 配置和编写"></a>mvc demo 配置和编写</h4><pre><code class="java">/**
 * 配置 mvc 的 DispatcherServlet
 */
public class SpittrWebAppInitializer extends AbstractAnnotationConfigDispatcherServletInitializer &#123;

    /**
     * 指定配置类
     * @return
     */
    @Override
    protected Class&lt;?&gt;[] getRootConfigClasses() &#123;
        return new Class[]&#123; RootConfig.class &#125;;
    &#125;

    /**
     * 指定配置类
     * @return
     */
    @Override
    protected Class&lt;?&gt;[] getServletConfigClasses() &#123;
        return new Class[]&#123; WebConfig.class &#125;;
    &#125;

    /**
     * 指定 DispatcherServlet 处理哪些请求
     * @return
     */
    @Override
    protected String[] getServletMappings() &#123;
        return new String[]&#123; &quot;/&quot; &#125;;
    &#125;
&#125;</code></pre>
<pre><code class="java">/**
 * 配置包扫描。springboot 一般配置在启动类上
 */
@Configuration
@ComponentScan(basePackages=&#123;&quot;spittr&quot;&#125;,
        excludeFilters=&#123;
                @ComponentScan.Filter(type= FilterType.ANNOTATION, value= EnableWebMvc.class)
        &#125;)
public class RootConfig &#123;&#125;</code></pre>
<pre><code class="java">/**
 * 定义 DispatcherServlet 应用上下文中的 bean
 * 包含控制器、视图解析器以及处理器映射等
 */
@Configuration
// 启动 mvc
@EnableWebMvc
// RootConfig 不是已经配置了吗？这里不需要了吧
@ComponentScan(&quot;spittr.web&quot;)
public class WebConfig extends WebMvcConfigurerAdapter &#123;

    /**
     * 配置 JSP 视图解析器
     * Spring默认会使用BeanNameViewResolver，这个视图解析器会查找ID与视图名称匹配的bean，
     * 并且查找的bean要实现View接口，它以这样的方式来解析视图。
     */
    @Bean
    public ViewResolver viewResolver() &#123;
        InternalResourceViewResolver resolver = new InternalResourceViewResolver();
        resolver.setPrefix(&quot;/WEB-INF/templates/&quot;);
        resolver.setSuffix(&quot;.jsp&quot;);
        resolver.setExposeContextBeansAsAttributes(true);
        return resolver;
    &#125;

    /**
     * 配置静态资源的处理
     * 要求DispatcherServlet将对静态资源的请求转发到Servlet容器中默认的Servlet上，
     * 而不是使用DispatcherServlet本身来处理此类请求。
     * @param configurer
     */
    @Override
    public void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer) &#123;
        super.configureDefaultServletHandling(configurer);
    &#125;
&#125;</code></pre>
<pre><code class="java">@Controller
public class HomeController &#123;
    @RequestMapping(value = &quot;/&quot;, method = RequestMethod.GET)
    public String hone() &#123;
        return &quot;home&quot;;
    &#125;
&#125;</code></pre>
<pre><code class="jsp">&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://www.springframework.org/tags&quot;%&gt;
&lt;%@ page session=&quot;false&quot; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Spittr&lt;/title&gt;
    &lt;link rel=&quot;stylesheet&quot;
          href=&quot;&lt;c:url value=&quot;/resources/css/style.css&quot;/&gt;&quot; type=&quot;text/css&quot;/&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Welcome to Spittr&lt;/h1&gt;
&lt;a href=&quot;&lt;c:url value=&quot;/spittles&quot; /&gt;&quot;&gt;Spittles&lt;/a&gt;
&lt;a href=&quot;&lt;c:url value=&quot;/spitter/register&quot; /&gt;&quot;&gt;Register&lt;/a&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<h3 id="1-2-启动项目"><a href="#1-2-启动项目" class="headerlink" title="1.2 启动项目"></a>1.2 启动项目</h3><h4 id="配置-tomcat"><a href="#配置-tomcat" class="headerlink" title="配置 tomcat"></a>配置 tomcat</h4><p><img src="../../images/sia/c5/tomcat%E9%85%8D%E7%BD%AE1.png"></p>
<p><img src="../../images/sia/c5/tomcat%E9%85%8D%E7%BD%AE2.png"></p>
<p>这里有个根路径配置，选完之后自动变了，记得手动修改下</p>
<p><img src="../../images/sia/c5/tomcat%E9%85%8D%E7%BD%AE3.png"></p>
<h4 id="启动-tomcat"><a href="#启动-tomcat" class="headerlink" title="启动 tomcat"></a>启动 tomcat</h4><p>如果使用的是高版本 jdk（大于8），可能 404 都看不到，直接报错</p>
<p><img src="../../images/sia/c5/%E9%AB%98%E7%89%88%E6%9C%ACjdk%E9%97%AE%E9%A2%98.png"></p>
<p>这个报错的解决方法：</p>
<ul>
<li><p>降低 jdk 版本到8</p>
</li>
<li><p>增加几个依赖</p>
<pre><code class="json">// jdk 版本高于8时可能需要
compile &quot;javax.xml.bind:jaxb-api:2.3.0&quot;
compile &quot;com.sun.xml.bind:jaxb-impl:2.3.0&quot;
compile &quot;com.sun.xml.bind:jaxb-core:2.3.0&quot;
compile &quot;javax.activation:activation:1.1.1&quot;</code></pre>
</li>
</ul>
<p>再启动，可能会 404，只在 jdk8 上出现这情况。</p>
<p><img src="../../images/sia/c5/%E7%AC%AC%E4%B8%80%E6%AC%A1%E5%90%AF%E5%8A%A8%E7%BB%93%E6%9E%9C.png"></p>
<p>如出现上面 404 问题，修改如下配置，全部改为 <strong>IntelliJ IDEA</strong>，注意 jdk 大于 8 时无需修改，我用 jdk12，修改了反而报错：</p>
<p><img src="../../images/sia/c5/404%E9%97%AE%E9%A2%98%E4%BF%AE%E5%A4%8D.png"></p>
<h3 id="1-3-乱码问题解决"><a href="#1-3-乱码问题解决" class="headerlink" title="1.3 乱码问题解决"></a>1.3 乱码问题解决</h3><p>tomcat 控制台可能乱码、idea 控制台也可能乱码</p>
<p>idea 相关 vmoptions 全局加 <code>-Dfile.encoding=UTF-8</code>。</p>
<p>tomcat 启动 vmoptions 也加 <code>-Dfile-encoding=UTF-8</code>。</p>
<p>tomcat 日志配置文件<code>D:\16_tomcat\apache-tomcat-9.0.41\conf\logging.properties</code> 所有 GBK 替换为 UTF-8。</p>
<h2 id="2、Spring-MVC-学习"><a href="#2、Spring-MVC-学习" class="headerlink" title="2、Spring MVC 学习"></a>2、Spring MVC 学习</h2><h3 id="2-1-Spring-MVC-基本组成"><a href="#2-1-Spring-MVC-基本组成" class="headerlink" title="2.1 Spring MVC 基本组成"></a>2.1 Spring MVC 基本组成</h3><p><img src="../../images/sia/c5/mvc%E7%BB%84%E6%88%90.png"></p>
<h3 id="2-2-测试-Controller-的方法"><a href="#2-2-测试-Controller-的方法" class="headerlink" title="2.2 测试 Controller 的方法"></a>2.2 测试 Controller 的方法</h3><h4 id="测试视图是否正确"><a href="#测试视图是否正确" class="headerlink" title="测试视图是否正确"></a>测试视图是否正确</h4><pre><code class="java">package spittr.web;

import org.junit.Test;
import org.springframework.test.web.servlet.MockMvc;

import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.view;
import static org.springframework.test.web.servlet.setup.MockMvcBuilders.standaloneSetup;

public class HomeControllerTest &#123;

    /**
     * 测试控制器的方法
     * @throws Exception
     */
    @Test
    public void testHomePage() throws Exception &#123;
        HomeController controller = new HomeController();
        // 搭建 MockMvc
        MockMvc mockMvc = standaloneSetup(controller).build();
        // 对“/”执行 GET 请求，预期得到 home 视图
        mockMvc.perform(get(&quot;/&quot;)).andExpect(view().name(&quot;home&quot;));
    &#125;
&#125;</code></pre>
<h4 id="测试-model"><a href="#测试-model" class="headerlink" title="测试 model"></a>测试 model</h4><pre><code class="java">@Test
public void testSpitte() throws Exception &#123;
    Spittle exceptedSpittle = new Spittle(&quot;Hello&quot;, new Date());
    SpittleRepository mockRepository = mock(SpittleRepository.class);
    when(mockRepository.findOne(1))
        .thenReturn(exceptedSpittle);

    SpittleController controller = new SpittleController(mockRepository);
    MockMvc mockMvc = standaloneSetup(controller)
        .setSingleView(new InternalResourceView(&quot;/WEB-INF/views/spittle.jsp&quot;))
        .build();

    mockMvc.perform(get(&quot;/spittles/1&quot;))
        .andExpect(view().name(&quot;spittle&quot;))
        .andExpect(model().attributeExists(&quot;spittle&quot;))
        .andExpect(model().attribute(&quot;spittle&quot;, exceptedSpittle));
&#125;</code></pre>
<h3 id="2-3-传递模型数据到视图"><a href="#2-3-传递模型数据到视图" class="headerlink" title="2.3 传递模型数据到视图"></a>2.3 传递模型数据到视图</h3><p>把数据塞进 Model 就行，Model 就是一个 map。</p>
<pre><code class="java">@RequestMapping(method = RequestMethod.GET)
public String spittles(Model model) &#123;
    // 将 spittle 添加到模型中
    model.addAttribute(&quot;spittleList&quot;,
                       spittleRepository.findSpittles(Long.MAX_VALUE, 20));
    // 返回视图
    return &quot;spittles&quot;;
&#125;</code></pre>
<h3 id="2-4-接受请求的输入"><a href="#2-4-接受请求的输入" class="headerlink" title="2.4 接受请求的输入"></a>2.4 接受请求的输入</h3><p><strong>直接从请求参数中拿</strong></p>
<pre><code class="java">@RequestMapping(value = &quot;/pageList&quot;, method = RequestMethod.GET)
public String spittles(@RequestParam(value = &quot;max&quot;, defaultValue = MAX_LONG_AS_STRING) long max,
                       @RequestParam(value = &quot;count&quot;, defaultValue = &quot;20&quot;) int count, Model model) &#123;
    model.addAttribute(spittleRepository.findSpittles(max, count));
    return &quot;spittles&quot;;
&#125;</code></pre>
<p><strong>直接从请求路径中拿</strong></p>
<pre><code class="java">@RequestMapping(value = &quot;/&#123;spittleId&#125;&quot;, method = RequestMethod.GET)
public String spittle(@PathVariable(&quot;spittleId&quot;) long spittleId, Model model) &#123;
    model.addAttribute(spittleRepository.findOne(spittleId));
    return &quot;spittle&quot;;
&#125;</code></pre>
<h3 id="2-5-处理表单"><a href="#2-5-处理表单" class="headerlink" title="2.5 处理表单"></a>2.5 处理表单</h3><h4 id="注册功能实现"><a href="#注册功能实现" class="headerlink" title="注册功能实现"></a>注册功能实现</h4><p>获取表单参数，校验表单参数，校验通过后重定向到个人主页。</p>
<p><strong>控制器</strong></p>
<pre><code class="java">/**
* 执行注册
* @param spitter
* @return
*/
@RequestMapping(value = &quot;/register&quot;, method = RequestMethod.POST)
public String processRegister(@Valid Spitter spitter, Errors errors) &#123;
    if (errors.hasErrors()) &#123;
        return &quot;registerForm&quot;;
    &#125;
    // 保存 spitter
    spitterRepository.save(spitter);
    // 重定向到基本信息页，防止用户重复提交
    return &quot;redirect:/spitter/&quot; + spitter.getUsername();
&#125;

/**
* 个人主页
* @param username
* @param model
* @return
*/
@RequestMapping(value = &quot;/&#123;username&#125;&quot;, method = RequestMethod.GET)
public String showSpitterProfile(@PathVariable String username, Model model) &#123;
    Spitter spitter = spitterRepository.findByUsername(username);
    model.addAttribute(spitter);
    return &quot;profile&quot;;
&#125;</code></pre>
<p><strong>页面</strong></p>
<pre><code class="jsp">&lt;body&gt;
    &lt;h1&gt;Register&lt;/h1&gt;
    &lt;form method=&quot;POST&quot;&gt;
        First Name: &lt;input type=&quot;text&quot; name=&quot;firstName&quot;/&gt;&lt;br/&gt;
        Last Name: &lt;input type=&quot;text&quot; name=&quot;lastName&quot;/&gt;&lt;br/&gt;
        Username: &lt;input type=&quot;text&quot; name=&quot;username&quot;/&gt;&lt;br/&gt;
        Password: &lt;input type=&quot;password&quot; name=&quot;password&quot;&gt;&lt;br/&gt;
        &lt;input type=&quot;submit&quot; value=&quot;Register&quot;&gt;
    &lt;/form&gt;
&lt;/body&gt;</code></pre>
<pre><code class="jsp">&lt;body&gt;
    &lt;h1&gt;Your Profile&lt;/h1&gt;
    &lt;c:out value=&quot;$&#123;spitter.username&#125;&quot;/&gt;&lt;br/&gt;
    &lt;c:out value=&quot;$&#123;spitter.firstName&#125;&quot;/&gt;,
    &lt;c:out value=&quot;$&#123;spitter.lastName&#125;&quot;/&gt;
&lt;/body&gt;</code></pre>
<p><strong>pojo</strong></p>
<pre><code class="java">public class Spitter &#123;
    private Long id;

    @NotNull
    @Size(min=2, max = 30)
    private String firstName;

    @NotNull
    @Size(min=2, max = 30)
    private String lastName;

    @NotNull
    @Size(min=5, max = 16)
    private String username;

    @NotNull
    @Size(min=5, max = 25)
    private String password;
&#125;</code></pre>
<h2 id="3、渲染-Web-视图"><a href="#3、渲染-Web-视图" class="headerlink" title="3、渲染 Web 视图"></a>3、渲染 Web 视图</h2><ul>
<li>将模型数据渲染为 HTML</li>
<li>使用 JSP 视图</li>
<li>通过 tiles 定义视图布局</li>
<li>使用 Thymeleaf 视图</li>
</ul>
<h3 id="3-1-理解视图解析器"><a href="#3-1-理解视图解析器" class="headerlink" title="3.1 理解视图解析器"></a>3.1 理解视图解析器</h3><p>根据 Controller 返回的逻辑视图名，找到真正的物理视图。</p>
<pre><code class="java">public interface ViewResolver &#123;
    View resolveViewName(String viewName, Locale locale) throws Exception;
&#125;</code></pre>
<pre><code class="java">public interface View &#123;
    /**
     * Render the view given the specified model.
     * &lt;p&gt;The first step will be preparing the request: In the JSP case,
     * this would mean setting model objects as request attributes.
     * The second step will be the actual rendering of the view,
     * for example including the JSP via a RequestDispatcher.
     * @param model Map with name Strings as keys and corresponding model
     * objects as values (Map can also be &#123;@code null&#125; in case of empty model)
     * @param request current HTTP request
     * @param response HTTP response we are building
     * @throws Exception if rendering failed
     */
    void render(Map&lt;String, ?&gt; model, HttpServletRequest request, HttpServletResponse response) throws Exception;
&#125;</code></pre>
<p>View 的 render 方法把处理结果写入 response，返回浏览器。</p>
<p>一般来说，我们无需自己实现 ViewResolver，Spring 内置了 13 个视图解析器。常用的有<strong>InternalResourceViewResolver</strong> 用于解析 JSP；</p>
<p><img src="../../images/sia/c5/spring%E5%86%85%E7%BD%AE%E8%A7%86%E5%9B%BE%E8%A7%A3%E6%9E%90%E5%99%A8.png"></p>
<h3 id="3-2-创建-JSP-视图"><a href="#3-2-创建-JSP-视图" class="headerlink" title="3.2 创建 JSP 视图"></a>3.2 创建 JSP 视图</h3><h4 id="配置适用于-JSP-的视图解析器"><a href="#配置适用于-JSP-的视图解析器" class="headerlink" title="配置适用于 JSP 的视图解析器"></a>配置适用于 JSP 的视图解析器</h4><p><strong>InternalResourceViewResolver</strong></p>
<h4 id="使用-Spring-的-JSP-库-表单库"><a href="#使用-Spring-的-JSP-库-表单库" class="headerlink" title="使用 Spring 的 JSP 库-表单库"></a>使用 Spring 的 JSP 库-表单库</h4><p>标签库能够避免在脚本块中直接编写 Java 代码。Spring 提供了两个 JSP 标签库，用来帮助定义 Spring MVC Web 的视图。其中一个标签库会用来<strong>渲染HTML表单</strong>标签，这些标签可以绑定 model 中的某个属性。另外一个标签库包含了一些工具类标签，我们随时都可以非常便利地使用它们。</p>
<p><strong>引入标签库</strong></p>
<pre><code class="jsp">&lt;%-- 引入Spring表单标签库 --%&gt;
&lt;%@ taglib prefix=&quot;sf&quot; uri=&quot;http://www.springframework.org/tags/form&quot; %&gt;</code></pre>
<p><strong>标签一览表</strong></p>
<p>一个有意思的标签是<code>&lt;sf:errors&gt;</code>，可以渲染表单表校验的错误信息。</p>
<p><img src="../../images/sia/c5/spring%E6%A0%87%E7%AD%BE%E5%BA%93.png"></p>
<p><strong>使用标签</strong></p>
<p>修改注册页面，进行友好提示。</p>
<p>直接在表单后面提示。</p>
<pre><code class="jsp">    &lt;%--  使用spring标签库进行校验提示。每个元素后边提示  --%&gt;
    &lt;sf:form method=&quot;POST&quot; commandName=&quot;spitter&quot;&gt;
        First Name: &lt;sf:input path=&quot;firstName&quot;/&gt;
            &lt;%--展现表单校验错误--%&gt;
            &lt;sf:errors path=&quot;firstName&quot; cssClass=&quot;error&quot;/&gt;&lt;br/&gt;
        Last Name: &lt;sf:input path=&quot;lastName&quot;/&gt;
            &lt;sf:errors path=&quot;lastName&quot; cssClass=&quot;error&quot;/&gt;&lt;br/&gt;
        Email: &lt;sf:input path=&quot;email&quot; type=&quot;email&quot;/&gt;
            &lt;sf:errors path=&quot;email&quot; cssClass=&quot;error&quot;/&gt;&lt;br/&gt;
        Username: &lt;sf:input path=&quot;username&quot;/&gt;
            &lt;sf:errors path=&quot;username&quot; cssClass=&quot;error&quot;/&gt;&lt;br/&gt;
        Password: &lt;sf:password path=&quot;password&quot;/&gt;
            &lt;sf:errors path=&quot;password&quot; cssClass=&quot;error&quot;/&gt;&lt;br/&gt;
        &lt;input type=&quot;submit&quot; value=&quot;Register&quot;&gt;
    &lt;/sf:form&gt;</code></pre>
<p><img src="../../images/sia/c5/%E4%BD%BF%E7%94%A8spring%E6%A0%87%E7%AD%BE%E8%A1%A8%E5%8D%95%E6%A0%A1%E9%AA%8C%E6%8F%90%E7%A4%BA.png"></p>
<p>统一提示，方便排版。</p>
<pre><code class="jsp">    &lt;sf:form method=&quot;POST&quot; commandName=&quot;spitter&quot;&gt;
        &lt;sf:errors path=&quot;*&quot; element=&quot;div&quot; cssClass=&quot;error&quot;/&gt;
        &lt;sf:label path=&quot;firstName&quot; cssErrorClass=&quot;error&quot;&gt;First Name&lt;/sf:label&gt; :
        &lt;sf:input path=&quot;firstName&quot; cssErrorClass=&quot;error&quot;/&gt;&lt;br/&gt;

        &lt;sf:label path=&quot;lastName&quot; cssErrorClass=&quot;error&quot;&gt;Last Name&lt;/sf:label&gt; :
        &lt;sf:input path=&quot;lastName&quot; cssErrorClass=&quot;error&quot;/&gt;&lt;br/&gt;

        &lt;sf:label path=&quot;email&quot; cssErrorClass=&quot;error&quot;&gt;Email&lt;/sf:label&gt; :
        &lt;sf:input path=&quot;email&quot; cssErrorClass=&quot;error&quot;/&gt;&lt;br/&gt;

        &lt;sf:label path=&quot;username&quot; cssErrorClass=&quot;error&quot;&gt;Username&lt;/sf:label&gt; :
        &lt;sf:input path=&quot;username&quot; cssErrorClass=&quot;error&quot;/&gt;&lt;br/&gt;

        &lt;sf:label path=&quot;password&quot; cssErrorClass=&quot;error&quot;&gt;Password&lt;/sf:label&gt; :
        &lt;sf:input path=&quot;password&quot; cssErrorClass=&quot;error&quot;/&gt;&lt;br/&gt;
        &lt;input type=&quot;submit&quot; value=&quot;Register&quot;&gt;
    &lt;/sf:form&gt;</code></pre>
<p><img src="../../images/sia/c5/%E6%A0%A1%E9%AA%8C%E9%94%99%E8%AF%AF%E7%BB%9F%E4%B8%80%E6%8F%90%E7%A4%BA.png"></p>
<h4 id="使用-Spring-的-JSP-库-工具库"><a href="#使用-Spring-的-JSP-库-工具库" class="headerlink" title="使用 Spring 的 JSP 库-工具库"></a>使用 Spring 的 JSP 库-工具库</h4><p><strong>引入标签库</strong></p>
<pre><code class="jsp">&lt;%--引入Spring工具标签库--%&gt;
&lt;%@ taglib prefix=&quot;s&quot; uri=&quot;http://www.springframework.org/tags&quot; %&gt;</code></pre>
<p><strong>标签一览表</strong></p>
<p><img src="../../images/sia/c5/spring%E5%B7%A5%E5%85%B7%E6%A0%87%E7%AD%BE%E4%B8%80%E8%A7%88%E8%A1%A8.png"></p>
<p><strong>使用标签</strong></p>
<p>使用<code>&lt;s:message&gt;</code>实现国际化</p>
<p>配置资源加载器</p>
<pre><code class="java">@Bean
public MessageSource messageSource() &#123;
    ResourceBundleMessageSource messageSource = new ResourceBundleMessageSource();
    messageSource.setBasename(&quot;messages&quot;);
    return messageSource;
&#125;</code></pre>
<p>创建资源文件<code>messages.properties</code></p>
<pre><code class="properties">spittr.welcome=Welcome to Spittr!</code></pre>
<p>页面使用</p>
<pre><code class="jsp">&lt;h1&gt;&lt;s:message code=&quot;spittr.welcome&quot;/&gt;&lt;/h1&gt;</code></pre>
<h3 id="3-3-创建-Apache-Tiles-视图"><a href="#3-3-创建-Apache-Tiles-视图" class="headerlink" title="3.3 创建 Apache Tiles 视图"></a>3.3 创建 Apache Tiles 视图</h3><p>Apache Tiles 布局引擎。</p>
<p>配置 视图解析器</p>
<pre><code class="java">    /**
     * 配置 TilesConfigurer
     * @return
     */
    @Bean
    public TilesConfigurer tilesConfigurer() &#123;
        TilesConfigurer tiles = new TilesConfigurer();
        // 指定 tile 定义的位置
        tiles.setDefinitions(new String[] &#123;
                &quot;/WEB-INF/**/tiles.xml&quot;
        &#125;);
        // 启用刷新功能
        tiles.setCheckRefresh(true);
        return tiles;
    &#125;

    /**
     * 配置 tile 的视图解析器
     * 查找与逻辑视图名称相匹配的 Tile 定义
     * @return
     */
    @Bean
    public ViewResolver viewResolver() &#123;
        return new TilesViewResolver();
    &#125;</code></pre>
<p>然后配置 tails.xml，然后定义模板在页面中使用即可。这里不再演示了。</p>
<h3 id="3-4-使用-Thymeleaf"><a href="#3-4-使用-Thymeleaf" class="headerlink" title="3.4 使用 Thymeleaf"></a>3.4 使用 Thymeleaf</h3><p>JSP 模板的问题</p>
<ol>
<li>JSP 模板采用 HTML 形式，但是参杂了各种 JSP 标签库的标签，很混乱</li>
<li>看起来像是 html，但是并不是，未经渲染直接打开是一场视觉灾难</li>
<li>JSP 规范与 Servlet 规范紧密耦合，只能用在基于 Servlet 的 Web 应用之中，不能作为通用模板，比如格式化 Email</li>
</ol>
<h4 id="配置-Thymeleaf-视图解析器"><a href="#配置-Thymeleaf-视图解析器" class="headerlink" title="配置 Thymeleaf 视图解析器"></a>配置 Thymeleaf 视图解析器</h4><ul>
<li>ThymeleafViewResolver：将逻辑视图名称解析为 Thymeleaf 模板视图</li>
<li>SpringTemplateEngine：处理模板并渲染结果</li>
<li>TemplateResolver：加载 Thymeleaf 模板</li>
</ul>
<pre><code class="java">    @Bean
    public ViewResolver viewResolver(SpringTemplateEngine templateEngine) &#123;
        ThymeleafViewResolver viewResolver = new ThymeleafViewResolver();
        viewResolver.setTemplateEngine(templateEngine);
        return viewResolver;
    &#125;

    @Bean
    public SpringTemplateEngine templateEngine(TemplateResolver templateResolver) &#123;
        SpringTemplateEngine templateEngine = new SpringTemplateEngine();
        templateEngine.setTemplateResolver(templateResolver);
        return templateEngine;
    &#125;

    @Bean
    public TemplateResolver templateResolver() &#123;
        TemplateResolver templateResolver = new ServletContextTemplateResolver();
        templateResolver.setPrefix(&quot;/WEB-INF/templates/&quot;);
        templateResolver.setSuffix(&quot;.html&quot;);
        templateResolver.setTemplateMode(&quot;HTML5&quot;);
        return templateResolver;
    &#125;</code></pre>
<h4 id="编写模板"><a href="#编写模板" class="headerlink" title="编写模板"></a>编写模板</h4><pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;
      xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;
&lt;head&gt;
    &lt;title&gt;Spittr&lt;/title&gt;
    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot;
          th:href=&quot;@&#123;/resources/style.css&#125;&quot;/&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;form method=&quot;post&quot; th:object=&quot;$&#123;spitter&#125;&quot;&gt;
        &lt;!--展示错误--&gt;
        &lt;div class=&quot;errors&quot; th:if=&quot;$&#123;#fields.hasErrors('*')&#125;">
            <ul>
                <li th:each="err : $&#123;#fields.errors('*')&#125;" th:text="$&#123;err&#125;">Input is incorrect</li>
            </ul>
        </div>
        <!--FirstName-->
        <label th:class="$&#123;#fields.hasErrors('firstName')&#125; ? 'error'">First Name</label>
        <input type="text" th:field="*&#123;firstName&#125;" th:class="$&#123;#fields.hasErrors('firstName')&#125; ? 'error'" /><br/>
        <!--LastName-->
        <label th:class="$&#123;#fields.hasErrors('lastName')&#125; ? 'error'">Last Name</label>
        <input type="text" th:field="*&#123;lastName&#125;" th:class="$&#123;#fields.hasErrors('lastName')&#125; ? 'error'" /><br/>
        <!--Email-->
        <label th:class="$&#123;#fields.hasErrors('email')&#125; ? 'error'">Email</label>
        <input type="text" th:field="*&#123;email&#125;" th:class="$&#123;#fields.hasErrors('email')&#125; ? 'error'" /><br/>
        <!--Username-->
        <label th:class="$&#123;#fields.hasErrors('username')&#125; ? 'error'">Username</label>
        <input type="text" th:field="*&#123;username&#125;" th:class="$&#123;#fields.hasErrors('username')&#125; ? 'error'" /><br/>
        <!--Password-->
        <label th:class="$&#123;#fields.hasErrors('password')&#125; ? 'error'">Password</label>
        <input type="text" th:field="*&#123;password&#125;" th:class="$&#123;#fields.hasErrors('password')&#125; ? 'error'" /><br/>

        <input type="submit" value="Register" />

    </form>
</body>
<style>
    span.error &#123;
        color: red;
    &#125;
    label.error &#123;
        color: red;
    &#125;
    input.error &#123;
        background-color: #ffcccc;
    &#125;
    div.error &#123;
        background-color: #ffcccc;
        border: 2px solid red;
    &#125;
</style>
</html>
```

## 4、Spring MVC 配置的替代方案

### 4.1 自定义 DispatcherServlet 配置

AbstractAnnotationConfigDispatcherServletInitializer 将 DispatcherServlet 注册到 Servlet 容器后，就会调用 customizeRegistration，并将注册后得到的 ServletRegistration.Dynamic 传递进来，所以我们可以通过重载这个方法来对 DispatcherServlet 进行额外配置。

```java
/**
 * 配置 mvc 的 DispatcherServlet
 */
public class SpittrWebAppInitializer extends AbstractAnnotationConfigDispatcherServletInitializer &#123;

    @Override
    protected Class<?>[] getRootConfigClasses() &#123;
        return new Class[]&#123; RootConfig.class &#125;;
    &#125;

    @Override
    protected Class<?>[] getServletConfigClasses() &#123;
        return new Class[]&#123; WebConfig.class &#125;;
    &#125;

    @Override
    protected String[] getServletMappings() &#123;
        return new String[]&#123; "/" &#125;;
    &#125;

    /**
     * 配置 multipart 支持
     * @param registration
     */
    @Override
    protected void customizeRegistration(ServletRegistration.Dynamic registration) &#123;
        // 设置优先级
        // registration.setLoadOnStartup();
        // 设置 DispatcherServlet 初始化参数
        // registration.setInitParameter();
        registration.setMultipartConfig(
                new MultipartConfigElement("/tmp/spittr/uploads"));
    &#125;
&#125;
```

### 4.2 添加 Servlet 和 Filter

继承 WebApplicationInitializer，在 onStartup 中增加相应的内容即可。**Servlet 注册之后，怎么验证？**

```java
public class MyServletInitializer implements WebApplicationInitializer &#123;
    @Override
    public void onStartup(ServletContext servletContext) throws ServletException &#123;
        // 注册一个自定义的 servlet
        ServletRegistration.Dynamic myServlet = servletContext.addServlet("myServlet", MyServlet.class);
        // 映射到指定路径
        myServlet.addMapping("/custom/**");
    &#125;
&#125;
```

```java
public class MyFilterInitializer implements WebApplicationInitializer &#123;
    @Override
    public void onStartup(ServletContext servletContext) throws ServletException &#123;
        FilterRegistration.Dynamic myFilter = servletContext.addFilter("myFilter", MyFilter.class);
        myFilter.addMappingForUrlPatterns(null, false, "/custom/*");
    &#125;
&#125;
```

```java
    /**
     * 如果自定义 Filter 只映射到 DispatcherServlet 上的话，在这里返回即可。
     * @return
     */
    @Override
    protected Filter[] getServletFilters() &#123;
        return new Filter[]&#123;new MyFilter()&#125;;
    &#125;
```

## 5、处理文件上传

### 5.1 配置 multipart 解析器

```java
    /**
     * 配置 multipart 解析器
     * @return
     * @throws IOException
     */
    @Bean
    public MultipartResolver multipartResolver() throws IOException &#123;
        return new StandardServletMultipartResolver();
    &#125;
```

**配置上传细节参数**

```java
    @Override
    protected void customizeRegistration(ServletRegistration.Dynamic registration) &#123;
        registration.setMultipartConfig(
                /**
                 * 文件路径
                 * 文件最大容量
                 * 文件请求最大容量
                 * 不缓存，直接落盘
                 */
                new MultipartConfigElement("D:/00_tmpdownload/tmp/", 2097152, 4194304, 0));
    &#125;
```

### 5.2 处理 multipart 请求

**修改 from 表单**

- enctype="multipart/form-data"
- type="file" accept="image/jpeg,image/png,image/gif"

```html
    <!--enctype="multipart/form-data" 告诉浏览器以 multipart 数据形式提交表单-->
    <form method="post" th:object="$&#123;spitter&#125;" enctype="multipart/form-data">
        <!--展示错误-->
        <div class="errors" th:if="$&#123;#fields.hasErrors('*')&#125;">
            <ul>
                <li th:each="err : $&#123;#fields.errors('*')&#125;" th:text="$&#123;err&#125;">Input is incorrect</li>
            </ul>
        </div>
        <!--FirstName-->
        <label th:class="$&#123;#fields.hasErrors('firstName')&#125; ? 'error'">First Name</label>
        <input type="text" th:field="*&#123;firstName&#125;" th:class="$&#123;#fields.hasErrors('firstName')&#125; ? 'error'" /><br/>
        <!--LastName-->
        <label th:class="$&#123;#fields.hasErrors('lastName')&#125; ? 'error'">Last Name</label>
        <input type="text" th:field="*&#123;lastName&#125;" th:class="$&#123;#fields.hasErrors('lastName')&#125; ? 'error'" /><br/>
        <!--Email-->
        <label th:class="$&#123;#fields.hasErrors('email')&#125; ? 'error'">Email</label>
        <input type="text" th:field="*&#123;email&#125;" th:class="$&#123;#fields.hasErrors('email')&#125; ? 'error'" /><br/>
        <!--Username-->
        <label th:class="$&#123;#fields.hasErrors('username')&#125; ? 'error'">Username</label>
        <input type="text" th:field="*&#123;username&#125;" th:class="$&#123;#fields.hasErrors('username')&#125; ? 'error'" /><br/>
        <!--Password-->
        <label th:class="$&#123;#fields.hasErrors('password')&#125; ? 'error'">Password</label>
        <input type="text" th:field="*&#123;password&#125;" th:class="$&#123;#fields.hasErrors('password')&#125; ? 'error'" /><br/>
        <!--ProfilePicture-->
        <label>Profile Picture</label>
        <input type="file" name="profilePicture" accept="image/jpeg,image/png,image/gif"/><br/>

        <input type="submit" value="Register" />
    </form>
```

**使用 MutipartFile 接口接收图片数据**

```java
    /**
     * 执行注册
     * @RequestPart 接收图片
     * @param spitter
     * @return
     */
    @RequestMapping(value = "/register", method = RequestMethod.POST)
    public String processRegister(@RequestPart("profilePicture") MultipartFile profilePicture,
                                  @Valid Spitter spitter, Errors errors) throws IOException &#123;
        if (errors.hasErrors()) &#123;
            return "registerForm";
        &#125;

        // 把图片保存到指定位置
        profilePicture.transferTo(new File("D:/00_tmpdownload/spittr/" + profilePicture.getOriginalFilename()));

        // 保存 spitter
        spitterRepository.save(spitter);
        // 重定向到基本信息页，防止用户重复提交
        return "redirect:/spitter/" + spitter.getUsername();
    &#125;
```

**MultipartFile 接口详情**

```java
public interface MultipartFile &#123;

	String getName();

	String getOriginalFilename();

	String getContentType();

	boolean isEmpty();

	long getSize();

	byte[] getBytes() throws IOException;

	InputStream getInputStream() throws IOException;

	void transferTo(File dest) throws IOException, IllegalStateException;

&#125;
```

**也可使用 javax.servlet.http.Part 接口接收**

该接口和 MultipartFile 接口类似。但是使用这个接口就不用配置 MultipartResolver 了。你丫不早说。。。

**图片上传云端**



## 6、在控制器中处理异常

Spring 提供了多种方式将异常转换为响应：

- 特定的 Spring 异常将会自动映射为指定的 HTTP 状态码
- 异常上可以添加 @ResponseStatus 注解，从而将其映射为某一个 HTTP 状态码
- 在方法上可以添加 @ExceptionHandler 注解，使其用来处理异常

### 6.1 将异常映射为 HTTP 状态码

**Spring 自动映射**

![](../../images/sia/c5/Spring默认异常映射.png)

**使用 @ResponseStatus 手动映射**

```java
/**
 * 使用 @ResponseStatus 将异常映射为指定 http 响应码
 */
@ResponseStatus(value = HttpStatus.NOT_FOUND, reason = "Spitter Not Found")
public class SpitterNotFoundException extends RuntimeException&#123;
&#125;
```

### 6.2 编写异常处理的方法

**错误的处理方式**

```java
    @RequestMapping(value = "/register", method = RequestMethod.POST)
    public String processRegister(@RequestPart("profilePicture") MultipartFile profilePicture,
                                  @Valid Spitter spitter, Errors errors) throws IOException &#123;
        if (errors.hasErrors()) &#123;
            return "registerForm";
        &#125;

        // 把图片保存到指定位置
        profilePicture.transferTo(new File("D:/00_tmpdownload/spittr/" + profilePicture.getOriginalFilename()));

        try &#123;
            // 保存 spitter
            spitterRepository.save(spitter);
            // 重定向到基本信息页，防止用户重复提交
            return "redirect:/spitter/" + spitter.getUsername();
        &#125; catch (DuplicateSpitterException e) &#123;
            return "error/duplicate";
        &#125;
    &#125;
```

这么处理异常导致**同一个方法有两条路线，不易测试**。异常代码也业务代码混杂。

**正确的处理方式**

所以我们可以用**ExceptionHandler**注解抽取统一的处理方法

```java
    /**
     * 这个 Controller 中所有的 DuplicateSpitterException 异常都会来这里
     * @return
     */
    @ExceptionHandler(DuplicateSpitterException.class)
    public String handleDuplicateSpitter() &#123;
        return "error/duplicate";
    &#125;
```

这样子写在某个 Controller 中好像也不太好，这样只能处理这一个 Controller 中的这个异常，但是系统中其他地方也很可能出现这种异常，有没有办法统一处理呢？答案是 **@ControllerAdvice**

### 6.3 为控制器添加通知

任意带有 **@ControllerAdvice** 注解的类，这个类会包含一个或多个如下类型的方法：

- @ExceptionHandler 注解标注的方法；
- @InitBinder 注解标注的方法；
- @ModelAttribute 注解标注的方法。

这些方法作用于整个应用程序所有控制器中带有**@RequestMapping注解**的方法上。

例子：定义统一异常处理类

```java
@ControllerAdvice
public class AppWideExceptionHandler &#123;
    @ExceptionHandler(DuplicateSpitterException.class)
    public String handleDuplicateSpitter() &#123;
        return "error/duplicate";
    &#125;
&#125;
```

## 7、跨重定向请求传递数据

### 7.1 通过 URL 模板进行重定向

```java
// 重定向到基本信息页，防止用户重复提交。而不是返回某个视图
// 直接拼接字符串没有转义不安全，
// return "redirect:/spitter/" + spitter.getUsername();

// 向模型中塞数据，然后在请求中用占位符匹配。没有匹配到的模型数据自动添加查询参数
// 结果：spitter/alvin?spitterId=42
model.addAttribute("username", spitter.getUsername());
model.addAttribute("spitterId", spitter.getId());
return "redirect:/spitter/&#123;username&#125;";
```

通过 URL 只能传递简单数值，如 String 和数字。如果要传递对象类型，需要使用 **flash 属性 RedirectAttributes**

### 7.2 使用 flash 属性

flash 属性会一直携带这些数据直到下一次请求，然后才会消失。

原理就是重定向前把 Flash 属性复制到会话中，重定向后把 Flash 属性从会话中取出放到新请求的 model 中。

![](../../images/sia/c5/flash属性原理.png)

```java
// 向模型中塞数据，然后在请求中用占位符匹配。没有匹配到的模型数据自动添加查询参数
// 结果：spitter/alvin?spitterId=42
model.addAttribute("username", spitter.getUsername());
model.addAttribute("spitterId", spitter.getId());
// 非基础类型，使用 flash 属性。注意此时 model 类型为 RedirectAttributes 
model.addFlashAttribute("spitter", spitter);
return "redirect:/spitter/&#123;username&#125;";
```

```java
@RequestMapping(value = "/&#123;username&#125;", method = RequestMethod.GET)
public String showSpitterProfile(@PathVariable String username, Model model) &#123;
    // 上游已经传了 spitter 就不用查询了
    if (!model.containsAttribute("spitter")) &#123;
        Spitter spitter = spitterRepository.findByUsername(username);
        model.addAttribute(spitter);
        if (spitter == null) &#123;
            throw new SpitterNotFoundException();
        &#125;
    &#125;
    return "profile";
&#125;
```

## 8、使用 Spring Web Flow

- 创建回话式的 Web 应用程序
- 定义流程状态和行为
- 保护 Web 流程

Spring Web Flow 是一个 Web 框架，它适用于元素按规定流程运行的程序。

**流程与实现分开**。Spring Web Flow 是 Spring MVC 的扩展，它支持开发基于流程的应用程序。它将**流程的定义与**
**实现流程行为的类和视图分离开来**。

### 8.1 在 Spring 中配置 Web Flow

#### 装配流程执行器

#### 配置流程注册表

定义哪些文件定义的是流程，已经流程的 ID 是多少。

#### 处理流程请求

将普通请求映射到对应的流程上。需要注入流程注册表。

#### 响应流程请求

真正的处理（响应）流程。需要注入流程执行器。

一切尽在这个 flow.xml 文件中配置：

```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns:flow="http://www.springframework.org/schema/webflow-config"
 xmlns:p="http://www.springframework.org/schema/p"
 xmlns:context="http://www.springframework.org/schema/context"
 xsi:schemaLocation="http://www.springframework.org/schema/webflow-config 
   http://www.springframework.org/schema/webflow-config/spring-webflow-config-2.3.xsd
   http://www.springframework.org/schema/beans 
   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
   http://www.springframework.org/schema/context 
   http://www.springframework.org/schema/context/spring-context-3.0.xsd">

  <context:component-scan base-package="com.sia.pizza.flow" />

  <!-- 配置流程执行器 -->
  <flow:flow-executor id="flowExecutor" />

  <!-- 配置流程注册表。-->
  <!-- 从/WEB-INF/flows目录找流程定义；
        任何以 -flow.xml 结尾的都认为是流程定义；
        所有流程通过ID引用。**所代表的路径就是流程ID-->
  <flow:flow-registry id="flowRegistry" base-path="/WEB-INF/flows">
     <flow:flow-location-pattern value="/**/*-flow.xml" />
     <!--显示声明流程定义文件的位置。此时流程ID从文件名获取，就是springpizza；
         或者也可以显示定义ID，如 id="pizza"-->
      <!--<flow:flow-location path="/WEB-INF/flows/springpizza.xml" />-->
  </flow:flow-registry>

  <!--FlowHandlerMapping 处理流程请求。将流程请求发送给Spring Web Flow-->
  <bean class="org.springframework.webflow.mvc.servlet.FlowHandlerMapping">
    <!-- 装配了注册表，所以知道如何将请求的 URL 匹配到流程上 -->
    <property name="flowRegistry" ref="flowRegistry" />
  </bean>

  <!--
   FlowHandlerAdapter 响应流程请求。
   是 DispatcherServlet 和 Spring Web Flow 之间的桥梁。
  -->
  <bean class="org.springframework.webflow.mvc.servlet.FlowHandlerAdapter">
    <property name="flowExecutor" ref="flowExecutor" />
  </bean>

</beans>
```

### 8.2 流程组件

- 状态：业务执行逻辑
- 转移：通过转移从一个状态到另外一个
- 流程数据：流程的当前状况

#### 状态

Spring Web Flow 定义了五种不同类型的状态。

![](../../images/sia/c5/流程的5种状态.png)

**视图状态**

`<view-state id="welcome" />` 定义了一个 id 和逻辑视图名都为 weblcome 的视图状态。

`<view-state id="welcome" view="greeting" />`另外指定视图名。

`<view-state id="takePayment" model="flowScope.paymentDetails" />` 当然也可绑定模型数据。

**行为状态**

视图状态会涉及到流程应用程序的用户，而行为状态则是应用程序自身在执行任务。行为状态一般会触发 Spring 所管理 bean 的一些方法并根据方法调用的执行结果转移到另一个状态。

定义行为状态：

```xml
<action-state id="saveOrder">
	<evaluate expression="pizzaFlowActions.saveOrder(order)" />
    <transition to="thankYou" />
</action-state>
```

**决策状态**

用来处理流程的分支情况。决策状态能够在流程执行时产生两个分支。

定义决策状态：

```xml
<decision-state id="checkDeliveryArea">
	<if test="pizzaFlowActions.checkDeliveryArea(customer.zipCode)"
        then="addCustomer"
        else="deliveryWarning" />
</decision-state>
```

**子流程状态**

一个流程中调用另外一个流程。

定义子流程状态：

```xml
<subflow-state id="order" subflow="pizza/order">
    <!--传递订单对象作为子流程的输入-->
	<input name="order" value="order" />
    <!--如果子流程的结束状态ID为 orderCreated，那么流程将会转移到名为 payment 的状态-->
    <transition on="orderCreated" to="payment" />
</subflow-state>
```

**结束状态**

定义流程结束状态：

`<end-state id="customerReady" />`

- 如果是子流程，执行父流程
- 如果设置了 view，渲染视图
- 如果都不是，仅仅结束

#### 转移

处理结束状态之外，其他每个状态至少都需要有一个转移。一个状态可能有多个转移，表示不同路径。

- on：触发点
- to：转移到
- on-exception：异常时

**全局转移**

```xml
<global-transitions>
	<transition on="cancel" to="endState" />
</global-transitions>
```

#### 流程数据

**声明变量**

流程数据保存在变量中，而变量可以在流程的各个地方进行引用。它能够以多种方式创建。
在流程中创建变量的最简单形式是使用`<var>`元素。

`<var name="customer" class="com.sia.pizza.domain.Customer"/>`

这里，创建了一个新的Customer实例并将其放在名为customer的变量中。这个变量可以
在流程的任意状态进行访问。

- var：流程作用域
- evaluate：作用域通过 name 或 result 属性的前缀指定
- set：同上

**变量的流程作用域、视图作用域**

流程中携带的数据会拥有不同的生命作用域和可见性，这取决于保存数据的变量本身的作用
域。Spring Web Flow定义了五种不同作用域。

![](../../images/sia/c5/流程数据作用域.png)

### 8.3 组合起来：披萨流程

#### 定义基本流程

![](../../images/sia/c5/披萨订单流程.png)

```xml
<?xml version="1.0" encoding="UTF-8"?>
<flow xmlns="http://www.springframework.org/schema/webflow"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/webflow 
  http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd">

    <!-- order 变量声明，每次流程开始就新建一个 Order 实例 -->
    <var name="order" class="com.sia.pizza.domain.Order"/>
    
    <!-- 顾客子流程状态 -->
    <subflow-state id="customer" subflow="pizza/customer">
      <!-- 订单作为子流程的输入 -->
      <input name="order" value="order"/>
      <transition on="customerReady" to="order" />
    </subflow-state>
    
    <!-- 订单子流程状态 -->
    <subflow-state id="order" subflow="pizza/order">
      <input name="order" value="order"/>
      <transition on="orderCreated" to="payment" />
    </subflow-state>
        
    <!-- 支付子流程状态 -->
    <subflow-state id="payment" subflow="pizza/payment">
      <input name="order" value="order"/>
      <transition on="paymentTaken" to="saveOrder"/>      
    </subflow-state>

    <!-- 保存订单行为状态 -->
    <action-state id="saveOrder">
        <!-- 执行保存订单行为 -->
        <evaluate expression="pizzaFlowActions.saveOrder(order)" />
        <transition to="thankYou" />
    </action-state>

    <!-- 视图状态 -->
    <view-state id="thankYou">
      <transition to="endState" />
    </view-state>
                
    <!-- 结束状态 -->
    <end-state id="endState" />

    <!-- 全局转移 -->
    <global-transitions>
      <transition on="cancel" to="endState" />
    </global-transitions>
</flow>
```

#### 收集顾客信息

![](../../images/sia/c5/识别顾客子流程.png)

```xml
<?xml version="1.0" encoding="UTF-8"?>
<flow xmlns="http://www.springframework.org/schema/webflow"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/webflow 
  http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd">

    <input name="order" required="true"/>
    
    <!-- 视图状态-欢迎顾客 -->
    <view-state id="welcome">
        <transition on="phoneEntered" to="lookupCustomer"/>
        <transition on="cancel" to="cancel"/>
    </view-state>

    <!-- 行为状态-查找顾客 -->
    <action-state id="lookupCustomer">
        <!-- 查找顾客，查询结果设置到订单的顾客属性上 -->
        <evaluate result="order.customer" expression=
            "pizzaFlowActions.lookupCustomer(requestParameters.phoneNumber)" />
        <!-- 未找到顾客，跳转到注册页面 -->
        <transition to="registrationForm" on-exception=
            "com.sia.pizza.service.CustomerNotFoundException" />
        <!-- 找到顾客，直接进入结束流程 -->
        <transition to="customerReady" />
    </action-state>

    <!-- 视图状态-注册新顾客 -->
    <view-state id="registrationForm" model="customer" popup="true" >
        <on-entry>
          <evaluate expression="order.customer.phoneNumber = requestParameters.phoneNumber" />
        </on-entry>
        <!-- 提交注册 -->
        <transition on="submit" to="checkDeliveryArea" />
        <transition on="cancel" to="cancel" />
    </view-state>

    <!-- 决策状态-检查配送区域 -->
    <decision-state id="checkDeliveryArea">
      <if test="pizzaFlowActions.checkDeliveryArea(order.customer.zipCode)" 
          then="addCustomer" 
          else="deliveryWarning"/>
    </decision-state>

    <!-- 视图状态-配送范围超出警告 -->
    <view-state id="deliveryWarning">
        <transition on="accept" to="addCustomer" />
        <transition on="cancel" to="cancel" />
    </view-state>

    <!-- 行为状态-新增顾客 -->
    <action-state id="addCustomer">
        <evaluate expression="pizzaFlowActions.addCustomer(order.customer)" />
        <transition to="customerReady" />
    </action-state>
            
    <!-- 结束状态-取消 -->
    <end-state id="cancel" />

    <!-- 结束状态-顾客就绪 -->
    <end-state id="customerReady" />
</flow>
```

#### 构建订单

```xml
<?xml version="1.0" encoding="UTF-8"?>
<flow xmlns="http://www.springframework.org/schema/webflow"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/webflow 
  http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd">

    <input name="order" required="true" />
    
    <!-- 视图状态-订单视图 -->
    <view-state id="showOrder">
        <!-- 添加披萨 -->
        <transition on="createPizza" to="createPizza" />
        <!-- 提交订单 -->
        <transition on="checkout" to="orderCreated" />
        <!-- 取消 -->
        <transition on="cancel" to="cancel" />
    </view-state>

    <!-- 视图状态-添加披萨 -->
    <view-state id="createPizza" model="flowScope.pizza">
        <on-entry>
          <!-- 创建披萨实例，当前流程可见 -->  
          <set name="flowScope.pizza" 
              value="new com.sia.pizza.domain.Pizza()" />
          <!-- 获取配料列表，当前视图状态可见 -->
          <evaluate result="viewScope.toppingsList" 
              expression="T(com.sia.pizza.domain.Topping).asList()" />
        </on-entry>
        <transition on="addPizza" to="showOrder">
          <evaluate expression="order.addPizza(flowScope.pizza)" />
        </transition>
        <transition on="cancel" to="showOrder" />
    </view-state>

    <!-- 结束状态 -->
    <end-state id="cancel" />
    <end-state id="orderCreated" />
</flow>
```

#### 支付

```xml
<?xml version="1.0" encoding="UTF-8"?>
<flow xmlns="http://www.springframework.org/schema/webflow"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/webflow 
  http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd">

    <input name="order" required="true"/>

    <!-- 视图状态-输入支付信息 -->
    <view-state id="takePayment" model="flowScope.paymentDetails">
        <on-entry>
          <set name="flowScope.paymentDetails"
              value="new com.sia.pizza.domain.PaymentDetails()" />

          <evaluate result="viewScope.paymentTypeList"
              expression="T(com.sia.pizza.domain.PaymentType).asList()" />
        </on-entry>
        <transition on="paymentSubmitted" to="verifyPayment" />
        <transition on="cancel" to="cancel" />
    </view-state>

    <!-- 行为状态-验证支付信息 -->
    <action-state id="verifyPayment">
        <evaluate result="order.payment" expression=
            "pizzaFlowActions.verifyPayment(flowScope.paymentDetails)" />
        <transition to="paymentTaken" />
    </action-state>
            
    <!-- End state -->
    <end-state id="cancel" />
    <end-state id="paymentTaken" />
</flow>
```

### 8.4 保护 Web 流程

结合 Spring Security 保护 Spring Web Flow 中的状态、转移甚至整个流程。

```xml
<view-state id="restricted">
	<secured attributes="ROLE_ADMIN" match="all"/>
</view-state>
```

match:

- all：必须全部满足
- any：满足一个即可

## 9、保护 Web 应用

- Spring Security 介绍
- 使用 Servlet 规范中的 Filter 保护 Web 应用
- 基于数据库和 LDAP 进行认证

### 9.1 Spring Security 简介

Spring Security 是为基于 Spring 的应用程序提供声明式安全保护的安全性框架。Spring Security 提供了完整的安全性解决方案，它能够在 **Web 请求级别和方法调用级别**处理身份认证和授权。因为基于 Spring 框架，所以 Spring Security 充分利用了依赖注入（dependency injection，DI）和面向切面的技术。

最新版本为 3.2，Spring Security 从两个角度来解决安全性问题。它使用 **Servlet 规范中的 Filter 保护 Web 请求并限制URL级别的访问**。Spring Security 还能够**使用 Spring AOP 保护方法调用**——借助于**对象代理和使用通知**，能够确保只有具备适当权限的用户才能访问安全保护的方法。

> **可以实现 Web 请求级别和方法级别的身份认证和授权**
>
> **请求级别基于 Filter 实现；方法级别使用 AOP 实现**

#### Spring Security 的 11 个模块

![](../../images/sia/c5/springsecurity模块.png)

至少需要 Core 和 Configuration 两个模块。

#### 过滤 Web 请求

**在 xml 中配置**

Spring Security 借助一系列 Servlet Filter 来提供各种安全性功能。但是我们不用在 web.xml 中配置多个 Filter，只需要配置 **DelegatingFilterProxy** 就行，他会把工作委托给各个自定义 Filter。

**DelegatingFilterProxy**  的 filter-name 配置为 springSecurityFilterChain，所以 **DelegatingFilterProxy** 会将过滤逻辑委托给 springSecurityFilterChain。

```xml
<filter>
	<filter-name>springSecurityFilterChain</filter-name>
    <filter-class>
    	org.springframework.web.filter.DelegatingFilterProxy
    </filter-class>
</filter>
```

**在 Java 中配置**

只需创建一个新类，继承`AbstractSecurityWebApplicationInitializer`即可，他会自动注册`DelegatingFilterProxy`。

```java
public class SecurityWebInitializer
        extends AbstractSecurityWebApplicationInitializer &#123;
&#125;
```

#### 编写简单的安全配置

Spring Security 必须配置在一个实现了 WebSecurityConfigurer 的 bean 中，或者扩展 WebSecurityConfigurerAdapter。

**@EnableWebSecurity** 可以启用任意 Web 应用的安全性功能。如果碰巧使用 Spring MVC 开发，应该使用 **@EnableWebMvcSecurity** 代替。

@EnableWebMvcS ecurity 额外配置了一个 Spring MVC 参数解析器，这样处理器方法就能够通过带有 **@AuthenticationPrincipal** 注解的参数获得认证用户的 principal（或 username）。

另外还配置了一个 bean，在使用 Spring 表单绑定标签库来定义表单时，这个 bean 会自动添加一个隐藏的跨站请求伪造（cross-site request forgery，CSRF）token 输入域。

```java
@Configuration
// 启用 Web 安全性
// @EnableWebSecurity
// 启用 Spring MVC 安全性
@EnableWebMvcSecurity
public class SecurityConfig extends WebSecurityConfigurerAdapter &#123;
&#125;
```

可以通过重载 WebSecurityConfigurerAdapter 中的三个 **configure()** 方法来配置 Web 安全性。

| 方法                                    | 描述                                        |
| --------------------------------------- | ------------------------------------------- |
| configure(WebSecurity)                  | 通过重载，配置 Spring Security 的 Filter 链 |
| configure(HttpSecurity)                 | 通过重载，配置如何通过拦截器保护请求        |
| configure(AuthenticationManagerBuilder) | 通过重载，配置 user-detail 服务             |

**默认配置**

```java
http
    .authorizeRequests()
    // 所有请求需要认证
    .anyRequest().authenticated()
    .and()
    // 配置支持基于表单的登录
    .formLogin()
    .and()
    // 配置支持基于 HTTP Basic 方式的认证
    .httpBasic();
```

由于我们没有重载 configure(AuthenticationManagerBuilder) 方法，所以没有用户存储支撑认证过程，所以没用用户，但是默认所有请求都需要认证，所以没有人能够登录成功。

所以我们还需要如下配置：

- 配置用户存储
- 指定哪些请求需要认证，哪些不需要，以及所需要的的权限
- 提供一个自定义的登录页面，替代原来简单的默认登录页

### 9.2 选择查询用户详细信息的服务

#### 基于内存的用户存储

```java
    @Override
    protected void configure(AuthenticationManagerBuilder auth) throws Exception &#123;
        auth
                // 启用内存用户存储
                .inMemoryAuthentication()
                .withUser("user").password("pass9876").roles("USER").and()
                .withUser("admin").password("pass9876").roles("USER","ADMIN");
    &#125;
```

**用户详细信息配置一览表**

![](../../images/sia/c5/用户配置.png)

#### 基于数据库表进行认证

```java
        auth
                // 启用数据库用户存储
                .jdbcAuthentication()
                .dataSource(dataSource)
                // 自定义用户查询，因为实际中数据表很可能和默认的不一样
                .usersByUsernameQuery("select username, password, true from Spitter where username = ?")
                .authoritiesByUsernameQuery("select username, 'ROLE_USER', from Spitter where username = ?")
                // 密码转码
                .passwordEncoder(new StandardPasswordEncoder("123456"));
```

#### 基于 LDAP 进行认证

```java
        auth
                .ldapAuthentication()
                .userSearchBase("ou=people")
                .userSearchFilter("&#123;uid=&#123;0&#125;&#125;&quot;)
                .groupSearchBase(&quot;ou=groups&quot;)
                .groupSearchFilter(&quot;member=&#123;0&#125;&quot;)
                .passwordCompare()
                .passwordEncoder(new Md5PasswordEncoder())
                .passwordAttribute(&quot;passcode&quot;)
                .and()
                .contextSource()
                // 配置 LDAP 服务器
                // .url(&quot;ldap://monkey-kong.com:389/db=alvin,dc=com&quot;)
                // 使用嵌入式服务器
                .root(&quot;dc=alvin,dc=com&quot;)
                // 指定LDAP服务器从类路径根目录下的users.ldif文件中加载内容
                .ldif(&quot;classpath:users.ldif&quot;)
        ;</code></pre>
<h4 id="配置自定的用户服务"><a href="#配置自定的用户服务" class="headerlink" title="配置自定的用户服务"></a>配置自定的用户服务</h4><p>提供一个自定义的 <strong>UserDetailsService</strong> 接口实现</p>
<pre><code class="java">/**
 * 自定义 spring security 用户服务
 */
public class SpitterUserService implements UserDetailsService &#123;

    private final SpitterRepository spitterRepository;
    public SpitterUserService(SpitterRepository spitterRepository) &#123;
        this.spitterRepository = spitterRepository;
    &#125;

    @Override
    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException &#123;
        Spitter spitter = spitterRepository.findByUsername(username);
        if (spitter != null) &#123;
            List&lt;GrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();
            authorities.add(new SimpleGrantedAuthority(&quot;ROLE_SPITTER&quot;));

            return new User(spitter.getUsername(), spitter.getPassword(), authorities);
        &#125;
        throw  new UsernameNotFoundException(&quot;User &#39;&quot; + username + &quot;&#39; not found.&quot; );
    &#125;
&#125;</code></pre>
<p>配置</p>
<pre><code class="java">// 使用自定义用户服务
auth.userDetailsService(new SpitterUserService(spitterRepository));</code></pre>
<h3 id="9-3-拦截请求"><a href="#9-3-拦截请求" class="headerlink" title="9.3 拦截请求"></a>9.3 拦截请求</h3><pre><code class="java">    @Override
    protected void configure(HttpSecurity http) throws Exception &#123;
        http.authorizeRequests()
                .antMatchers(&quot;/spitters/me&quot;).authenticated()
                .antMatchers(HttpMethod.POST, &quot;/spittles&quot;).authenticated()
                // 其他所有请求不需要认证和权限
                .anyRequest().permitAll()
                ;
    &#125;</code></pre>
<p><strong>配置一览表</strong></p>
<p><img src="../../images/sia/c5/%E8%B7%AF%E5%BE%84%E6%9D%83%E9%99%90%E9%85%8D%E7%BD%AE.png"></p>
<p>增加角色配置</p>
<pre><code class="java">        http.authorizeRequests()
                .antMatchers(&quot;/spitters/me&quot;)
                .hasRole(&quot;SPITTER&quot;)
                .antMatchers(HttpMethod.POST, &quot;/spittles&quot;)
                .hasAnyAuthority(&quot;ROLE_SPITTER&quot;)
                // 其他所有请求不需要认证和权限
                .anyRequest().permitAll()
                ;</code></pre>
<h4 id="使用-SPEL-进行安全保护"><a href="#使用-SPEL-进行安全保护" class="headerlink" title="使用 SPEL 进行安全保护"></a>使用 SPEL 进行安全保护</h4><p>用于定制更加特殊的请求限制。比如通过 IP 地址限制，比如限制某个角色只能在星期二进行访问。</p>
<p><img src="../../images/sia/c5/spel%E9%85%8D%E7%BD%AE%E8%B7%AF%E5%BE%84%E6%A0%A1%E9%AA%8C.png"></p>
<pre><code class="java">.antMatchers(&quot;/spitters/me&quot;)
.access(&quot;hasRole(&#39;ROLE_SPITTER&#39;) and hasIpAddress(&#39;192.168.1.2&#39;)&quot;)</code></pre>
<h4 id="强制通道的安全性"><a href="#强制通道的安全性" class="headerlink" title="强制通道的安全性"></a>强制通道的安全性</h4><pre><code class="java">.and()
    // 指定哪些请求需要走安全通道（https），哪些不需要
    .requiresChannel()
    .antMatchers(&quot;/spitter/form&quot;).requiresSecure()
    .antMatchers(&quot;/&quot;).requiresInsecure()</code></pre>
<h4 id="防止跨站请求伪造"><a href="#防止跨站请求伪造" class="headerlink" title="防止跨站请求伪造"></a>防止跨站请求伪造</h4><p>如果一个站点欺骗用户提交请求到其他服务器的话，就会发生 CSRF 攻击，这可能会带来消极的后果。尽管提交“I’m stupid!”这样的信息到微博站点算不上什么 CSRF 攻击的最糟糕场景，但是你可以很容易想到更为严重的攻击情景，它可能会对你的银行账号执行难以预期的操作。</p>
<p>Spring Security通过一个同步 token 的方式来实现 CSRF 防护的功能。它将会拦截状态变化的请求（例如，非GET、HEAD、OPTIONS 和 TRACE 的请求）并检查 CSRF token。如果请求中不包含 CSRF token 的话，或者token 不能与服务器端的 token 相匹配，请求将会失败，并抛出 CsrfException 异常。</p>
<p><strong>Thymeleaf</strong></p>
<p>如果使用 Thymeleaf 作为页面模板，只要 form 标签的 action 添加 Thymeleaf 命名空间前缀，那么就会自动生成一个 “_csrf” 隐藏域。</p>
<pre><code class="html">&lt;form method=&quot;POST&quot; th:action=&quot;@&#123;/spittles&#125;&quot;&gt;
    ...
&lt;/form&gt;</code></pre>
<p><strong>JSP</strong></p>
<p>手动增加一个隐藏域。</p>
<pre><code class="html">&lt;input type=&quot;hidden&quot; name=&quot;$&#123;_csrf.parameterName&#125;&quot; value=&quot;$&#123;_csrf.token&#125;&quot; /&gt;</code></pre>
<p>如果使用了 Spring 的表单绑定标签， <code>&lt;sf:form&gt;</code>标签也会自动帮我们添加隐藏的 CSRF token 标签。</p>
<p>处理 CSRF 的另一种方式就是根本不去处理它，直接禁用掉，但是会有 CSRF 攻击的风险。</p>
<pre><code class="java">// 禁用 CSRF 防护功能
http.csrf.disabled;</code></pre>
<h3 id="9-4-认证用户"><a href="#9-4-认证用户" class="headerlink" title="9.4 认证用户"></a>9.4 认证用户</h3><h4 id="添加自定义的登录页"><a href="#添加自定义的登录页" class="headerlink" title="添加自定义的登录页"></a>添加自定义的登录页</h4><pre><code class="html">&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;
      xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;
  &lt;head&gt;
    &lt;title&gt;Spitter&lt;/title&gt;
    &lt;link rel=&quot;stylesheet&quot; 
          type=&quot;text/css&quot; 
          th:href=&quot;@&#123;/resources/style.css&#125;&quot;&gt;&lt;/link&gt;
  &lt;/head&gt;
  &lt;body onload=&#39;document.f.username.focus();&#39;&gt;
      &lt;div id=&quot;header&quot; th:include=&quot;page :: header&quot;&gt;&lt;/div&gt;

      &lt;div id=&quot;content&quot;&gt;
          &lt;a th:href=&quot;@&#123;/spitter/register&#125;&quot;&gt;注册&lt;/a&gt;
          &lt;form name=&#39;f&#39; th:action=&#39;@&#123;/login&#125;&#39; method=&#39;POST&#39;&gt;
               &lt;table&gt;
                &lt;tr&gt;
                    &lt;td&gt;用户名:&lt;/td&gt;
                    &lt;td&gt;&lt;input type=&#39;text&#39; name=&#39;username&#39; value=&#39;&#39; /&gt;&lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr&gt;
                    &lt;td&gt;密码:&lt;/td&gt;
                    &lt;td&gt;&lt;input type=&#39;password&#39; name=&#39;password&#39;/&gt;&lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr&gt;
                    &lt;td colspan=&#39;2&#39;&gt;
                        &lt;input id=&quot;remember_me&quot; name=&quot;remember-me&quot; type=&quot;checkbox&quot;/&gt;
                        &lt;label for=&quot;remember_me&quot; class=&quot;inline&quot;&gt;记住我&lt;/label&gt;
                    &lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr&gt;
                    &lt;td colspan=&#39;2&#39;&gt;
                        &lt;input name=&quot;submit&quot; type=&quot;submit&quot; value=&quot;Login&quot;/&gt;
                    &lt;/td&gt;
                &lt;/tr&gt;
               &lt;/table&gt;
          &lt;/form&gt;
      &lt;/div&gt;

      &lt;div id=&quot;footer&quot; th:include=&quot;page :: copy&quot;&gt;&lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre>
<h4 id="启用-HTTP-Basic-认证"><a href="#启用-HTTP-Basic-认证" class="headerlink" title="启用 HTTP Basic 认证"></a>启用 HTTP Basic 认证</h4><p>对于应用程序的人类用户来说，基于表单的认证是比较理想的。但是当应用程序的使用者是另外一个应用程序的<br>话，使用表单来提示登录的方式就不太适合了。</p>
<pre><code class="java">// 启用 httpBasic
.httpBasic()
    // 指定域
    .realmName(&quot;Spittr&quot;)</code></pre>
<p>如何测试？</p>
<h4 id="启用-Remember-me-功能"><a href="#启用-Remember-me-功能" class="headerlink" title="启用 Remember-me 功能"></a>启用 Remember-me 功能</h4><pre><code class="java">.rememberMe()
    .tokenValiditySeconds(2419200)
    .key(&quot;spittrKey&quot;)</code></pre>
<p>存储在 cookie 中的 token 包含用户名、密码、过期时间和一个私钥——在写入 cookie 前都进行了 MD5 哈希。默认情况下，私钥的名为 SpringSecured，但在这里我们将其设置为 spitterKey，使它专门用于 Spittr 应用。</p>
<p>登录请求必须包含一个名为<strong>remember-me</strong>的参数。</p>
<pre><code class="html">&lt;input id=&quot;remember_me&quot; name=&quot;remember-me&quot; type=&quot;checkbox&quot;/&gt;
&lt;label for=&quot;remember_me&quot; class=&quot;inline&quot;&gt;记住我&lt;/label&gt;</code></pre>
<h4 id="退出"><a href="#退出" class="headerlink" title="退出"></a>退出</h4><p>退出功能是通过 Servlet 容器中的 Filter 实现的（默认情况下），这个 Filter 会拦截针<br>对“/logout”的请求。退出后，所有的 remember-me token 都会被清除掉。</p>
<pre><code class="html">&lt;a th:href=&quot;@&#123;/logout&#125;&quot;&gt;登出&lt;/a&gt;</code></pre>
<pre><code class="java">// 设置登出相关操作
.logout()
    .logoutSuccessUrl(&quot;/&quot;)</code></pre>
<h3 id="9-5-保护视图"><a href="#9-5-保护视图" class="headerlink" title="9.5 保护视图"></a>9.5 保护视图</h3><p>上面是发起请求时，校验是否登录以及登录人是否有操作权限。换个角度，我们可以不给用户显示其无权访问的连接。</p>
<h4 id="使用-Spring-Security-的-JSP-标签库"><a href="#使用-Spring-Security-的-JSP-标签库" class="headerlink" title="使用 Spring Security 的 JSP 标签库"></a>使用 Spring Security 的 JSP 标签库</h4><p><img src="../../images/sia/c5/SpringSecurityJSP%E6%A0%87%E7%AD%BE%E5%BA%93.png"></p>
<h4 id="使用-Thymeleaf-的-Spring-Security-方言"><a href="#使用-Thymeleaf-的-Spring-Security-方言" class="headerlink" title="使用 Thymeleaf 的 Spring Security 方言"></a>使用 Thymeleaf 的 Spring Security 方言</h4><p><img src="../../images/sia/c5/thymeleafsecurity%E6%96%B9%E8%A8%80.png"></p>
<p><strong>模板引擎中注册安全方言</strong></p>
<pre><code class="java">@Bean
public SpringTemplateEngine templateEngine(TemplateResolver templateResolver) &#123;
    SpringTemplateEngine templateEngine = new SpringTemplateEngine();
    templateEngine.setTemplateResolver(templateResolver);
    // 注册安全方言
    templateEngine.addDialect(new SpringSecurityDialect());
    return templateEngine;
&#125;</code></pre>
<p><strong>在模板中生命安全方言命名空间</strong></p>
<pre><code class="html">&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;
      xmlns:th=&quot;http://www.thymeleaf.org&quot;
      xmlns:sec=&quot;http://www.thymeleaf.org/thymeleaf-extras-springsecurity3&quot;&gt;</code></pre>
<p><strong>在模板中使用</strong></p>
<pre><code class="html">&lt;!-- 条件渲染 --&gt;
&lt;div sec:authorize=&quot;isAuthenticated()&quot;&gt;
    &lt;!-- 渲染认证对象的属性 --&gt;
    Hello there...&lt;span sec:authentication=&quot;name&quot;&gt;user-name&lt;/span&gt;
&lt;/div&gt;

&lt;!-- 基于URL权限来渲染，这样就不用页面和url拦截写两份相同的控制了 --&gt;
&lt;span sec:authorize-url=&quot;/admin&quot;&gt;
    &lt;br/&gt; &lt;a th:href=&quot;@&#123;/admin&#125;&quot;&gt;Admin&lt;/a&gt;
&lt;/span&gt;</code></pre>

      
       <hr><span style="font-style: italic;color: gray;"> 转载请注明来源，欢迎对文章中的引用来源进行考证，欢迎指出任何有错误或不够清晰的表达。可以在下面评论区评论，也可以邮件至 lixianfu1@outlook.com </span>
    </div>
</article>


<p>
    <a  class="dashang" onclick="dashangToggle()">赏</a>
</p>




    <div id="comments"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">

<script type="text/javascript">
    $.getScript('/js/gitalk.js', function () {
        var gitalk = new Gitalk({
            clientID: '8b4bf9e725fa9e5652a9',
            clientSecret: 'bfc996b7a7d84a81599a9af4ca153637bd05b9f3',
            repo: 'gitalk',
            owner: 'Monkey-kong',
            admin: ['Monkey-kong'],
            id: decodeURI(location.pathname),
            distractionFreeMode: 'true',
            language: 'zh-CN',
            perPage: parseInt('10',10)
        })
        gitalk.render('comments')
    })
</script>




    




    </div>
    <div class="copyright">
        <p class="footer-entry"><span class="miit">
                <img src="/img/gov.png" title="中华人民共和国工业和信息化部">
                <a href="http://beian.miit.gov.cn/">粤ICP备2020135752号</a>
        </span>
    
    ©2019-2020 悟空
</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full" data-title="切换全屏 快捷键 s"><span class="min "></span></button>
<a class="" id="rocket" ></a>

    </div>
</div>

<div class="hide_box" onclick="dashangToggle()"></div>
<div class="shang_box">
    <a class="shang_close"  onclick="dashangToggle()">×</a>
    <div class="shang_tit">
        <p>喜欢就点赞,疼爱就打赏</p>
    </div>
    <div class="shang_payimg">
        <div class="pay_img">
            <img src="/img/alipay.jpg" class="alipay" title="扫码支持">
            <img src="/img/weixin.jpg" class="weixin" title="扫码支持">
        </div>
    </div>
    <div class="shang_payselect">
        <span><label><input type="radio" name="pay" checked value="alipay">支付宝</label></span><span><label><input type="radio" name="pay" value="weixin">微信</label></span>
    </div>
</div>


</body>
<script src="/js/jquery.pjax.js?v=1.1.0" ></script>

<script src="/js/script.js?v=1.1.0" ></script>
<script>
    var img_resize = 'default';
    function initArticle() {
        /*渲染对应的表格样式*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*渲染打赏样式*/
        
        $("input[name=pay]").on("click", function () {
            if($("input[name=pay]:checked").val()=="weixin"){
                $(".shang_box .shang_payimg .pay_img").addClass("weixin_img");
            } else {
                $(".shang_box .shang_payimg .pay_img").removeClass("weixin_img");
            }
        })
        

        /*高亮代码块行号*/
        
        $('pre code').each(function(){
            var lines = $(this).text().trim().split('\n').length, widther='';
            if (lines>99) {
                widther = 'widther'
            }
            var $numbering = $('<ul/>').addClass('pre-numbering ' + widther).attr("unselectable","on");
            $(this).addClass('has-numbering ' + widther)
                    .parent()
                    .append($numbering);
            for(var i=1;i<=lines;i++){
                $numbering.append($('<li/>').text(i));
            }
        });
        

        /*访问数量*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*代码高亮，行号对齐*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*打赏页面隐藏与展示*/
    
    function dashangToggle() {
        $(".shang_box").fadeToggle();
        $(".hide_box").fadeToggle();
    }
    

</script>

<!--加入行号的高亮代码块样式-->

<style>
    pre{
        position: relative;
        margin-bottom: 24px;
        border-radius: 10px;
        border: 1px solid #e2dede;
        background: #FFF;
        overflow: hidden;
    }
    code.has-numbering{
        margin-left: 30px;
    }
    code.has-numbering.widther{
        margin-left: 35px;
    }
    .pre-numbering{
        margin: 0;
        position: absolute;
        top: 0;
        left: 0;
        width: 20px;
        padding: 0.5em 3px 0.7em 5px;
        border-right: 1px solid #C3CCD0;
        text-align: right;
        color: #AAA;
        background-color: ;
    }
    .pre-numbering.widther {
        width: 35px;
    }
</style>

<!--自定义样式设置-->
<style>
    
    
    .nav {
        width: 562px;
    }
    .nav.fullscreen {
        margin-left: -562px;
    }
    .nav-left {
        width: 140px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*列表样式*/
    

    /* 背景图样式 */
    
    


    /*引用块样式*/
    

    /*文章列表背景图*/
    

    
</style>






</html>
