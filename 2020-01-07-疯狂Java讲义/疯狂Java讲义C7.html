<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="悟空的技术博客"><title>第 7 章 Java 基础类库 | 悟空</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><meta name="generator" content="Hexo 5.2.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">第 7 章 Java 基础类库</h1><a id="logo" href="/.">悟空</a><p class="description">悟空的技术博客</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/tags/"><i class="fa fa-tag"> 标签</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">第 7 章 Java 基础类库</h1><div class="post-meta">2020-01-07<span> | </span><span class="category"><a href="/categories/%E7%96%AF%E7%8B%82-Java-%E8%AE%B2%E4%B9%89/">疯狂 Java 讲义</a></span></div><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#7-1-%E4%B8%8E%E7%94%A8%E6%88%B7%E4%BA%92%E5%8A%A8"><span class="toc-text">7.1 与用户互动</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-1-%E8%BF%90%E8%A1%8C-Java-%E7%A8%8B%E5%BA%8F%E7%9A%84%E5%8F%82%E6%95%B0"><span class="toc-text">7.1.1 运行 Java 程序的参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-2-%E4%BD%BF%E7%94%A8-Scanner-%E8%8E%B7%E5%8F%96%E9%94%AE%E7%9B%98%E8%BE%93%E5%85%A5"><span class="toc-text">7.1.2 使用 Scanner 获取键盘输入</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-2-%E7%B3%BB%E7%BB%9F%E7%9B%B8%E5%85%B3"><span class="toc-text">7.2 系统相关</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-1-System-%E7%B1%BB"><span class="toc-text">7.2.1 System 类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E8%8E%B7%E5%8F%96%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E5%92%8C%E7%B3%BB%E7%BB%9F%E5%B1%9E%E6%80%A7"><span class="toc-text">1. 获取环境变量和系统属性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-GC"><span class="toc-text">2. GC</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%A0%87%E5%87%86%E8%BE%93%E5%85%A5%E3%80%81%E8%BE%93%E5%87%BA%E5%92%8C%E9%94%99%E8%AF%AF%E8%BE%93%E5%87%BA%E6%B5%81"><span class="toc-text">3. 标准输入、输出和错误输出流</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-System-identityHashCode"><span class="toc-text">4. System.identityHashCode</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-loadLibrary"><span class="toc-text">5. loadLibrary</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-2-Runtime-%E7%B1%BB%E4%B8%8E-Java-9-%E7%9A%84-ProcessHandle"><span class="toc-text">7.2.2 Runtime 类与 Java 9 的 ProcessHandle</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-load-loadLibrary-gc-runFinalization"><span class="toc-text">1. load loadLibrary gc runFinalization</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E8%AE%BF%E9%97%AE-JVM-%E4%BF%A1%E6%81%AF"><span class="toc-text">2. 访问 JVM 信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ProcessHandle"><span class="toc-text">ProcessHandle</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-3-%E5%B8%B8%E7%94%A8%E7%B1%BB"><span class="toc-text">7.3 常用类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-1-Object-%E7%B1%BB"><span class="toc-text">7.3.1 Object 类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-2-Java-7-%E6%96%B0%E5%A2%9E%E7%9A%84-Objects-%E7%B1%BB"><span class="toc-text">7.3.2 Java 7 新增的 Objects 类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-3-Java-9-%E6%94%B9%E8%BF%9B%E7%9A%84-String%E3%80%81StringBuffer-%E5%92%8C-StringBuilder"><span class="toc-text">7.3.3 Java 9 改进的 String、StringBuffer 和 StringBuilder</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-4-Math-%E7%B1%BB"><span class="toc-text">7.3.4 Math 类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-5-Java-7-%E7%9A%84-ThreadLocalRandom-%E4%B8%8E-Random"><span class="toc-text">7.3.5 Java 7 的 ThreadLocalRandom 与 Random</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-6-BigDecimal-%E7%B1%BB"><span class="toc-text">7.3.6 BigDecimal 类</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-4-%E6%97%A5%E6%9C%9F%E3%80%81%E6%97%B6%E9%97%B4%E7%B1%BB"><span class="toc-text">7.4 日期、时间类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-4-1-Date-%E7%B1%BB"><span class="toc-text">7.4.1 Date 类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-4-2-Calendar-%E7%B1%BB"><span class="toc-text">7.4.2 Calendar 类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#add-%E4%B8%8E-roll-%E5%8C%BA%E5%88%AB"><span class="toc-text">add 与 roll 区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%AE%B9%E9%94%99%E6%80%A7"><span class="toc-text">设置容错性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#set-%E6%96%B9%E6%B3%95%E5%BB%B6%E8%BF%9F%E4%BF%AE%E6%94%B9"><span class="toc-text">set() 方法延迟修改</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-4-3-Java-8-%E6%96%B0%E5%A2%9E%E7%9A%84%E6%97%A5%E6%9C%9F%E3%80%81%E6%97%B6%E9%97%B4%E5%8C%85"><span class="toc-text">7.4.3 Java 8 新增的日期、时间包</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-5-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-text">7.5 正则表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-5-1-%E5%88%9B%E5%BB%BA%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-text">7.5.1 创建正则表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-5-2-%E4%BD%BF%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-text">7.5.2 使用正则表达式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-6-%E5%8F%98%E9%87%8F%E5%A4%84%E7%90%86%E5%92%8C%E6%96%B9%E6%B3%95%E5%A4%84%E7%90%86"><span class="toc-text">7.6 变量处理和方法处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-6-1-Java-9-%E5%A2%9E%E5%BC%BA%E7%9A%84-MethodHandle"><span class="toc-text">7.6.1 Java 9 增强的 MethodHandle</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-6-2-Java-9-%E5%A2%9E%E5%8A%A0%E7%9A%84-VarHandle"><span class="toc-text">7.6.2 Java 9 增加的 VarHandle</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-7-Java-9-%E6%94%B9%E8%BF%9B%E7%9A%84%E5%9B%BD%E9%99%85%E5%8C%96%E4%B8%8E%E6%A0%BC%E5%BC%8F%E5%8C%96"><span class="toc-text">7.7 Java 9 改进的国际化与格式化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-7-1-Java-%E5%9B%BD%E9%99%85%E5%8C%96%E7%9A%84%E6%80%9D%E8%B7%AF"><span class="toc-text">7.7.1 Java 国际化的思路</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-7-2-Java-%E6%94%AF%E6%8C%81%E7%9A%84%E5%9B%BD%E5%AE%B6%E5%92%8C%E8%AF%AD%E8%A8%80"><span class="toc-text">7.7.2 Java 支持的国家和语言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-7-3-%E5%AE%8C%E6%88%90%E7%A8%8B%E5%BA%8F%E5%9B%BD%E9%99%85%E5%8C%96"><span class="toc-text">7.7.3 完成程序国际化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-7-4-%E4%BD%BF%E7%94%A8-MessageFormat-%E5%A4%84%E7%90%86%E5%8C%85%E5%90%AB%E5%8D%A0%E4%BD%8D%E7%AC%A6%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-text">7.7.4 使用 MessageFormat 处理包含占位符的字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-7-5-%E4%BD%BF%E7%94%A8%E7%B1%BB%E6%96%87%E4%BB%B6%E4%BB%A3%E6%9B%BF%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6"><span class="toc-text">7.7.5 使用类文件代替资源文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-7-6-Java-9-%E6%96%B0%E5%A2%9E%E7%9A%84%E6%97%A5%E5%BF%97-API"><span class="toc-text">7.7.6 Java 9 新增的日志 API</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-7-7-%E4%BD%BF%E7%94%A8-NumberFormat-%E6%A0%BC%E5%BC%8F%E5%8C%96%E6%95%B0%E5%AD%97"><span class="toc-text">7.7.7 使用 NumberFormat 格式化数字</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-7-8-%E4%BD%BF%E7%94%A8-DateFormat-%E6%A0%BC%E5%BC%8F%E5%8C%96%E6%97%A5%E6%9C%9F%E3%80%81%E6%97%B6%E9%97%B4"><span class="toc-text">7.7.8 使用 DateFormat 格式化日期、时间</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-7-9-%E4%BD%BF%E7%94%A8-SimpleDateFormat-%E6%A0%BC%E5%BC%8F%E5%8C%96%E6%97%A5%E6%9C%9F"><span class="toc-text">7.7.9 使用 SimpleDateFormat 格式化日期</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-8-Java-8-%E6%96%B0%E5%A2%9E%E7%9A%84%E6%97%A5%E6%9C%9F%E3%80%81%E6%97%B6%E9%97%B4%E6%A0%BC%E5%BC%8F%E5%99%A8"><span class="toc-text">7.8 Java 8 新增的日期、时间格式器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-8-1-%E4%BD%BF%E7%94%A8-DateTimeFormatter-%E5%AE%8C%E6%88%90%E6%A0%BC%E5%BC%8F%E5%8C%96"><span class="toc-text">7.8.1 使用 DateTimeFormatter 完成格式化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-8-2-%E4%BD%BF%E7%94%A8-DateTimeFormatter-%E8%A7%A3%E6%9E%90%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-text">7.8.2 使用 DateTimeFormatter 解析字符串</span></a></li></ol></li></ol></div></div><div class="post-content"><p>第 7 章 Java 基础类库</p>
<a id="more"></a>

<h2 id="7-1-与用户互动"><a href="#7-1-与用户互动" class="headerlink" title="7.1 与用户互动"></a>7.1 与用户互动</h2><h3 id="7-1-1-运行-Java-程序的参数"><a href="#7-1-1-运行-Java-程序的参数" class="headerlink" title="7.1.1 运行 Java 程序的参数"></a>7.1.1 运行 Java 程序的参数</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * public：由 JVM 调用，为了让 JVM 自由调用，所以设置为 public</span></span><br><span class="line"><span class="comment"> * static：JVM 调用这个方法时，不会先创建该主类对象</span></span><br><span class="line"><span class="comment"> * void：没有值返回给 JVM</span></span><br><span class="line"><span class="comment"> * args：JVM 传的参数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> args</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">	System.out.println(<span class="string">&quot;参数个数：&quot;</span> + args.length);</span><br><span class="line">	<span class="keyword">for</span> (String arg : args) &#123;</span><br><span class="line">		System.out.println(arg);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-1-2-使用-Scanner-获取键盘输入"><a href="#7-1-2-使用-Scanner-获取键盘输入" class="headerlink" title="7.1.2 使用 Scanner 获取键盘输入"></a>7.1.2 使用 Scanner 获取键盘输入</h3><p>Scanner 是一个基于正则表达式的文本扫描器，它可以从文件、输入流、宇符串中解析出基本类型值和字符串值。Scanner 类提供了<strong>多个构造器</strong>，不同的构造器可以接收文件、输入流、字符串作为数据源，用于从文件、输入流、字符串中解析数据。</p>
<ul>
<li>hasNextXxx()：是否还有写一个输入项</li>
<li>nextXxx()</li>
</ul>
<p>在默认情况下， Scanner 使用空白(包括空格、Tab 空白、回车)作为多个输入项之间的分隔符。</p>
<p>获取键盘输入：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// System.in 标准输入，就是键盘输入</span></span><br><span class="line">    Scanner sc = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">    <span class="comment">// 只把回车作为分隔符</span></span><br><span class="line">    sc.useDelimiter(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    <span class="keyword">while</span> (sc.hasNext()) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;键盘输入的内容是：&quot;</span> + sc.next());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>获取基本类型输入：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Scanner sc = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">    <span class="comment">// 如果输入不是 long 则程序退出</span></span><br><span class="line">    <span class="keyword">while</span> (sc.hasNextLong()) &#123;</span><br><span class="line">        System.out.println(sc.nextLong());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>获取文件输入:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> FileNotFoundException </span>&#123;</span><br><span class="line">    <span class="comment">// 文件作为输入</span></span><br><span class="line">    Scanner sc = <span class="keyword">new</span> Scanner(<span class="keyword">new</span> File(<span class="string">&quot;./src/unit7_basicclasss/c71/ScannerFileTest.java&quot;</span>));</span><br><span class="line">    <span class="keyword">while</span> (sc.hasNextLine()) &#123;</span><br><span class="line">        System.out.println(sc.nextLine());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="7-2-系统相关"><a href="#7-2-系统相关" class="headerlink" title="7.2 系统相关"></a>7.2 系统相关</h2><p>Java 程序运行在不同系统，可能需要取得平台相关的属性或者调用平台的命令。System 和 Runtime 类可以实现和平台交互。</p>
<h3 id="7-2-1-System-类"><a href="#7-2-1-System-类" class="headerlink" title="7.2.1 System 类"></a>7.2.1 System 类</h3><h4 id="1-获取环境变量和系统属性"><a href="#1-获取环境变量和系统属性" class="headerlink" title="1. 获取环境变量和系统属性"></a>1. 获取环境变量和系统属性</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    <span class="comment">// 获取系统所有环境变量</span></span><br><span class="line">    Map&lt;String, String&gt; env = System.getenv();</span><br><span class="line">    <span class="keyword">for</span> (String name : env.keySet())&#123;</span><br><span class="line">        System.out.println(name + <span class="string">&quot;==&gt;&quot;</span> + env.get(name));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 获取指定环境变量</span></span><br><span class="line">    System.out.println(System.getenv(<span class="string">&quot;JAVA_HOME&quot;</span>));</span><br><span class="line">    <span class="comment">// 获取所有系统属性</span></span><br><span class="line">    Properties props = System.getProperties();</span><br><span class="line">    props.store(<span class="keyword">new</span> FileOutputStream(<span class="string">&quot;props.txt&quot;</span>), <span class="string">&quot;Sys Prop&quot;</span>);</span><br><span class="line">    <span class="comment">// 获取执行的系统属性</span></span><br><span class="line">    System.out.println(System.getProperty(<span class="string">&quot;os.name&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-GC"><a href="#2-GC" class="headerlink" title="2. GC"></a>2. GC</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">System.gc();</span><br><span class="line">System.runFinalization();</span><br></pre></td></tr></table></figure>

<h4 id="3-标准输入、输出和错误输出流"><a href="#3-标准输入、输出和错误输出流" class="headerlink" title="3. 标准输入、输出和错误输出流"></a>3. 标准输入、输出和错误输出流</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">System.err.println(<span class="string">&quot;bbb&quot;</span>);</span><br><span class="line">System.in.read();</span><br></pre></td></tr></table></figure>

<h4 id="4-System-identityHashCode"><a href="#4-System-identityHashCode" class="headerlink" title="4. System.identityHashCode"></a>4. System.identityHashCode</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IdentityHashCodeTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// s1 s2 是两个不同的对象</span></span><br><span class="line">        String s1 = <span class="keyword">new</span> String(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">        String s2 = <span class="keyword">new</span> String(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">        <span class="comment">// 因为 String 重写了 hashCode() 方法--改为根据字符序列计算 hashCode</span></span><br><span class="line">        <span class="comment">// 所以 s1 s2 hashCode() 相同</span></span><br><span class="line">        System.out.println(s1.hashCode() + <span class="string">&quot;----&quot;</span> + s2.hashCode());</span><br><span class="line">        <span class="comment">// s1 s2 是不同的对象,所以 identityHashCode 不同</span></span><br><span class="line">        System.out.println(System.identityHashCode(s1) + <span class="string">&quot;----&quot;</span> +</span><br><span class="line">                System.identityHashCode(s2));</span><br><span class="line">        String s3 = <span class="string">&quot;Java&quot;</span>;</span><br><span class="line">        String s4 = <span class="string">&quot;Java&quot;</span>;</span><br><span class="line">        System.out.println(System.identityHashCode(s3) + <span class="string">&quot;----&quot;</span> +</span><br><span class="line">                System.identityHashCode(s4));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>根据对象的地址计算得到。</p>
<h4 id="5-loadLibrary"><a href="#5-loadLibrary" class="headerlink" title="5. loadLibrary"></a>5. loadLibrary</h4><p>加载动态链接库文件。实现调用 native 方法。</p>
<h3 id="7-2-2-Runtime-类与-Java-9-的-ProcessHandle"><a href="#7-2-2-Runtime-类与-Java-9-的-ProcessHandle" class="headerlink" title="7.2.2 Runtime 类与 Java 9 的 ProcessHandle"></a>7.2.2 Runtime 类与 Java 9 的 ProcessHandle</h3><p>Runtime 类代表Java 程序的运行时环境，每个Java 程序都有一个与之对应的Runtime 实例。</p>
<h4 id="1-load-loadLibrary-gc-runFinalization"><a href="#1-load-loadLibrary-gc-runFinalization" class="headerlink" title="1. load loadLibrary gc runFinalization"></a>1. load loadLibrary gc runFinalization</h4><h4 id="2-访问-JVM-信息"><a href="#2-访问-JVM-信息" class="headerlink" title="2. 访问 JVM 信息"></a>2. 访问 JVM 信息</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RuntimeTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 获取 Java 程序关联的运行时对象</span></span><br><span class="line">        <span class="keyword">final</span> Runtime rt = Runtime.getRuntime();</span><br><span class="line">        System.out.println(<span class="string">&quot;处理器数量:&quot;</span> + rt.availableProcessors());</span><br><span class="line">        System.out.println(<span class="string">&quot;空闲内存数:&quot;</span> + rt.freeMemory());</span><br><span class="line">        System.out.println(<span class="string">&quot;总内存数量:&quot;</span> + rt.totalMemory());</span><br><span class="line">        System.out.println(<span class="string">&quot;可用最大内存数:&quot;</span> + rt.maxMemory());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 运行记事本程序</span></span><br><span class="line">        rt.exec(<span class="string">&quot;notepad.exe&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ProcessHandle"><a href="#ProcessHandle" class="headerlink" title="ProcessHandle"></a>ProcessHandle</h4><p>Process 代表进程。Java 9 新增 ProcessHandle 接口，可获取进程 ID、父进程和后代进程；onExit() 方法可在进程结束时完成某些行为。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProcessHandleTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, InterruptedException </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> Runtime rt = Runtime.getRuntime();</span><br><span class="line">        <span class="comment">// 运行记事本程序</span></span><br><span class="line">        <span class="keyword">final</span> Process p = rt.exec(<span class="string">&quot;notepad.exe&quot;</span>);</span><br><span class="line">        <span class="keyword">final</span> ProcessHandle ph = p.toHandle();</span><br><span class="line">        System.out.println(<span class="string">&quot;进程是否在运行:&quot;</span> + ph.isAlive());</span><br><span class="line">        System.out.println(<span class="string">&quot;进程ID:&quot;</span> + ph.pid());</span><br><span class="line">        System.out.println(<span class="string">&quot;父进程:&quot;</span> + ph.parent());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">final</span> ProcessHandle.Info info = ph.info();</span><br><span class="line">        <span class="comment">// 通过 info 获取进程相关信息</span></span><br><span class="line">        System.out.println(<span class="string">&quot;进程命令:&quot;</span> + info.command());</span><br><span class="line">        System.out.println(<span class="string">&quot;进程参数:&quot;</span> + info.arguments());</span><br><span class="line">        System.out.println(<span class="string">&quot;进程启动时间:&quot;</span> + info.startInstant());</span><br><span class="line">        System.out.println(<span class="string">&quot;进程累计运行时间:&quot;</span> + info.totalCpuDuration());</span><br><span class="line">        <span class="comment">// 进程结束时运行某个任务</span></span><br><span class="line">        <span class="keyword">final</span> CompletableFuture&lt;ProcessHandle&gt; cf = ph.onExit();</span><br><span class="line">        cf.thenRunAsync(()-&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;程序退出&quot;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">        Thread.sleep(<span class="number">5000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="7-3-常用类"><a href="#7-3-常用类" class="headerlink" title="7.3 常用类"></a>7.3 常用类</h2><h3 id="7-3-1-Object-类"><a href="#7-3-1-Object-类" class="headerlink" title="7.3.1 Object 类"></a>7.3.1 Object 类</h3><p>所有类、数组、枚举类的父类。</p>
<ul>
<li>boolean equals(Object obj)</li>
<li>protected void finalize()</li>
<li>Class&lt;?&gt; getClass()：对象的运行时类</li>
<li>int hashCode()：根据地址计算。同 System.identityHahsCode</li>
<li>String toString()：运行时类名@十六进制 hashCode 值</li>
<li>wait()、nofify()、notifyAll()：控制线程</li>
<li>protected clone()</li>
</ul>
<p>自定义类实现克隆：</p>
<ul>
<li>实现 Cloneable 标记接口</li>
<li>实现 clone()</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Address</span> </span>&#123;</span><br><span class="line">    String detail;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Address</span><span class="params">(String detail)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.detail = detail;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">implements</span> <span class="title">Cloneable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> age;</span><br><span class="line">    Address address;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">        address = <span class="keyword">new</span> Address(<span class="string">&quot;广州天河&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> User <span class="title">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (User)<span class="keyword">super</span>.clone();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CloneTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> CloneNotSupportedException </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> User u1 = <span class="keyword">new</span> User(<span class="number">20</span>);</span><br><span class="line">        <span class="keyword">final</span> User u2 = u1.clone();</span><br><span class="line">        <span class="comment">// false</span></span><br><span class="line">        System.out.println(u1 == u2);</span><br><span class="line">        <span class="comment">// true(浅克隆)</span></span><br><span class="line">        System.out.println(u1.address == u2.address);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-3-2-Java-7-新增的-Objects-类"><a href="#7-3-2-Java-7-新增的-Objects-类" class="headerlink" title="7.3.2 Java 7 新增的 Objects 类"></a>7.3.2 Java 7 新增的 Objects 类</h3><p>提供很多空指针安全的方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ObjectsTest</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 定义一个 obj 变量,默认值为 null</span></span><br><span class="line">    <span class="keyword">static</span> ObjectsTest obj;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// null 对象的 hashCode 0</span></span><br><span class="line">        System.out.println(Objects.hashCode(obj));</span><br><span class="line">        <span class="comment">// 输出 null</span></span><br><span class="line">        System.out.println(Objects.toString(obj));</span><br><span class="line">        System.out.println(Objects.requireNonNull(obj, <span class="string">&quot;obj 参数不能是 null&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-3-3-Java-9-改进的-String、StringBuffer-和-StringBuilder"><a href="#7-3-3-Java-9-改进的-String、StringBuffer-和-StringBuilder" class="headerlink" title="7.3.3 Java 9 改进的 String、StringBuffer 和 StringBuilder"></a>7.3.3 Java 9 改进的 String、StringBuffer 和 StringBuilder</h3><p>String 类是不可变类，即一旦一个 String 对象被创建以后，包含在这个对象中的字符序列是不可改变的， 直至这个对象被销毁。</p>
<p>StringBuffer 是线程安全的。</p>
<p>Java 9 改进了字符串( 包括 String 、StringBuffer 、StringBuilder) 的实现。在 Java 9 以前字符串采用<br> char[]数组来保存字符，因此字符串的每个字符占 2 字节；而 Java 9 的字符串采用 byte[]数组再加一个 encoding-flag 宇段来保存字符，因此字符串的每个字符只占 1 宇节。所以 Java 9 的字符串更加节省空间。</p>
<p>因为 String 是不可变的，所以会额外产生很多临时变量，使用 StringBuffer 或 StringBuilder 就可以<br>避免这个问题。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StringBuilderTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        sb.append(<span class="string">&quot;java&quot;</span>);</span><br><span class="line">        sb.insert(<span class="number">0</span>, <span class="string">&quot;hello &quot;</span>);</span><br><span class="line">        sb.replace(<span class="number">5</span>, <span class="number">6</span>, <span class="string">&quot;,&quot;</span>);</span><br><span class="line">        sb.delete(<span class="number">5</span>, <span class="number">6</span>);</span><br><span class="line">        System.out.println(sb); <span class="comment">// hellojava</span></span><br><span class="line">        <span class="comment">// 反转</span></span><br><span class="line">        sb.reverse(); <span class="comment">// avajolleh</span></span><br><span class="line">        System.out.println(sb);</span><br><span class="line">        System.out.println(sb.length());</span><br><span class="line">        System.out.println(sb.capacity()); <span class="comment">// 16</span></span><br><span class="line">        sb.setLength(<span class="number">5</span>);</span><br><span class="line">        System.out.println(sb);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-3-4-Math-类"><a href="#7-3-4-Math-类" class="headerlink" title="7.3.4 Math 类"></a>7.3.4 Math 类</h3><p>数学相关运算。</p>
<h3 id="7-3-5-Java-7-的-ThreadLocalRandom-与-Random"><a href="#7-3-5-Java-7-的-ThreadLocalRandom-与-Random" class="headerlink" title="7.3.5 Java 7 的 ThreadLocalRandom 与 Random"></a>7.3.5 Java 7 的 ThreadLocalRandom 与 Random</h3><p>并发访问环境下，用 ThreadLocalRandom 来代替 Random 可以减少多线程资源竞争，最终保证系统具有更好的线程安全性。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RandomTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> Random rand = <span class="keyword">new</span> Random();</span><br><span class="line">        System.out.println(rand.nextBoolean());</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">16</span>];</span><br><span class="line">        rand.nextBytes(buffer);</span><br><span class="line">        System.out.println(Arrays.toString(buffer));</span><br><span class="line">        <span class="comment">// 0.0~0.1之间的伪随机数</span></span><br><span class="line">        System.out.println(rand.nextDouble());</span><br><span class="line">        System.out.println(rand.nextFloat());</span><br><span class="line">        <span class="comment">// 平均值是 0.0,标准差是 1.0 的伪高斯数</span></span><br><span class="line">        System.out.println(rand.nextGaussian());</span><br><span class="line">        System.out.println(rand.nextInt());</span><br><span class="line">        <span class="comment">// 0~26</span></span><br><span class="line">        System.out.println(rand.nextInt(<span class="number">26</span>));</span><br><span class="line">        System.out.println(rand.nextLong());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Random 其实是伪随机数，当种子相同调用顺序相同时会产生相同的数字序列。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SeedTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> Random r1 = <span class="keyword">new</span> Random(<span class="number">50</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;第一个种子为 50 的 Random 对象&quot;</span>);</span><br><span class="line">        System.out.println(r1.nextBoolean());</span><br><span class="line">        System.out.println(r1.nextInt());</span><br><span class="line">        System.out.println(r1.nextDouble());</span><br><span class="line">        System.out.println(r1.nextGaussian());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">final</span> Random r2 = <span class="keyword">new</span> Random(<span class="number">50</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;第二个种子为 50 的 Random 对象&quot;</span>);</span><br><span class="line">        System.out.println(r2.nextBoolean());</span><br><span class="line">        System.out.println(r2.nextInt());</span><br><span class="line">        System.out.println(r2.nextDouble());</span><br><span class="line">        System.out.println(r2.nextGaussian());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ThreadLocalRandom 对象</span></span><br><span class="line">        <span class="keyword">final</span> ThreadLocalRandom rand = ThreadLocalRandom.current();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>所以通常推荐使用当前时间作为种子。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> Random r = <span class="keyword">new</span> Random(System.currentTimeMillis());</span><br></pre></td></tr></table></figure>

<h3 id="7-3-6-BigDecimal-类"><a href="#7-3-6-BigDecimal-类" class="headerlink" title="7.3.6 BigDecimal 类"></a>7.3.6 BigDecimal 类</h3><p>float、double 容易引起精读丢失。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Doub1eTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 0.060000000000000005</span></span><br><span class="line">        System.out.println(<span class="number">0.05</span> + <span class="number">0.01</span>);</span><br><span class="line">        <span class="comment">// 0.5800000000000001</span></span><br><span class="line">        System.out.println(<span class="number">1.0</span> - <span class="number">0.42</span>);</span><br><span class="line">        <span class="comment">// 501.49999999999994</span></span><br><span class="line">        System.out.println(<span class="number">5.015</span> * <span class="number">100</span>);</span><br><span class="line">        <span class="comment">// 1.2329999999999999</span></span><br><span class="line">        System.out.println(<span class="number">123.3</span> / <span class="number">100</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>不要使用 double 作为参数的构造器，否则同样会丢失精度</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BigDecima1Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> BigDecimal f1 = <span class="keyword">new</span> BigDecimal(<span class="string">&quot;0.05&quot;</span>);</span><br><span class="line">        <span class="keyword">final</span> BigDecimal f2 = BigDecimal.valueOf(<span class="number">0.01</span>);</span><br><span class="line">        <span class="keyword">final</span> BigDecimal f3 = <span class="keyword">new</span> BigDecimal(<span class="number">0.05</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;使用 String 作为构造器参数:&quot;</span>);</span><br><span class="line">        System.out.println(f1.add(f2)); <span class="comment">// 0.06</span></span><br><span class="line">        System.out.println(f1.subtract(f2)); <span class="comment">// 0.04</span></span><br><span class="line">        System.out.println(f1.multiply(f2)); <span class="comment">// 0.0005</span></span><br><span class="line">        System.out.println(f1.divide(f2)); <span class="comment">// 5</span></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;使用 double 作为构造器参数:&quot;</span>);</span><br><span class="line">        <span class="comment">// 0.06000000000000000277555756156289135105907917022705078125</span></span><br><span class="line">        System.out.println(f3.add(f2)); </span><br><span class="line">        System.out.println(f3.subtract(f2));</span><br><span class="line">        System.out.println(f3.multiply(f2));</span><br><span class="line">        System.out.println(f3.divide(f2));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>封装针对 double 的工具类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BigDecimalArith</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 默认除法运算精度</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEF_DIV_SCALE = <span class="number">10</span>;</span><br><span class="line">    <span class="comment">// 私有构造器</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">BigDecimalArith</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">    <span class="comment">// 提供精确的加法运算</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">add</span><span class="params">(<span class="keyword">double</span> v1, <span class="keyword">double</span> v2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> BigDecimal b1 = BigDecimal.valueOf(v1);</span><br><span class="line">        <span class="keyword">final</span> BigDecimal b2 = BigDecimal.valueOf(v2);</span><br><span class="line">        <span class="keyword">return</span> b1.add(b2).doubleValue();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 提供精确的减法运算</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">sub</span><span class="params">(<span class="keyword">double</span> v1, <span class="keyword">double</span> v2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> BigDecimal b1 = BigDecimal.valueOf(v1);</span><br><span class="line">        <span class="keyword">final</span> BigDecimal b2 = BigDecimal.valueOf(v2);</span><br><span class="line">        <span class="keyword">return</span> b1.subtract(b2).doubleValue();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 提供精确的乘法运算</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">mul</span><span class="params">(<span class="keyword">double</span> v1, <span class="keyword">double</span> v2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> BigDecimal b1 = BigDecimal.valueOf(v1);</span><br><span class="line">        <span class="keyword">final</span> BigDecimal b2 = BigDecimal.valueOf(v2);</span><br><span class="line">        <span class="keyword">return</span> b1.multiply(b2).doubleValue();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 提供(相对)精确的除法运算</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">div</span><span class="params">(<span class="keyword">double</span> v1, <span class="keyword">double</span> v2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> BigDecimal b1 = BigDecimal.valueOf(v1);</span><br><span class="line">        <span class="keyword">final</span> BigDecimal b2 = BigDecimal.valueOf(v2);</span><br><span class="line">        <span class="keyword">return</span> b1.divide(b2, DEF_DIV_SCALE, RoundingMode.HALF_UP)</span><br><span class="line">                .doubleValue();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(BigDecimalArith.add(<span class="number">0.05</span>, <span class="number">0.01</span>));</span><br><span class="line">        System.out.println(BigDecimalArith.sub(<span class="number">1.0</span>, <span class="number">0.42</span>));</span><br><span class="line">        System.out.println(BigDecimalArith.mul(<span class="number">4.015</span>, <span class="number">100</span>));</span><br><span class="line">        System.out.println(BigDecimalArith.div(<span class="number">123.3</span>, <span class="number">100</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="7-4-日期、时间类"><a href="#7-4-日期、时间类" class="headerlink" title="7.4 日期、时间类"></a>7.4 日期、时间类</h2><h3 id="7-4-1-Date-类"><a href="#7-4-1-Date-类" class="headerlink" title="7.4.1 Date 类"></a>7.4.1 Date 类</h3><ul>
<li><p>Date()</p>
</li>
<li><p>Date(long date)</p>
</li>
<li><p>boolean after(Date when)</p>
</li>
<li><p>boolean before(Date when)</p>
</li>
<li><p>long getTime()</p>
</li>
<li><p>void setTime(long time)</p>
</li>
</ul>
<p>Java 关键已经不推荐使用。</p>
<h3 id="7-4-2-Calendar-类"><a href="#7-4-2-Calendar-类" class="headerlink" title="7.4.2 Calendar 类"></a>7.4.2 Calendar 类</h3><p>Calendar 是一个抽象类。提供了 GregorianCalendar 子类，代表公历。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CalendarTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> Calendar c = Calendar.getInstance();</span><br><span class="line">        <span class="comment">// 取出年</span></span><br><span class="line">        System.out.println(c.get(Calendar.YEAR));</span><br><span class="line">        <span class="comment">// 取出月</span></span><br><span class="line">        System.out.println(c.get(Calendar.MONTH));</span><br><span class="line">        <span class="comment">// 取出日</span></span><br><span class="line">        System.out.println(c.get(Calendar.DATE));</span><br><span class="line">        <span class="comment">// 分别设置年月日时分秒</span></span><br><span class="line">        c.set(<span class="number">2003</span>, <span class="number">10</span>, <span class="number">23</span>, <span class="number">12</span>, <span class="number">32</span>, <span class="number">23</span>);</span><br><span class="line">        System.out.println(c.getTime());</span><br><span class="line">        <span class="comment">// 前推一年</span></span><br><span class="line">        c.add(Calendar.YEAR, -<span class="number">1</span>);</span><br><span class="line">        System.out.println(c.getTime());</span><br><span class="line">        <span class="comment">// 前推 8 个月</span></span><br><span class="line">        c.add(Calendar.MONTH, -<span class="number">12</span>);</span><br><span class="line">        System.out.println(c.getTime());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="add-与-roll-区别"><a href="#add-与-roll-区别" class="headerlink" title="add 与 roll 区别"></a>add 与 roll 区别</h4><p>roll 不进位或退位</p>
<h4 id="设置容错性"><a href="#设置容错性" class="headerlink" title="设置容错性"></a>设置容错性</h4><p><code>setLenient(false);</code>后如果超出范围则报错。</p>
<h4 id="set-方法延迟修改"><a href="#set-方法延迟修改" class="headerlink" title="set() 方法延迟修改"></a>set() 方法延迟修改</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CalendarLazyTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> Calendar cal = Calendar.getInstance();</span><br><span class="line">        cal.set(<span class="number">2003</span>, <span class="number">7</span>, <span class="number">31</span>);</span><br><span class="line">        cal.set(Calendar.MONTH, <span class="number">8</span>);</span><br><span class="line">        <span class="comment">// 如果不注释,则显示10月份</span></span><br><span class="line">        <span class="comment">// System.out.println(cal.getTime());</span></span><br><span class="line">        cal.set(Calendar.DATE, <span class="number">5</span>);</span><br><span class="line">        System.out.println(cal.getTime());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-4-3-Java-8-新增的日期、时间包"><a href="#7-4-3-Java-8-新增的日期、时间包" class="headerlink" title="7.4.3 Java 8 新增的日期、时间包"></a>7.4.3 Java 8 新增的日期、时间包</h3><p>Java 8 新增了一个 java.time 包，包含如下常用类：</p>
<ul>
<li>Clock：指定时区的当前日期、时间</li>
<li>Duration：持续时间，一段时间</li>
<li>Instant：具体时刻，精确到纳秒</li>
<li>LocalDate：不带时区的日期</li>
<li>LocalTime：不带时区的时间</li>
<li>LocalDateTime：不带失去的日期、时间</li>
<li>MonthDay：月日</li>
<li>Year：年</li>
<li>YearMonth：年月</li>
<li>ZonedDateTime：时区化的日期、时间</li>
<li>ZoneId：时区</li>
<li>DayOfWeek：枚举类，周日到周六的枚举</li>
<li>Month：枚举类，一月到十二月</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NewDatePackageTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;=========Clock用法============&quot;</span>);</span><br><span class="line">        <span class="comment">// 当前 Clock</span></span><br><span class="line">        <span class="keyword">final</span> Clock clock = Clock.systemDefaultZone();<span class="comment">//Clock.systemUTC();</span></span><br><span class="line">        <span class="comment">// 通过 Clock 获取当前时刻</span></span><br><span class="line">        System.out.println(<span class="string">&quot;当前时刻为:&quot;</span> + clock.instant());</span><br><span class="line">        <span class="comment">// clock 对应的毫秒数,与 System.currentTimeMillis()相同</span></span><br><span class="line">        System.out.println(clock.millis());</span><br><span class="line">        System.out.println(System.currentTimeMillis());</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;=========Duration用法============&quot;</span>);</span><br><span class="line">        <span class="keyword">final</span> Duration d = Duration.ofSeconds(<span class="number">36000</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;6000秒相当于:&quot;</span> + d.toMinutes() + <span class="string">&quot;分&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;6000秒相当于&quot;</span> + d.toHours() + <span class="string">&quot;小时&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;6000秒相当于&quot;</span> + d.toDays() + <span class="string">&quot;天&quot;</span>);</span><br><span class="line">        <span class="comment">// 在 clock 基础上增加 6000 秒,返回新的 Clock</span></span><br><span class="line">        <span class="keyword">final</span> Clock clock2 = Clock.offset(clock, d);</span><br><span class="line">        System.out.println(<span class="string">&quot;当前时刻加 36000 秒为:&quot;</span> + clock2.instant());</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;=========Instant用法============&quot;</span>);</span><br><span class="line">        <span class="comment">// 获取当前时间</span></span><br><span class="line">        <span class="keyword">final</span> Instant instant = Instant.now();</span><br><span class="line">        System.out.println(instant);</span><br><span class="line">        <span class="comment">// instant 添加 6000 秒,返回新的 Instant</span></span><br><span class="line">        <span class="keyword">final</span> Instant instant2 = instant.plusSeconds(<span class="number">6000</span>);</span><br><span class="line">        System.out.println(instant2);</span><br><span class="line">        <span class="comment">// 根据字符串解析 Instant 对象</span></span><br><span class="line">        <span class="keyword">final</span> Instant instant3 = Instant.parse(<span class="string">&quot;2014-02-23T10:12:35.342Z&quot;</span>);</span><br><span class="line">        System.out.println(instant3);</span><br><span class="line">        <span class="comment">// instant3 添加 5 小时 4 分钟</span></span><br><span class="line">        <span class="keyword">final</span> Instant instant4 = instant3.plus(Duration.ofHours(<span class="number">5</span>).plusMinutes(<span class="number">4</span>));</span><br><span class="line">        System.out.println(instant4);</span><br><span class="line">        <span class="comment">// instant4 的 5 天以前的时刻</span></span><br><span class="line">        <span class="keyword">final</span> Instant instant5 = instant4.minus(Duration.ofDays(<span class="number">5</span>));</span><br><span class="line">        System.out.println(instant5);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;=========LocalDate用法============&quot;</span>);</span><br><span class="line">        LocalDate localDate = LocalDate.now();</span><br><span class="line">        System.out.println(localDate);</span><br><span class="line">        <span class="comment">// 2014 年的第 146 天</span></span><br><span class="line">        localDate = LocalDate.ofYearDay(<span class="number">2014</span>, <span class="number">146</span>);</span><br><span class="line">        System.out.println(localDate);</span><br><span class="line">        <span class="comment">// 设置为 2014 年 5 月 21 日</span></span><br><span class="line">        localDate = LocalDate.of(<span class="number">2014</span>, Month.MAY, <span class="number">21</span>);</span><br><span class="line">        System.out.println(localDate);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;=========LocalTime用法============&quot;</span>);</span><br><span class="line">        <span class="comment">// 当前时间</span></span><br><span class="line">        LocalTime localTime = LocalTime.now();</span><br><span class="line">        <span class="comment">// 设置为 22 点 33 分</span></span><br><span class="line">        localTime = LocalTime.of(<span class="number">22</span>, <span class="number">33</span>);</span><br><span class="line">        System.out.println(localTime);</span><br><span class="line">        <span class="comment">// 一天中的第 5503 秒</span></span><br><span class="line">        localTime = LocalTime.ofSecondOfDay(<span class="number">5503</span>);</span><br><span class="line">        System.out.println(localTime);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;=========LocalDateTime用法============&quot;</span>);</span><br><span class="line">        <span class="comment">// 当前日期、时间</span></span><br><span class="line">        LocalDateTime localDateTime = LocalDateTime.now();</span><br><span class="line">        <span class="comment">// 当前日期、时间加上 5 小时 3 分钟</span></span><br><span class="line">        LocalDateTime future = localDateTime.plusHours(<span class="number">5</span>).plusMinutes(<span class="number">3</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;当前日期、时间的 5 小时 3 分之后：&quot;</span> + future);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;=========Year YearMonth MonthDay用法============&quot;</span>);</span><br><span class="line">        Year year = Year.now();</span><br><span class="line">        System.out.println(year);</span><br><span class="line">        year = year.plusYears(<span class="number">5</span>);</span><br><span class="line">        System.out.println(year);</span><br><span class="line">        <span class="comment">// 根据指定月份获取 YearMonth</span></span><br><span class="line">        YearMonth ym = year.atMonth(<span class="number">10</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;year年10月：&quot;</span> + ym);</span><br><span class="line">        <span class="comment">// 加5年减三个月</span></span><br><span class="line">        ym = ym.plusYears(<span class="number">5</span>).minusMonths(<span class="number">3</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;year年10月加5年减3个月：&quot;</span> + ym);</span><br><span class="line">        MonthDay md = MonthDay.now();</span><br><span class="line">        System.out.println(<span class="string">&quot;当前月日：&quot;</span> + md);</span><br><span class="line">        <span class="comment">// 设置为 5 月 23 日</span></span><br><span class="line">        MonthDay md2 = md.with(Month.MAY).withDayOfMonth(<span class="number">23</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;5月23日为：&quot;</span> + md2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="7-5-正则表达式"><a href="#7-5-正则表达式" class="headerlink" title="7.5 正则表达式"></a>7.5 正则表达式</h2><ul>
<li>boolean matches(String regex)</li>
<li>String replaceAll(String regex, String re)</li>
<li>String replaceFirst(String regex, String re)</li>
<li>String[] split(String regex)</li>
</ul>
<p>上面方法都依赖于 Java 提供的正则表达式。除此之外，还提供了 Pattern 和 Matcher 两个类专门提供正则表达式支持。</p>
<h3 id="7-5-1-创建正则表达式"><a href="#7-5-1-创建正则表达式" class="headerlink" title="7.5.1 创建正则表达式"></a>7.5.1 创建正则表达式</h3><p>正则表达式所支持的合法字符：</p>
<table>
<thead>
<tr>
<th>字符</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td>x</td>
<td>字符x（x可表示任何合法字符）</td>
</tr>
<tr>
<td>\0mnn</td>
<td>八进制数 0mnn所表示的字符</td>
</tr>
<tr>
<td>\xhh</td>
<td>十六进制 0xhh 所表示的字符</td>
</tr>
<tr>
<td>\uhhhh</td>
<td>十六进制 0xhhhh 所表示的 Unicode 字符</td>
</tr>
<tr>
<td>\t</td>
<td>制表符（”\u0009”）</td>
</tr>
<tr>
<td>\n</td>
<td>新行（换行）符（”\u000A”）</td>
</tr>
<tr>
<td>\r</td>
<td>回车符（”\u000D”）</td>
</tr>
<tr>
<td>\f</td>
<td>换页符（”\u000C”）</td>
</tr>
<tr>
<td>\a</td>
<td>报警（bell）符（”\u0007”）</td>
</tr>
<tr>
<td>\e</td>
<td>Escape符号（”\u001B”）</td>
</tr>
<tr>
<td>\cx</td>
<td>x 对应的控制符。\cM 匹配 Ctrl+M</td>
</tr>
</tbody></table>
<p>正则表达式中的特殊字符：</p>
<table>
<thead>
<tr>
<th>特殊字符</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>$</td>
<td>匹配一行的结尾</td>
</tr>
<tr>
<td>^</td>
<td>匹配一行的开头</td>
</tr>
<tr>
<td>()</td>
<td>标记子表达式的开始和结束位置</td>
</tr>
<tr>
<td>[]</td>
<td>确定中括号表达式的开始和结束位置</td>
</tr>
<tr>
<td>{}</td>
<td>标记前面子表达式的出现频度</td>
</tr>
<tr>
<td>*</td>
<td>指定前面子表达式可以出现零次或多次</td>
</tr>
<tr>
<td>+</td>
<td>指定前面子表达式可以出现一次或多次</td>
</tr>
<tr>
<td>?</td>
<td>指定前面子表达式可以出现零次或一次</td>
</tr>
<tr>
<td>.</td>
<td>匹配除换行符 \n 之外的任何单字符</td>
</tr>
<tr>
<td>\</td>
<td>用于转义下一个字符，或指定八进制、十六进制</td>
</tr>
<tr>
<td>|</td>
<td>指定两项之间任选一项</td>
</tr>
</tbody></table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;\u0041\\\\&quot; &#x2F;&#x2F; 匹配 A\</span><br><span class="line">&quot;\u0061\t&quot; &#x2F;&#x2F; 匹配 a&lt;制表符&gt;</span><br><span class="line">&quot;\\?\\[&quot; &#x2F;&#x2F; 匹配 ?[</span><br></pre></td></tr></table></figure>

<p>正则表达式中预定义字符：</p>
<table>
<thead>
<tr>
<th>预定义字符</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>.</td>
<td>匹配任何字符</td>
</tr>
<tr>
<td>\d</td>
<td>匹配0~9的所有数字</td>
</tr>
<tr>
<td>\D</td>
<td>匹配非数字</td>
</tr>
<tr>
<td>\s</td>
<td>匹配所有空白字符，空格、制表符、回车符、换页符、换行符</td>
</tr>
<tr>
<td>\S</td>
<td>匹配所有非空白字符</td>
</tr>
<tr>
<td>\w</td>
<td>匹配所有的单词字符 0~9 26 _</td>
</tr>
<tr>
<td>\W</td>
<td>匹配所有非单词字符</td>
</tr>
</tbody></table>
<p>方括号表达式：</p>
<table>
<thead>
<tr>
<th>方括号表达式</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>表示枚举</td>
<td>[abc]：a\b\c 中任意一个字符</td>
</tr>
<tr>
<td>表示范围：-</td>
<td>[a-cx-z]：a<del>c、x</del>z范围内任意字符</td>
</tr>
<tr>
<td>表示求否：^</td>
<td>[^abc]：非 a、b、c的任意字符</td>
</tr>
<tr>
<td>表示与运算：&amp;&amp;</td>
<td>[a-z&amp;&amp;[def]]：a~z和[def]交集</td>
</tr>
<tr>
<td>表示并运算：</td>
<td>和枚举类似。[a-d[m-p]] 表示[a-dm-p]</td>
</tr>
</tbody></table>
<p>边界匹配符：</p>
<table>
<thead>
<tr>
<th>边界匹配符</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>^</td>
<td>行的开头</td>
</tr>
<tr>
<td>$</td>
<td>行的结尾</td>
</tr>
<tr>
<td>\b</td>
<td>单词的边界</td>
</tr>
<tr>
<td>\B</td>
<td>非单词的边界</td>
</tr>
<tr>
<td>\A</td>
<td>输入的开头</td>
</tr>
<tr>
<td>\G</td>
<td>前一个匹配的结尾</td>
</tr>
<tr>
<td>\Z</td>
<td>输入的结尾，仅用于最后的结束符</td>
</tr>
<tr>
<td>\z</td>
<td>输入的结尾</td>
</tr>
</tbody></table>
<p>数量标识符：</p>
<ul>
<li>Greedy：贪婪模式，一直匹配，直到无法匹配</li>
<li>Reluctant：勉强模式，用问好后缀（？）表示，匹配最少的字符</li>
<li>Possessive：占有模式，用加号后缀（+）表示</li>
</ul>
<table>
<thead>
<tr>
<th>贪婪模式</th>
<th>勉强模式</th>
<th>占用模式</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>X?</td>
<td>X??</td>
<td>X?+</td>
<td>X 表达式出现零次或一次</td>
</tr>
<tr>
<td>X*</td>
<td>X*?</td>
<td>X*+</td>
<td>X表达式出现零次或多次</td>
</tr>
<tr>
<td>X+</td>
<td>X+?</td>
<td>X++</td>
<td>X表达式出现一次或多次</td>
</tr>
<tr>
<td>X{n}</td>
<td>X{n}?</td>
<td>X{n}+</td>
<td>X表达式出现n次</td>
</tr>
<tr>
<td>X{n,}</td>
<td>X{n,}?</td>
<td>X{n,}+</td>
<td>X表达式最少出现n次</td>
</tr>
<tr>
<td>X{n,m}</td>
<td>X{n,m}?</td>
<td>X{n,m}+</td>
<td>X表达式最少出现n次，最多出现m次</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">String str = <span class="string">&quot;hello , java!&quot;</span>;</span><br><span class="line"><span class="comment">// 贪婪模式的正则表达式</span></span><br><span class="line">System.out.println(str.replaceFirst(<span class="string">&quot;\\w*&quot;</span>, <span class="string">&quot;▲&quot;</span>)); <span class="comment">// ▲ , java</span></span><br><span class="line"><span class="comment">// 勉强模式</span></span><br><span class="line">System.out.println(str.replaceFirst(<span class="string">&quot;\\w*?&quot;</span>, <span class="string">&quot;▲&quot;</span>));<span class="comment">// ▲hello , java</span></span><br></pre></td></tr></table></figure>

<h3 id="7-5-2-使用正则表达式"><a href="#7-5-2-使用正则表达式" class="headerlink" title="7.5.2 使用正则表达式"></a>7.5.2 使用正则表达式</h3><p>Pattem 对象是正则表达式编译后在内存中的表示形式。</p>
<p>Pattem 是不可变类， 可供多个并发线程安全使用。</p>
<p>Matcher:</p>
<ul>
<li>find()：返回目标字符串中是否包含与 Pattern 匹配的子串</li>
<li>group()：返回上一次与 Pattern 匹配的子串</li>
<li>start()：返回上一次与 Pattern 匹配的子串在目标字符串中的开始位置</li>
<li>end()：返回上一次与 Pattern 匹配的子串在目标字符串中的结束位置加1</li>
<li>lookingAt()：返回目标字符串前面部分与 Pattern 是否匹配</li>
<li>matches()：返回整个目标字符串与 Pattern 是否匹配</li>
<li>reset()：将现有的 Matcher 对象应用于一个新的字符序列</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FindGroup</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 使用字符串模拟从网上得到的网页源码</span></span><br><span class="line">        String str = <span class="string">&quot;adadfadfadsf18594286805发打发打发&quot;</span> +</span><br><span class="line">                <span class="string">&quot;adfad18594286801放大算法的&quot;</span>;</span><br><span class="line">        <span class="keyword">final</span> Matcher m = Pattern.compile(<span class="string">&quot;((13\\d)|(18\\d))\\d&#123;8&#125;&quot;</span>)</span><br><span class="line">                .matcher(str);</span><br><span class="line">        <span class="comment">// 将所有符合正则表达式的子串全部输出</span></span><br><span class="line">        <span class="keyword">while</span> (m.find()) &#123;</span><br><span class="line">            System.out.println(m.group());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>find(int i)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StartEnd</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String regStr = <span class="string">&quot;Java is very easy!&quot;</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;目标字符串是：&quot;</span> + regStr);</span><br><span class="line">        <span class="keyword">final</span> Matcher m = Pattern.compile(<span class="string">&quot;\\w+&quot;</span>).matcher(regStr);</span><br><span class="line">        <span class="keyword">while</span> (m.find()) &#123;</span><br><span class="line">            System.out.println(m.group() + <span class="string">&quot;子串的起始位置：&quot;</span> +</span><br><span class="line">                    m.start() + <span class="string">&quot;,其结束位置：&quot;</span> + m.end());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    目标字符串是：Java is very easy!</span></span><br><span class="line"><span class="comment">//    Java子串的起始位置：0,其结束位置：4</span></span><br><span class="line"><span class="comment">//    is子串的起始位置：5,其结束位置：7</span></span><br><span class="line"><span class="comment">//    very子串的起始位置：8,其结束位置：12</span></span><br><span class="line"><span class="comment">//    easy子串的起始位置：13,其结束位置：17</span></span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MatchesTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String[] mails = &#123;</span><br><span class="line">                <span class="string">&quot;1111@163.com&quot;</span>,</span><br><span class="line">                <span class="string">&quot;2222@gmail.com&quot;</span>,</span><br><span class="line">                <span class="string">&quot;3333@outlook.com&quot;</span>,</span><br><span class="line">                <span class="string">&quot;4444@abc.xx&quot;</span></span><br><span class="line">        &#125;;</span><br><span class="line">        String mailRegEx = <span class="string">&quot;\\w&#123;3,20&#125;@\\w+\\.(com|org|cn|net|gov)&quot;</span>;</span><br><span class="line">        <span class="keyword">final</span> Pattern mailPattern = Pattern.compile(mailRegEx);</span><br><span class="line">        Matcher matcher = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">for</span> (String mail : mails) &#123;</span><br><span class="line">            <span class="keyword">if</span> (matcher == <span class="keyword">null</span>) &#123;</span><br><span class="line">                matcher = mailPattern.matcher(mail);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                matcher.reset(mail);</span><br><span class="line">            &#125;</span><br><span class="line">            String result = mail + (matcher.matches() ? <span class="string">&quot;是&quot;</span> : <span class="string">&quot;不是&quot;</span>) +</span><br><span class="line">                <span class="string">&quot;一个有效的邮件地址.&quot;</span>;</span><br><span class="line">            System.out.println(result);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReplaceTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String[] msgs = &#123;</span><br><span class="line">            <span class="string">&quot;Java has regular expressions in 1.4&quot;</span>,</span><br><span class="line">            <span class="string">&quot;regular expression now expressing in Java&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Java represses oracular expression&quot;</span></span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">final</span> Pattern p = Pattern.compile(<span class="string">&quot;re\\w*&quot;</span>);</span><br><span class="line">        Matcher matcher = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;msgs.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (matcher == <span class="keyword">null</span>) &#123;</span><br><span class="line">                matcher = p.matcher(msgs[i]);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                matcher.reset(msgs[i]);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(matcher.replaceAll(<span class="string">&quot;哈哈:)&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="7-6-变量处理和方法处理"><a href="#7-6-变量处理和方法处理" class="headerlink" title="7.6 变量处理和方法处理"></a>7.6 变量处理和方法处理</h2><h3 id="7-6-1-Java-9-增强的-MethodHandle"><a href="#7-6-1-Java-9-增强的-MethodHandle" class="headerlink" title="7.6.1 Java 9 增强的 MethodHandle"></a>7.6.1 Java 9 增强的 MethodHandle</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MethodHandleTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello world!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">hello</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;执行带参数的 hello&quot;</span> + name);</span><br><span class="line">        <span class="keyword">return</span> name + <span class="string">&quot;,您好&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        <span class="comment">// 定义一个返回值为 void、不带形参的方法类型</span></span><br><span class="line">        MethodType type = MethodType.methodType(<span class="keyword">void</span>.class);</span><br><span class="line">        <span class="comment">// 获取类方法</span></span><br><span class="line">        MethodHandle mtd = MethodHandles.lookup()</span><br><span class="line">                .findStatic(MethodHandleTest.class, <span class="string">&quot;hello&quot;</span>, type);</span><br><span class="line">        <span class="comment">// 通过 MethodHandle 执行方法</span></span><br><span class="line">        mtd.invoke();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取实例方法</span></span><br><span class="line">        MethodHandle mtd2 = MethodHandles.lookup()</span><br><span class="line">                .findVirtual(MethodHandleTest.class, <span class="string">&quot;hello&quot;</span>,</span><br><span class="line">                MethodType.methodType(String.class, String.class));</span><br><span class="line">        System.out.println(mtd2.invoke(<span class="keyword">new</span> MethodHandleTest(), <span class="string">&quot;孙悟空&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-6-2-Java-9-增加的-VarHandle"><a href="#7-6-2-Java-9-增加的-VarHandle" class="headerlink" title="7.6.2 Java 9 增加的 VarHandle"></a>7.6.2 Java 9 增加的 VarHandle</h3><p>VarHandle 主要用于动态操作数组的元素或对象的成员变量。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> MAX_AGE;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">VarHandleTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> NoSuchFieldException, IllegalAccessException </span>&#123;</span><br><span class="line">        String[] sa = <span class="keyword">new</span> String[]&#123;<span class="string">&quot;Java&quot;</span>, <span class="string">&quot;Kotlin&quot;</span>, <span class="string">&quot;Go&quot;</span>&#125;;</span><br><span class="line">        <span class="comment">// 获取一个 String[] 数组的 VarHandle 对象</span></span><br><span class="line">        <span class="keyword">final</span> VarHandle avh = MethodHandles.arrayElementVarHandle(String[].class);</span><br><span class="line">        <span class="comment">// 比较并设置：如果第三个元素是 Go，则该元素被设为 Lua</span></span><br><span class="line">        <span class="keyword">boolean</span> r = avh.compareAndSet(sa, <span class="number">2</span>, <span class="string">&quot;Go&quot;</span>, <span class="string">&quot;Lua&quot;</span>);</span><br><span class="line">        <span class="comment">// 输出比较结果</span></span><br><span class="line">        System.out.println(r);</span><br><span class="line">        <span class="comment">// 看到第三个元素被替换为 Lua</span></span><br><span class="line">        System.out.println(Arrays.toString(sa));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取 sa 数组的第二个元素</span></span><br><span class="line">        System.out.println(avh.get(sa, <span class="number">1</span>));</span><br><span class="line">        System.out.println(avh.getAndSet(sa, <span class="number">2</span>, <span class="string">&quot;Swift&quot;</span>));</span><br><span class="line">        <span class="comment">// 看到第三个元素被替换成 Swift</span></span><br><span class="line">        System.out.println(Arrays.toString(sa));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取 User 类中名为 nam、类型为 String 的实例变量</span></span><br><span class="line">        VarHandle vh1 = MethodHandles.lookup().findVarHandle(User.class,</span><br><span class="line">                <span class="string">&quot;name&quot;</span>, String.class);</span><br><span class="line">        User user = <span class="keyword">new</span> User();</span><br><span class="line">        <span class="comment">// 通过 VarHandle 获取实例变量的值，需要传入对象作为调用者</span></span><br><span class="line">        System.out.println(vh1.get(user)); <span class="comment">// null</span></span><br><span class="line">        <span class="comment">// 设置实例变量的值</span></span><br><span class="line">        vh1.set(user, <span class="string">&quot;孙悟空&quot;</span>);</span><br><span class="line">        System.out.println(user.name); <span class="comment">// 孙悟空</span></span><br><span class="line">        System.out.println(vh1.get(user)); <span class="comment">// 孙悟空</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取 User 类中名为 MAX_AGE、类型为 Integer 的类变量</span></span><br><span class="line">        VarHandle vh2 = MethodHandles.lookup().findStaticVarHandle(User.class,</span><br><span class="line">                <span class="string">&quot;MAX_AGE&quot;</span>, <span class="keyword">int</span>.class);</span><br><span class="line">        System.out.println(vh2.get()); <span class="comment">// 0</span></span><br><span class="line">        vh2.set(<span class="number">100</span>);</span><br><span class="line">        System.out.println(User.MAX_AGE); <span class="comment">// 100</span></span><br><span class="line">        System.out.println(vh2.get());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="7-7-Java-9-改进的国际化与格式化"><a href="#7-7-Java-9-改进的国际化与格式化" class="headerlink" title="7.7 Java 9 改进的国际化与格式化"></a>7.7 Java 9 改进的国际化与格式化</h2><p>Intemationalization 中间省略 18 个字母，I18N。</p>
<p>Localization 本地化，中间省略 10 个字母，I10N。</p>
<h3 id="7-7-1-Java-国际化的思路"><a href="#7-7-1-Java-国际化的思路" class="headerlink" title="7.7.1 Java 国际化的思路"></a>7.7.1 Java 国际化的思路</h3><ul>
<li>ResourceBundle：用于加载国家、语言资源包</li>
<li>Locale：封装特定的国家/区域、语言环境</li>
<li>MessageFormat：用于格式化带占位符的字符串</li>
</ul>
<p>资源文件命名三种形式：</p>
<ul>
<li>baseName_language_country.properties</li>
<li>baseName_language.properties</li>
<li>baseName.properties</li>
</ul>
<p>其中 baseName 是资源文件的基本名， 用户可随意指定；而 language 和 country 都不可随意变化，必须是Java 所支持的语言和国家。</p>
<h3 id="7-7-2-Java-支持的国家和语言"><a href="#7-7-2-Java-支持的国家和语言" class="headerlink" title="7.7.2 Java 支持的国家和语言"></a>7.7.2 Java 支持的国家和语言</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LocaleList</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 返回 Java 所支持的全部国家和语言的数组</span></span><br><span class="line">        <span class="keyword">final</span> Locale[] localeList = Locale.getAvailableLocales();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;localeList.length; i++) &#123;</span><br><span class="line">            System.out.println(localeList[i].getDisplayCountry() +</span><br><span class="line">                    <span class="string">&quot;=&quot;</span> + localeList[i].getCountry() + <span class="string">&quot; &quot;</span> +</span><br><span class="line">                    localeList[i].getDisplayLanguage() +</span><br><span class="line">                    <span class="string">&quot;=&quot;</span> + localeList[i].getLanguage());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-7-3-完成程序国际化"><a href="#7-7-3-完成程序国际化" class="headerlink" title="7.7.3 完成程序国际化"></a>7.7.3 完成程序国际化</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloI18n</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 取得系统默认的国家/语言环境</span></span><br><span class="line">        Locale myLocale = Locale.getDefault(Locale.Category.FORMAT);</span><br><span class="line">        <span class="comment">// 根据指定的国家/语言环境加载资源文件</span></span><br><span class="line">        ResourceBundle bundle = ResourceBundle.getBundle(<span class="string">&quot;unit7_basicclasss.c7.i18n.mess&quot;</span>, myLocale);</span><br><span class="line">        System.out.println(bundle.getString(<span class="string">&quot;hello&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// mess_en_US.properties</span></span><br><span class="line"><span class="comment">// mess_en_US.properties</span></span><br></pre></td></tr></table></figure>

<h3 id="7-7-4-使用-MessageFormat-处理包含占位符的字符串"><a href="#7-7-4-使用-MessageFormat-处理包含占位符的字符串" class="headerlink" title="7.7.4 使用 MessageFormat 处理包含占位符的字符串"></a>7.7.4 使用 MessageFormat 处理包含占位符的字符串</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MessageFormatTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 定义一个 Locale 变量</span></span><br><span class="line">        Locale currentLocale = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">// 如果运行程序指定了两个参数</span></span><br><span class="line">        <span class="keyword">if</span> (args.length == <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="comment">// 使用运行程序的两个参数构造 Locale 实例</span></span><br><span class="line">            currentLocale = <span class="keyword">new</span> Locale(args[<span class="number">0</span>], args[<span class="number">1</span>]);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 否则直接使用系统默认的 Locale</span></span><br><span class="line">            currentLocale = Locale.getDefault(Locale.Category.FORMAT);</span><br><span class="line">        &#125;</span><br><span class="line">        ResourceBundle bundle = ResourceBundle.getBundle(<span class="string">&quot;unit7_basicclasss.c7.i18n.mess&quot;</span>, currentLocale);</span><br><span class="line">        String msg = bundle.getString(<span class="string">&quot;msg&quot;</span>);</span><br><span class="line">        System.out.println(MessageFormat.format(msg, <span class="string">&quot;alvin&quot;</span>, <span class="keyword">new</span> Date()));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-7-5-使用类文件代替资源文件"><a href="#7-7-5-使用类文件代替资源文件" class="headerlink" title="7.7.5 使用类文件代替资源文件"></a>7.7.5 使用类文件代替资源文件</h3><ul>
<li>类名必须是 baseName_ language_ country</li>
<li>该类必须继承 ListResourceBundle ， 并重写 getContents() 方法</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">myMess_zh_CN</span> <span class="keyword">extends</span> <span class="title">ListResourceBundle</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 定义资源</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Object myData[][] = &#123;</span><br><span class="line">            &#123;<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;&#123;0&#125;,你好！今天的日期是&#123;1&#125;&quot;</span>&#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Object[][] getContents() &#123;</span><br><span class="line">        <span class="keyword">return</span> myData;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ResourceBundle 搜索资源文件的顺序是:</p>
<ul>
<li>baseName_zh_CN.class</li>
<li>baseName_zh_CN.properties</li>
<li>baseName_zh.class</li>
<li>baseName_zh.properties</li>
<li>baseName.class</li>
<li>baseName.properties</li>
</ul>
<h3 id="7-7-6-Java-9-新增的日志-API"><a href="#7-7-6-Java-9-新增的日志-API" class="headerlink" title="7.7.6 Java 9 新增的日志 API"></a>7.7.6 Java 9 新增的日志 API</h3><p>.开发者可将这些日志消息路由到各种主流的日志框架(如SLF4J 、Log4J 等) ，否则默认使用Java 传统的j ava. util.logging 日志 API 。</p>
<ul>
<li>System.getLogger(String name)</li>
<li>Logger.log()</li>
</ul>
<p>日志级别：</p>
<table>
<thead>
<tr>
<th>Java 9 日志级别</th>
<th>传统日志级别</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>ALL</td>
<td>ALL</td>
<td></td>
</tr>
<tr>
<td>TRACE</td>
<td>FINER</td>
<td></td>
</tr>
<tr>
<td>DEBUGGER</td>
<td>FINE</td>
<td></td>
</tr>
<tr>
<td>INFO</td>
<td>INFO</td>
<td></td>
</tr>
<tr>
<td>WARNING</td>
<td>WARNING</td>
<td></td>
</tr>
<tr>
<td>ERROR</td>
<td>SEVERE</td>
<td></td>
</tr>
<tr>
<td>OFF</td>
<td>OFF</td>
<td></td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoggerTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 获取 Logger 对象</span></span><br><span class="line">        <span class="keyword">final</span> System.Logger logger = System.getLogger(<span class="string">&quot;fkjava&quot;</span>);</span><br><span class="line">        <span class="comment">// 设置日志级别(FINE 对应 DEBUG)</span></span><br><span class="line">        Logger.getLogger(<span class="string">&quot;fkjava&quot;</span>).setLevel(Level.FINE);</span><br><span class="line">        <span class="comment">// 设置使用 a.xml 保存日志记录</span></span><br><span class="line">        Logger.getLogger(<span class="string">&quot;fkjava&quot;</span>).addHandler(<span class="keyword">new</span> FileHandler(<span class="string">&quot;a.xml&quot;</span>));</span><br><span class="line">        logger.log(System.Logger.Level.DEBUG, <span class="string">&quot;debug 信息&quot;</span>);</span><br><span class="line">        logger.log(System.Logger.Level.INFO, <span class="string">&quot;info 信息&quot;</span>);</span><br><span class="line">        logger.log(System.Logger.Level.ERROR, <span class="string">&quot;error 信息&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>日志也可以国际化：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoggerI18N</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 加载国际化资源包</span></span><br><span class="line">        ResourceBundle rb = ResourceBundle.getBundle(<span class="string">&quot;unit7_basicclasss.c7.i18n.mess&quot;</span>,</span><br><span class="line">                Locale.getDefault(Locale.Category.FORMAT));</span><br><span class="line">        <span class="comment">// 获取 System.Logger 对象</span></span><br><span class="line">        System.Logger logger = System.getLogger(<span class="string">&quot;fkjava&quot;</span>, rb);</span><br><span class="line">        Logger.getLogger(<span class="string">&quot;fkjava&quot;</span>).setLevel(Level.INFO);</span><br><span class="line">        <span class="comment">// 设置使用 a.xml 保存日志记录</span></span><br><span class="line">        Logger.getLogger(<span class="string">&quot;fkjava&quot;</span>).addHandler(<span class="keyword">new</span> FileHandler(<span class="string">&quot;a.xml&quot;</span>));</span><br><span class="line">        logger.log(System.Logger.Level.DEBUG, <span class="string">&quot;debug&quot;</span>);</span><br><span class="line">        logger.log(System.Logger.Level.INFO, <span class="string">&quot;info&quot;</span>);</span><br><span class="line">        logger.log(System.Logger.Level.ERROR, <span class="string">&quot;error&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-7-7-使用-NumberFormat-格式化数字"><a href="#7-7-7-使用-NumberFormat-格式化数字" class="headerlink" title="7.7.7 使用 NumberFormat 格式化数字"></a>7.7.7 使用 NumberFormat 格式化数字</h3><p>MessageFormat 是抽象类 Format 的子类， Format 抽象类还有两个子类: NumberFormat 和 DateFormat。</p>
<p>对象获取：</p>
<ul>
<li>getCurrencyInstance()：返回默认 Locale 的货币格式器</li>
<li>getIntegerInstance()：整数格式器</li>
<li>getNumberInstance()：数值格式器</li>
<li>getPercentInstance()：百分数格式器</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NumberFormatTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 需要给格式化的数字</span></span><br><span class="line">        <span class="keyword">double</span> db = <span class="number">1234000.567</span>;</span><br><span class="line">        <span class="comment">// 创建四个 Locale，分别代表中国、日本、德国、美国</span></span><br><span class="line">        Locale[] locales = &#123;Locale.CHINA, Locale.JAPAN,</span><br><span class="line">            Locale.GERMAN, Locale.US&#125;;</span><br><span class="line">        NumberFormat[] nf = <span class="keyword">new</span> NumberFormat[<span class="number">12</span>];</span><br><span class="line">        <span class="comment">// 为上面四个 Local 创建 12 个 NumberFormat 对象</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;locales.length; i++) &#123;</span><br><span class="line">            nf[i*<span class="number">3</span>] = NumberFormat.getNumberInstance(locales[i]);</span><br><span class="line">            nf[i*<span class="number">3</span> + <span class="number">1</span>] = NumberFormat.getPercentInstance(locales[i]);</span><br><span class="line">            nf[i*<span class="number">3</span> + <span class="number">2</span>] = NumberFormat.getCurrencyInstance(locales[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; locales.length; i++) &#123;</span><br><span class="line">            String tip = i == <span class="number">0</span> ? <span class="string">&quot;-----中国的格式-----&quot;</span>:</span><br><span class="line">                i == <span class="number">1</span> ? <span class="string">&quot;------日本的格式------&quot;</span> :</span><br><span class="line">                i == <span class="number">2</span> ? <span class="string">&quot;------德国的格式------&quot;</span> :</span><br><span class="line">                <span class="string">&quot;------美国的格式-----&quot;</span>;</span><br><span class="line">            System.out.println(tip);</span><br><span class="line">            System.out.println(<span class="string">&quot;通用数值格式：&quot;</span> + nf[i*<span class="number">3</span>].format(db));</span><br><span class="line">            System.out.println(<span class="string">&quot;百分比数值格式：&quot;</span> + nf[i*<span class="number">3</span>+<span class="number">1</span>].format(db));</span><br><span class="line">            System.out.println(<span class="string">&quot;货币数值格式：&quot;</span> + nf[i*<span class="number">3</span>+<span class="number">2</span>].format(db));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-7-8-使用-DateFormat-格式化日期、时间"><a href="#7-7-8-使用-DateFormat-格式化日期、时间" class="headerlink" title="7.7.8 使用 DateFormat 格式化日期、时间"></a>7.7.8 使用 DateFormat 格式化日期、时间</h3><ul>
<li>getDateInstance()：日期格式器</li>
<li>getTimeInstance()：时间格式器</li>
<li>getDateTimeInstance()：日期、时间格式器</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DateFormatTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Date dt = <span class="keyword">new</span> Date();</span><br><span class="line">        Locale[] locales = &#123;Locale.CHINA, Locale.US&#125;;</span><br><span class="line">        DateFormat[] df = <span class="keyword">new</span> DateFormat[<span class="number">16</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;locales.length; i++) &#123;</span><br><span class="line">            df[i*<span class="number">8</span>] = DateFormat.getDateInstance(DateFormat.SHORT, locales[i]);</span><br><span class="line">            df[i*<span class="number">8</span> + <span class="number">1</span>] = DateFormat.getDateInstance(DateFormat.MEDIUM, locales[i]);</span><br><span class="line">            df[i*<span class="number">8</span> + <span class="number">2</span>] = DateFormat.getDateInstance(DateFormat.LONG, locales[i]);</span><br><span class="line">            df[i*<span class="number">8</span> + <span class="number">3</span>] = DateFormat.getDateInstance(DateFormat.FULL, locales[i]);</span><br><span class="line">            df[i*<span class="number">8</span> + <span class="number">4</span>] = DateFormat.getTimeInstance(DateFormat.SHORT, locales[i]);</span><br><span class="line">            df[i*<span class="number">8</span> + <span class="number">5</span>] = DateFormat.getTimeInstance(DateFormat.MEDIUM, locales[i]);</span><br><span class="line">            df[i*<span class="number">8</span> + <span class="number">6</span>] = DateFormat.getTimeInstance(DateFormat.LONG, locales[i]);</span><br><span class="line">            df[i*<span class="number">8</span> + <span class="number">7</span>] = DateFormat.getTimeInstance(DateFormat.FULL, locales[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;locales.length; i++) &#123;</span><br><span class="line">            String tip = i == <span class="number">0</span> ? <span class="string">&quot;------中国日期格式-----&quot;</span> : <span class="string">&quot;-----美国日期格式------&quot;</span>;</span><br><span class="line">            System.out.println(tip);</span><br><span class="line">            System.out.println(<span class="string">&quot;SHORT格式的日期格式：&quot;</span> + df[i*<span class="number">8</span>].format(dt));</span><br><span class="line">            System.out.println(<span class="string">&quot;MEDIUM格式的日期格式：&quot;</span> + df[i*<span class="number">8</span> + <span class="number">1</span>].format(dt));</span><br><span class="line">            System.out.println(<span class="string">&quot;LONG格式的日期格式：&quot;</span> + df[i*<span class="number">8</span> + <span class="number">2</span>].format(dt));</span><br><span class="line">            System.out.println(<span class="string">&quot;FULL格式的日期格式：&quot;</span> + df[i*<span class="number">8</span> + <span class="number">3</span>].format(dt));</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">&quot;SHORT格式的日期格式：&quot;</span> + df[i*<span class="number">8</span> + <span class="number">4</span>].format(dt));</span><br><span class="line">            System.out.println(<span class="string">&quot;MEDIUM格式的日期格式：&quot;</span> + df[i*<span class="number">8</span> + <span class="number">5</span>].format(dt));</span><br><span class="line">            System.out.println(<span class="string">&quot;LONG格式的日期格式：&quot;</span> + df[i*<span class="number">8</span> + <span class="number">6</span>].format(dt));</span><br><span class="line">            System.out.println(<span class="string">&quot;FULL格式的日期格式：&quot;</span> + df[i*<span class="number">8</span> + <span class="number">7</span>].format(dt));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-7-9-使用-SimpleDateFormat-格式化日期"><a href="#7-7-9-使用-SimpleDateFormat-格式化日期" class="headerlink" title="7.7.9 使用 SimpleDateFormat 格式化日期"></a>7.7.9 使用 SimpleDateFormat 格式化日期</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleDateFormatTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ParseException </span>&#123;</span><br><span class="line">        Date d = <span class="keyword">new</span> Date();</span><br><span class="line">        SimpleDateFormat sdf1 = <span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;Gyyyy年中第D天&quot;</span>);</span><br><span class="line">        <span class="comment">// 公元2020年中第145天</span></span><br><span class="line">        System.out.println(sdf1.format(d));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 一个非常特殊的日期字符串</span></span><br><span class="line">        String str = <span class="string">&quot;14###3月##21&quot;</span>;</span><br><span class="line">        SimpleDateFormat sdf2 = <span class="keyword">new</span> SimpleDateFormat(<span class="string">&quot;y###MMM##d&quot;</span>);</span><br><span class="line">        <span class="comment">// Fri Mar 21 00:00:00 CST 2014</span></span><br><span class="line">        System.out.println(sdf2.parse(str));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="7-8-Java-8-新增的日期、时间格式器"><a href="#7-8-Java-8-新增的日期、时间格式器" class="headerlink" title="7.8 Java 8 新增的日期、时间格式器"></a>7.8 Java 8 新增的日期、时间格式器</h2><p>获取 DateTimeFormatter 对象</p>
<ul>
<li>静态常量。ISO_LOCAL_DATE、ISO_LOCAL_TIME</li>
<li>枚举值（FormatStyle）创建</li>
<li>根据模式字符串创建</li>
</ul>
<h3 id="7-8-1-使用-DateTimeFormatter-完成格式化"><a href="#7-8-1-使用-DateTimeFormatter-完成格式化" class="headerlink" title="7.8.1 使用 DateTimeFormatter 完成格式化"></a>7.8.1 使用 DateTimeFormatter 完成格式化</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NewFormatterTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        DateTimeFormatter[] formatters = <span class="keyword">new</span> DateTimeFormatter[] &#123;</span><br><span class="line">                <span class="comment">// 直接使用常量创建</span></span><br><span class="line">                DateTimeFormatter.ISO_LOCAL_DATE,</span><br><span class="line">                DateTimeFormatter.ISO_LOCAL_TIME,</span><br><span class="line">                DateTimeFormatter.ISO_LOCAL_DATE_TIME,</span><br><span class="line">                <span class="comment">// 使用本地化的不同风格来创建</span></span><br><span class="line">                DateTimeFormatter.ofLocalizedDateTime(FormatStyle.FULL,</span><br><span class="line">                        FormatStyle.MEDIUM),</span><br><span class="line">                DateTimeFormatter.ofLocalizedDate(FormatStyle.LONG),</span><br><span class="line">                <span class="comment">// 根据模式字符串创建</span></span><br><span class="line">                DateTimeFormatter.ofPattern(<span class="string">&quot;Gyyyy%%MMM%%dd HH:mm:ss&quot;</span>)</span><br><span class="line">        &#125;;</span><br><span class="line">        LocalDateTime date = LocalDateTime.now();</span><br><span class="line">        <span class="comment">// 依次使用不同的格式器进行格式化</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;formatters.length; i++) &#123;</span><br><span class="line">            System.out.println(date.format(formatters[i]));</span><br><span class="line">            System.out.println(formatters[i].format(date));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-8-2-使用-DateTimeFormatter-解析字符串"><a href="#7-8-2-使用-DateTimeFormatter-解析字符串" class="headerlink" title="7.8.2 使用 DateTimeFormatter 解析字符串"></a>7.8.2 使用 DateTimeFormatter 解析字符串</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NewFormatterParse</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 定义一个任意格式的日期、时间字符串</span></span><br><span class="line">        String str1 = <span class="string">&quot;2014==04==12 01时06分09秒&quot;</span>;</span><br><span class="line">        <span class="comment">// 根据需要解析的日期、时间字符串定义解析所用的格式器</span></span><br><span class="line">        DateTimeFormatter formatter1 = DateTimeFormatter</span><br><span class="line">                .ofPattern(<span class="string">&quot;yyyy==MM==dd HH时mm分ss秒&quot;</span>);</span><br><span class="line">        <span class="comment">// 执行解析</span></span><br><span class="line">        LocalDateTime dt1 = LocalDateTime.parse(str1, formatter1);</span><br><span class="line">        System.out.println(dt1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 解析另外一个字符串</span></span><br><span class="line">        String str2 = <span class="string">&quot;2014$$$04月$$$13 01时06分09秒&quot;</span>;</span><br><span class="line">        DateTimeFormatter formatter2 = DateTimeFormatter</span><br><span class="line">                .ofPattern(<span class="string">&quot;yyyy$$$MM月$$$dd HH时mm分ss秒&quot;</span>);</span><br><span class="line">        LocalDateTime dt2 = LocalDateTime.parse(str2, formatter2);</span><br><span class="line">        System.out.println(dt2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</div><div class="tags"><a href="/tags/%E7%96%AF%E7%8B%82-Java-%E8%AE%B2%E4%B9%89/"><i class="fa fa-tag"></i>疯狂 Java 讲义</a></div><div class="post-nav"><a class="pre" href="/2020-01-08-%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89/%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89C8.html">第 8 章 Java 集合</a><a class="next" href="/2020-01-06-%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89/%E7%96%AF%E7%8B%82Java%E8%AE%B2%E4%B9%89C6.html">第 6 章 面向对象（下）</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://yoursite.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/IO/">IO</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JVM/">JVM</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/LVS/">LVS</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/MySQL/">MySQL</a><span class="category-list-count">13</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Nginx/">Nginx</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/OS/">OS</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring-Cloud/">Spring Cloud</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/SpringCloud/">SpringCloud</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Srping-Boot/">Srping Boot</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ZooKeeper/">ZooKeeper</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/css/">css</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/kafka/">kafka</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/mysql/">mysql</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/vue/">vue</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%8A%A0%E8%A7%A3%E5%AF%86%E6%8A%80%E6%9C%AF/">加解密技术</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%90%89%E4%BB%96/">吉他</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%A4%9A%E7%BA%BF%E7%A8%8B/">多线程</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BF%83%E6%83%85/">心情</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">操作系统</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%97%A0%E5%85%B3%E6%8A%80%E6%9C%AF/">无关技术</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/">消息队列</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%96%AF%E7%8B%82-Java-%E8%AE%B2%E4%B9%89/">疯狂 Java 讲义</a><span class="category-list-count">16</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AE%97%E6%B3%95/">算法</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BD%91%E7%BB%9C/">网络</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a><span class="category-list-count">4</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/Hexo/" style="font-size: 15px;">Hexo</a> <a href="/tags/%E5%BF%83%E6%83%85/" style="font-size: 15px;">心情</a> <a href="/tags/PGP/" style="font-size: 15px;">PGP</a> <a href="/tags/SFTP/" style="font-size: 15px;">SFTP</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/Samba/" style="font-size: 15px;">Samba</a> <a href="/tags/Kafka/" style="font-size: 15px;">Kafka</a> <a href="/tags/NIO/" style="font-size: 15px;">NIO</a> <a href="/tags/Redis/" style="font-size: 15px;">Redis</a> <a href="/tags/Nginx/" style="font-size: 15px;">Nginx</a> <a href="/tags/Blog/" style="font-size: 15px;">Blog</a> <a href="/tags/IO/" style="font-size: 15px;">IO</a> <a href="/tags/SpringCloud/" style="font-size: 15px;">SpringCloud</a> <a href="/tags/Srping-Boot/" style="font-size: 15px;">Srping Boot</a> <a href="/tags/JVM/" style="font-size: 15px;">JVM</a> <a href="/tags/kafka/" style="font-size: 15px;">kafka</a> <a href="/tags/MySQL/" style="font-size: 15px;">MySQL</a> <a href="/tags/css/" style="font-size: 15px;">css</a> <a href="/tags/vue/" style="font-size: 15px;">vue</a> <a href="/tags/%E5%90%89%E4%BB%96/" style="font-size: 15px;">吉他</a> <a href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" style="font-size: 15px;">多线程</a> <a href="/tags/OS/" style="font-size: 15px;">OS</a> <a href="/tags/%E6%97%A0%E5%85%B3%E6%8A%80%E6%9C%AF/" style="font-size: 15px;">无关技术</a> <a href="/tags/%E7%96%AF%E7%8B%82-Java-%E8%AE%B2%E4%B9%89/" style="font-size: 15px;">疯狂 Java 讲义</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 15px;">算法</a> <a href="/tags/ZooKeeper/" style="font-size: 15px;">ZooKeeper</a> <a href="/tags/Observer/" style="font-size: 15px;">Observer</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 15px;">设计模式</a> <a href="/tags/Singleton/" style="font-size: 15px;">Singleton</a> <a href="/tags/Proxy/" style="font-size: 15px;">Proxy</a> <a href="/tags/Oracle/" style="font-size: 15px;">Oracle</a> <a href="/tags/MQTT/" style="font-size: 15px;">MQTT</a> <a href="/tags/LVS/" style="font-size: 15px;">LVS</a> <a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size: 15px;">网络</a> <a href="/tags/Eureka/" style="font-size: 15px;">Eureka</a> <a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 15px;">前端</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://blog.jamespan.me/" title="小鶸の道场" target="_blank">小鶸の道场</a><ul></ul><a href="https://www.haomwei.com/" title="屠城" target="_blank">屠城</a><ul></ul><a href="http://www.ruanyifeng.com/home.html" title="阮一峰" target="_blank">阮一峰</a><ul></ul><a href="https://www.cnblogs.com/jingmoxukong/" title="静默虚空" target="_blank">静默虚空</a><ul></ul><a href="https://blog.hushhw.cn/" title="hushhw" target="_blank">hushhw</a><ul></ul><a href="https://hasaik.com/" title="hasaik" target="_blank">hasaik</a><ul></ul><a href="https://www.imalan.cn/" title="三无计划" target="_blank">三无计划</a><ul></ul><a href="https://i-meto.com/" title="meto" target="_blank">meto</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2020 <a href="/." rel="nofollow">悟空.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>